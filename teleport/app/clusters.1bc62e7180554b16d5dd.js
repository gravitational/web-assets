"use strict";(self.webpackChunk_gravitational_teleport=self.webpackChunk_gravitational_teleport||[]).push([[434],{3937:(e,t,n)=>{n.d(t,{j2:()=>d,Oq:()=>c,sN:()=>r.sN,ZH:()=>r.ZH});var r=n(2760),o=n(2784),s=n(1218),i=n(3757);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends o.Component{constructor(e){super(e),l(this,"anchorEl",null),l(this,"state",{open:!1}),l(this,"onOpen",(e=>{e.stopPropagation(),this.setState({open:!0})})),l(this,"onClose",(()=>{this.setState({open:!1})})),this.state.open=e.defaultOpen||!1}render(){const{open:e}=this.state,{children:t,buttonIconProps:n,menuProps:l}=this.props;return o.createElement(o.Fragment,null,o.createElement(s.Ei,a({},n,{setRef:e=>this.anchorEl=e,onClick:this.onOpen,"data-testid":"button"}),o.createElement(i.mH4,null)),o.createElement(r.ZP,a({menuListCss:u,anchorEl:this.anchorEl,open:e,onClose:this.onClose,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},l),e&&this.renderItems(t)))}renderItems(e){return o.Children.toArray(e).map((e=>o.cloneElement(e,{onClick:this.makeOnClick(e.props.onClick)})))}makeOnClick(e){return t=>{t.stopPropagation(),this.onClose(),e&&e(t)}}}const u=()=>"\n  min-width: 100px;\n";function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends o.Component{constructor(e){super(e),h(this,"anchorEl",null),h(this,"state",{open:!1}),h(this,"onOpen",(e=>{e.stopPropagation(),this.setState({open:!0})})),h(this,"onClose",(()=>{this.setState({open:!1})})),this.state.open=e.defaultOpen||!1}render(){const{open:e}=this.state,{children:t,menuProps:n,buttonProps:a}=this.props;return o.createElement(o.Fragment,null,o.createElement(s.ku,p({height:"24px",size:"small",setRef:e=>this.anchorEl=e,onClick:this.onOpen},a),"OPTIONS",o.createElement(i.E_,{ml:2,mr:-2,fontSize:"2",color:"text.secondary"})),o.createElement(r.ZP,p({getContentAnchorEl:null,menuListCss:m,anchorEl:this.anchorEl,open:e,onClose:this.onClose,transformOrigin:{vertical:"top",horizontal:"right"},anchorOrigin:{vertical:"center",horizontal:"right"}},n),e&&this.renderItems(t)))}renderItems(e){return o.Children.toArray(e).map((e=>o.cloneElement(e,{onClick:this.makeOnClick(e.props.onClick)})))}makeOnClick(e){return t=>{t.stopPropagation(),this.onClose(),e&&e(t)}}}const m=()=>"\n  min-width: 100px;\n"},3979:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var r=n(2784),o=n(1218),s=n(9124),i=n(7067),a=n(2398),l=n(7933),c=n(917),u=n(3937),p=n(3652),h=n(5147),d=n(7278);function m(e){let{clusterId:t}=e;const n=d.Z.proxyCluster===t;return r.createElement(p.bL,{style:{width:"40px"}},n&&r.createElement(h.sq,null,"ROOT"))}function f(e,t){return r.createElement(u.sN,{as:l.OL,to:t,key:e},e)}const g=(0,c.ZP)(p.ZP)(["td{height:22px;}"]),b=function(e){const{clusters:t=[],pageSize:n=50,menuFlags:o}=e;return r.createElement(g,{data:t,columns:[{altKey:"root-label",render:m},{key:"clusterId",headerText:"Name",isSortable:!0},{altKey:"menu-btn",render:e=>function(e,t){let{clusterId:n}=e;const o=[];return t.showNodes&&o.push(f("Servers",d.Z.getNodesRoute(n))),t.showApps&&o.push(f("Applications",d.Z.getAppsRoute(n))),t.showKubes&&o.push(f("Kubernetes",d.Z.getKubernetesRoute(n))),t.showDatabases&&o.push(f("Databases",d.Z.getDatabasesRoute(n))),t.showDesktops&&o.push(f("Desktops",d.Z.getDesktopsRoute(n))),t.showAudit&&o.push(f("Audit Log",d.Z.getAuditRoute(n))),t.showRecordings&&o.push(f("Session Recordings",d.Z.getRecordingsRoute(n))),r.createElement(p.bL,{align:"right"},o&&r.createElement(u.j2,{children:o}))}(e,o)}],emptyText:"No Clusters Found",isSearchable:!0,showFirst:e=>e.find((e=>e.clusterId===d.Z.proxyCluster)),pagination:{pageSize:n}})};var O=n(4696),w=n(9913);function x(e){const{clusters:t,enabledFeatures:n,initAttempt:a}=e;return r.createElement(i.Ob,null,r.createElement(i.OX,{alignItems:"center"},r.createElement(i.u4,null,"Manage Clusters")),"processing"===a.status&&r.createElement(o.xu,{textAlign:"center",m:10},r.createElement(o.z$,null)),"failed"===a.status&&r.createElement(s.b0,null,a.statusText," "),"success"===a.status&&r.createElement(b,{clusters:t,menuFlags:{showNodes:n.nodes,showAudit:n.audit,showRecordings:n.recordings,showApps:n.apps,showDatabases:n.databases,showKubes:n.kubes,showDesktops:n.desktops}}))}const E=function(){const e=function(e){const[t,n]=(0,r.useState)([]),{attempt:o,run:s}=(0,O.Z)();function i(){s((()=>e.clusterService.fetchClusters().then(n)))}const[a]=(0,r.useState)((()=>function(e){const t=e.features.some((e=>e instanceof w.VG)),n=e.features.some((e=>e instanceof w.qP)),r=e.features.some((e=>e instanceof w.$S)),o=e.features.some((e=>e instanceof w.iL)),s=e.features.some((e=>e instanceof w.jJ));return{nodes:n,audit:r,recordings:e.features.some((e=>e instanceof w.$1)),apps:t,kubes:o,databases:s,desktops:e.features.some((e=>e instanceof w.UA))}}(e)));return(0,r.useEffect)((()=>{i()}),[]),{init:i,initAttempt:o,clusters:t,enabledFeatures:a}}((0,a.Z)());return r.createElement(x,e)}},7067:(e,t,n)=>{n.d(t,{Ob:()=>p,OX:()=>c,u4:()=>u,E2:()=>h});var r=n(917),o=n(1218),s=n(135);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=(0,r.ZP)(o.kC)(["flex-shrink:0;border-bottom:1px solid ",";height:56px;margin-left:-40px;margin-right:-40px;padding-left:40px;padding-right:40px;"],(e=>e.theme.colors.primary.main));c.defaultProps={alignItems:"center",mb:4};const u=(0,r.ZP)(o.xv)(["white-space:nowrap;"]);u.defaultProps=a(a({},o.xv.defaultProps),{},{typography:"h3"});const p=(0,r.ZP)(o.kC)(["width:100%;height:100%;flex-direction:column;::after{content:' ';padding-bottom:24px;}"]);p.defaultProps={theme:s.Z,px:6},r.ZP.div(["position:absolute;width:100%;height:100%;display:flex;"]),r.ZP.div(["display:flex;flex-direction:column;width:100%;"]);const h=r.ZP.button(["color:",";cursor:pointer;display:inline-flex;font-size:14px;padding:12px 40px;position:relative;text-decoration:none;font-weight:500;&:hover{background:",";}&.active{color:",";}&.active:after{background-color:",";content:'';position:absolute;bottom:0;left:0;width:100%;height:4px;}"],(e=>e.theme.colors.text.secondary),(e=>e.active?e.theme.colors.primary.light:"rgba(255, 255, 255, .06)"),(e=>e.theme.colors.light),(e=>e.theme.colors.accent))},2398:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(2784),o=n(3665);function s(){const e=r.useContext(o.U);if(!e)throw new Error("Unable to retrieve Teleport Context");return window.teleContext=e}}}]);