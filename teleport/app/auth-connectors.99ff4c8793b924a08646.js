"use strict";(self.webpackChunk_gravitational_teleport=self.webpackChunk_gravitational_teleport||[]).push([[860],{4696:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(2784);const a=n(2418).Z.create("shared/hooks/useAttempt");function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const[t,n]=r.useState((()=>({status:e,statusText:""})));function o(e){a.error("attempt",e),n({status:"failed",statusText:e.message})}const c=(0,r.useCallback)((e=>{try{return n({status:"processing"}),e().then((()=>(n({status:"success"}),!0))).catch((e=>(o(e),!1)))}catch(e){return o(e),Promise.resolve(!1)}}),[]);return{attempt:t,setAttempt:n,run:c,handleError:o}}},6187:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(2784),a=n(7849),o=n(7067),c=n(694),i=n(2682),l=n(3757);const s=function(e){let{onCreate:t}=e;return r.createElement(a.Zb,{maxWidth:"700px",p:6,as:a.kC,alignItems:"center"},r.createElement(l.Eye,{style:{textAlign:"center"},fontSize:"150px",color:"primary.lighter",mr:5}),r.createElement(a.xu,null,r.createElement(a.xv,{typography:"h6",mb:3,caps:!0},"Create Your First Github Connector"),r.createElement(a.xv,{typography:"subtitle1",mb:3},"Authentication connectors allow Teleport to authenticate users via an external identity source such as Okta, Active Directory, GitHub, etc. This authentication method is frequently called single sign-on (SSO)."),r.createElement(a.xv,{typography:"subtitle1"},"Open Source Teleport supports only GitHub connectors. Please"," ",r.createElement(a.xv,{as:"a",color:"light",href:"https://goteleport.com/docs/setup/admin/github-sso/",target:"_blank"},"view our documentation")," ","on how to configure a GitHub connector."),r.createElement(a.DF,{onClick:t,mt:4,width:"240px"},"New Github Connector")))};var u=n(3937);function m(e){let{name:t,id:n,onEdit:o,onDelete:c}=e;return r.createElement(a.kC,{style:{position:"relative",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.24)"},width:"240px",height:"240px",borderRadius:"3",flexDirection:"column",alignItems:"center",justifyContent:"center",bg:"primary.light",px:"5",pt:"2",pb:"5",mb:4,mr:5},r.createElement(a.kC,{width:"100%",justifyContent:"center"},r.createElement(u.Oq,{buttonIconProps:h},r.createElement(u.sN,{onClick:()=>c(n)},"Delete..."))),r.createElement(a.kC,{flex:"1",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"200px",style:{textAlign:"center"}},r.createElement(l.Eye,{style:{textAlign:"center"},fontSize:"50px",color:"text.primary",mb:3,mt:3}),r.createElement(a.xv,{style:{width:"100%"},typography:"body2",bold:!0,caps:!0},t)),r.createElement(a.DF,{mt:"auto",size:"medium",block:!0,onClick:()=>o(n)},"EDIT CONNECTOR"))}const h={style:{right:"10px",position:"absolute",top:"10px"}},p=function(e){let{items:t,onEdit:n,onDelete:o}=e;t=t||[];const c=t.map((e=>{const{id:t,name:a}=e;return r.createElement(m,{key:t,id:t,onEdit:n,onDelete:o,name:a})}));return r.createElement(a.kC,{flexWrap:"wrap",alignItems:"center",flex:1},c)};var d=n(4696),g=n(369);const b=function(e){const{name:t,onClose:n,onDelete:o}=e,{attempt:c,run:i}=(0,d.Z)(),l="processing"===c.status;return r.createElement(g.ZP,{dialogCss:()=>({maxWidth:"500px",width:"100%"}),disableEscapeKeyDown:!1,onClose:n,open:!0},r.createElement(g.fK,null,r.createElement(g.$N,null,"Remove Connector?")),r.createElement(g.cZ,null,"failed"===c.status&&r.createElement(a.bZ,{children:c.statusText}),r.createElement(a.xv,{typography:"paragraph",mb:"6"},"Are you sure you want to delete connector"," ",r.createElement(a.xv,{as:"span",bold:!0,color:"primary.contrastText"},t),"?")),r.createElement(g.cN,null,r.createElement(a.U3,{mr:"3",disabled:l,onClick:function(){i((()=>o())).then((e=>e&&n()))}},"Yes, Remove Connector"),r.createElement(a.PL,{disabled:l,onClick:n},"Cancel")))};var E=n(2398);const x={github:'kind: github\nversion: v3\nmetadata:\n  name: new_github_connector\nspec:\n  # Github OAuth app client ID\n  client_id: <client-id>\n  # Github OAuth app client secret\n  client_secret: <client-secret>\n  # Github will make a callback to this URL after successful authentication\n  # cluster-url is the address the cluster UI is reachable at\n  redirect_url: "https://<cluster-url>/v1/webapi/github/callback"\n  # connector display name that will be appended to the title of "Login with"\n  # button on the cluster login screen so it will say "Login with Github"\n  display: Github\n  # mapping of Github team memberships to Teleport roles\n  teams_to_roles:\n    - organization: <github-org>\n      team: <github-team>\n      roles:\n        - "access"\n'};function y(e){const{attempt:t,items:n,remove:l,save:u}=e,m=0===n.length,h=(0,i.Z)(n,x),d="creating"===h.status?"Creating a new github connector":"Editing github connector";return r.createElement(o.Ob,null,r.createElement(o.OX,null,r.createElement(o.u4,null,"Auth Connectors"),r.createElement(a.DF,{ml:"auto",width:"240px",onClick:()=>h.create("github")},"New Github Connector")),"failed"===t.status&&r.createElement(a.bZ,{children:t.statusText}),"processing"===t.status&&r.createElement(a.xu,{textAlign:"center",m:10},r.createElement(a.z$,null)),"success"===t.status&&r.createElement(a.kC,{alignItems:"start"},m&&r.createElement(a.kC,{mt:"4",width:"100%",justifyContent:"center"},r.createElement(s,{onCreate:()=>h.create("github")})),!m&&r.createElement(r.Fragment,null,r.createElement(p,{items:n,onEdit:h.edit,onDelete:h.remove}),r.createElement(a.xu,{ml:"4",width:"240px",color:"text.primary",style:{flexShrink:0}},r.createElement(a.xv,{typography:"h6",mb:3,caps:!0},"Authentication Connectors"),r.createElement(a.xv,{typography:"subtitle1",mb:3},"Authentication connectors allow Teleport to authenticate users via an external identity source such as Okta, Active Directory, GitHub, etc. This authentication method is frequently called single sign-on (SSO)."),r.createElement(a.xv,{typography:"subtitle1",mb:2},"Please"," ",r.createElement(a.rU,{color:"light",href:"https://goteleport.com/docs/setup/admin/github-sso/",target:"_blank"},"view our documentation")," ","on how to configure a GitHub connector.")))),("creating"===h.status||"editing"===h.status)&&r.createElement(c.Z,{title:d,onSave:function(e){const t="creating"===h.status;return u(e,t)},text:h.item.content,name:h.item.name,isNew:"creating"===h.status,onClose:h.disregard}),"removing"===h.status&&r.createElement(b,{name:h.item.name,onClose:h.disregard,onDelete:()=>l(h.item.name)}))}const f=function(){const e=function(){const e=(0,E.Z)(),[t,n]=(0,r.useState)([]),{attempt:a,run:o}=(0,d.Z)("processing");function c(){return e.resourceService.fetchGithubConnectors().then((e=>{n(e)}))}return(0,r.useEffect)((()=>{o((()=>c()))}),[]),{items:t,attempt:a,save:function(t,n){return n?e.resourceService.createGithubConnector(t).then(c):e.resourceService.updateGithubConnector(t).then(c)},remove:function(t){return e.resourceService.deleteGithubConnector(t).then(c)}}}();return r.createElement(y,e)}}}]);