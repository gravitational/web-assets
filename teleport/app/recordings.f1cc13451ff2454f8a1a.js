"use strict";(self.webpackChunk_gravitational_teleport=self.webpackChunk_gravitational_teleport||[]).push([[465],{369:(e,t,r)=>{r.d(t,{cZ:()=>o.cZ,cN:()=>o.cN,fK:()=>o.fK,$N:()=>o.$N,ZP:()=>a});var n=r(2784),o=r(9161);const a=function(e){const{children:t,open:r,onClose:a,dialogCss:i}=e;return n.createElement(o.ZP,{dialogCss:i,disableEscapeKeyDown:!1,onClose:a,open:r},t)}},1051:(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var n=r(2784),o=r(9124),a=r(7849),i=r(4025),s=r(7067),c=r(2398),l=r(3652),u=r(4217),d=r(8862),p=r(7278);function m(e){const{recordings:t=[],clusterId:r,pageSize:o=50,fetchMore:a,fetchStatus:i}=e;return n.createElement(l.ZP,{data:t,columns:[{headerText:"Type",key:"recordingType",isSortable:!0,render:e=>{let{recordingType:t}=e;return f(t)}},{key:"hostname",headerText:"Name",isSortable:!0},{key:"users",headerText:"User(s)",render:e=>{let{users:t}=e;return n.createElement(l.bL,{style:{wordBreak:"break-word"}},t)},isSortable:!0},{key:"duration",headerText:"Duration",isSortable:!0,render:e=>{let{durationText:t}=e;return n.createElement(l.M4,{data:t})}},{key:"createdDate",headerText:"Created (UTC)",isSortable:!0,render:e=>{let{createdDate:t}=e;return n.createElement(l.bL,null,t)}},{key:"sid",headerText:"Session ID"},{altKey:"play-btn",render:e=>g(e,r)}],emptyText:"No Recordings Found",pagination:{pageSize:o},fetching:{onFetchMore:a,fetchStatus:i},initialSort:{key:"createdDate",dir:"DESC"},isSearchable:!0,searchableProps:["recordingType","hostname","description","createdDate","sid","users","durationText"],customSearchMatchers:[(0,u.vq)(["createdDate"])]})}const f=e=>{let t=d.zlj;return"desktop"===e?t=d.Hi7:"k8s"===e&&(t=d.YJo),n.createElement(l.bL,null,n.createElement(d.ZPm,{p:1,mr:3,fontSize:3,as:t}))},g=(e,t)=>{let{description:r,sid:o,recordingType:i,playable:s,duration:c}=e;if(!s)return n.createElement(l.bL,{align:"right",style:{color:"#9F9F9F"}},r);const u=p.Z.getPlayerRoute({clusterId:t,sid:o},{recordingType:i,durationMs:"desktop"===i?c:void 0});return n.createElement(l.bL,{align:"right"},n.createElement(a.ku,{kind:"primary",as:"a",href:u,width:"80px",target:"_blank",size:"small"},"Play"))};var h=r(4696),b=r(6828);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){let{recordings:t,fetchStatus:r,fetchMore:c,range:l,setRange:u,rangeOptions:d,attempt:p,clusterId:f}=e;return n.createElement(s.Ob,null,n.createElement(s.OX,{alignItems:"center"},n.createElement(s.u4,{mr:"8"},"Session Recordings"),n.createElement(i.Z,{ml:"auto",range:l,ranges:d,onChangeRange:u})),"failed"===p.status&&n.createElement(o.b0,null," ",p.statusText," "),"processing"===p.status&&n.createElement(a.xu,{textAlign:"center",m:10},n.createElement(a.z$,null)),"success"===p.status&&n.createElement(m,{recordings:t,clusterId:f,fetchMore:c,fetchStatus:r}))}const D=function(){const e=function(e){const{clusterId:t}=(0,b.Z)(),r=(0,n.useMemo)((()=>(0,i.n)()),[]),[o,a]=(0,n.useState)(r[0]),{attempt:s,setAttempt:c,run:l}=(0,h.Z)("processing"),[u,d]=(0,n.useState)({recordings:[],fetchStartKey:"",fetchStatus:""});return(0,n.useEffect)((()=>{l((()=>e.recordingsService.fetchRecordings(t,x({},o)).then((e=>d({recordings:e.recordings,fetchStartKey:e.startKey,fetchStatus:e.startKey?"":"disabled"})))))}),[t,o]),x(x({},u),{},{attempt:s,range:o,rangeOptions:r,setRange:a,clusterId:t,fetchMore:function(){d(x(x({},u),{},{fetchStatus:"loading"})),e.recordingsService.fetchRecordings(t,x(x({},o),{},{startKey:u.fetchStartKey})).then((e=>d({recordings:[...u.recordings,...e.recordings],fetchStartKey:e.startKey,fetchStatus:e.startKey?"":"disabled"}))).catch((e=>{c({status:"failed",statusText:e.message})}))}})}((0,c.Z)());return n.createElement(O,e)}},4025:(e,t,r)=>{r.d(t,{Z:()=>w,n:()=>S});var n=r(2784),o=r(1997),a=(r(4836),r(7849)),i=r(369),s=r(9557),c=r(7038),l=r(2598),u=r(1106),d=r(2276),p=r(405),m=r(6027),f=r(917),g=r(7066),h=r.n(g),b=r(3757);class y extends n.Component{constructor(e){var t,r;super(),r=e=>{if((0,l.Z)(e,(0,u.Z)(new Date)))return;let{from:t,end:r}=this.state;if((0,d.Z)(t,e))return;!1===this.startSelecting&&(r=void 0,t=void 0,this.startSelecting=!0);const n=g.DateUtils.addDayToRange(e,{from:t,end:r});n.from&&(n.from=(0,p.Z)(n.from)),n.to&&(n.to=(0,u.Z)(n.to)),this.setState(n,this.onChange)},(t="handleDayClick")in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r,this.startSelecting=!1;const{from:n,to:o}=e;this.state={from:n,to:o}}onChange(){const{from:e,to:t}=this.state;e&&t&&this.startSelecting&&this.props.onChange(e,t)}render(){const{from:e,to:t}=this.state,r={start:e,end:t};return n.createElement(P,null,n.createElement(x,{title:"Close",onClick:this.props.onClosePicker},n.createElement(b.x8P,{color:"primary"})),n.createElement(h(),{className:"Selectable",numberOfMonths:2,month:(0,m.Z)(t||new Date,1),disabledDays:{after:new Date},selectedDays:[e,{from:e,to:t}],modifiers:r,onDayClick:this.handleDayClick}))}}const x=f.ZP.button(["background:transparent;border-radius:2px;border:none;color:",";cursor:pointer;height:24px;width:24px;outline:none;padding:0;margin:0 8px 0 0;transition:all 0.3s;position:absolute;font-size:20px;z-index:100;top:8px;right:0px;&:hover{background:",";}"],(e=>e.theme.colors.grey[900]),(e=>e.theme.colors.grey[200])),P=(0,f.ZP)(a.kC)(["position:relative;.DayPicker{line-height:initial;color:black;background-color:white;box-shadow:inset 0 2px 4px rgba(0,0,0,0.24);box-sizing:border-box;border-radius:5px;padding:24px;}.DayPicker-Months{}.DayPicker-Day--selected:not(.DayPicker-Day--start):not(.DayPicker-Day--end):not(.DayPicker-Day--outside){background-color:#f0f8ff !important;color:#4a90e2;}.DayPicker-Day{border-radius:0 !important;}.DayPicker-Day--start{border-top-left-radius:50% !important;border-bottom-left-radius:50% !important;}.DayPicker-Day--end{border-top-right-radius:50% !important;border-bottom-right-radius:50% !important;}"]),O=y,D=["children"];const k=e=>{let{children:t}=e,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,D);const{isCustom:i,from:c,to:l}=r.getValue()[0].value;return i?n.createElement(o.F.ValueContainer,r,n.createElement(a.xv,{color:"text.primary"},`${(0,s.Po)(c)} - ${(0,s.Po)(l)}`),t):n.createElement(o.F.ValueContainer,r,t)};var v=r(8212);function S(){return[{name:"Today",from:(0,p.Z)(new Date),to:(0,u.Z)(new Date)},{name:"7 days",from:(0,p.Z)((0,v.Z)(new Date,6)),to:(0,u.Z)(new Date)},{name:"Custom Range...",isCustom:!0,from:new Date,to:new Date}]}const w=function(e){let{ml:t,range:r,onChangeRange:o,ranges:a}=e;const[s,l]=(0,n.useState)(!1),[u]=(0,n.useState)((()=>a.map((e=>({value:e,label:e.name})))));function d(){l(!1)}return n.createElement(n.Fragment,null,n.createElement(c.vf,{ml:t,width:"210px"},n.createElement(c.ZP,{isSearchable:!1,components:{ValueContainer:k},options:u,onChange:function(e){e.value.isCustom?l(!0):o(e.value)},value:{value:r,label:r.name}})),n.createElement(i.ZP,{dialogCss:()=>({padding:"0"}),disableEscapeKeyDown:!1,onClose:d,open:s},n.createElement(O,{from:r.from,to:r.to,onChange:function(e,t){o({isCustom:!0,from:e,to:t}),d()},onClosePicker:d})))}},7067:(e,t,r)=>{r.d(t,{Ob:()=>d,OX:()=>l,u4:()=>u,E2:()=>p});var n=r(917),o=r(7849),a=r(135);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const l=(0,n.ZP)(o.kC)(["flex-shrink:0;border-bottom:1px solid ",";height:56px;margin-left:-40px;margin-right:-40px;padding-left:40px;padding-right:40px;"],(e=>e.theme.colors.primary.main));l.defaultProps={alignItems:"center",mb:4};const u=(0,n.ZP)(o.xv)(["white-space:nowrap;"]);u.defaultProps=s(s({},o.xv.defaultProps),{},{typography:"h3"});const d=(0,n.ZP)(o.kC)(["width:100%;height:100%;flex-direction:column;::after{content:' ';padding-bottom:24px;}"]);d.defaultProps={theme:a.Z,px:6},n.ZP.div(["position:absolute;width:100%;height:100%;display:flex;"]),n.ZP.div(["display:flex;flex-direction:column;width:100%;"]);const p=n.ZP.button(["color:",";cursor:pointer;display:inline-flex;font-size:14px;padding:12px 40px;position:relative;text-decoration:none;font-weight:500;&:hover{background:",";}&.active{color:",";}&.active:after{background-color:",";content:'';position:absolute;bottom:0;left:0;width:100%;height:4px;}"],(e=>e.theme.colors.text.secondary),(e=>e.active?e.theme.colors.primary.light:"rgba(255, 255, 255, .06)"),(e=>e.theme.colors.light),(e=>e.theme.colors.accent))}}]);