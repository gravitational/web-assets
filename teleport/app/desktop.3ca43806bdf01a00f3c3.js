"use strict";(self.webpackChunk_gravitational_teleport=self.webpackChunk_gravitational_teleport||[]).push([[380],{4207:(e,t,r)=>{r.d(t,{x:()=>g});var n=r(2784),o=r(917),s=r(7933),a=r(2760),c=r(2865),l=r(7849),i=r(3757);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(){return{data:null,status:"",statusText:""}}const g=n.forwardRef(((e,t)=>{const{onSelect:r,anchorOrigin:o,transformOrigin:s,required:c=!0,width:u}=e,d=(0,n.useRef)(),[g,f]=(0,n.useState)(!1),[b,y]=function(e){const[t,r]=(0,n.useState)(m),o=(0,n.useCallback)((function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Promise.resolve().then((()=>(r((e=>p(p({},e),{},{status:"processing"}))),e.call(null,...n)))).then((e=>(r((t=>p(p({},t),{},{status:"success",data:e}))),[e,null])),(e=>(r((t=>p(p({},t),{},{status:"error",statusText:null==e?void 0:e.message,data:null}))),[null,e])))}),[r,e]);return[t,o,(0,n.useCallback)((e=>{r(e)}),[r])]}((()=>Promise.resolve().then((()=>e.getLoginItems())))),x=e.placeholder||"Enter login nameâ€¦",k=()=>{b.status||y(),f(!0)},v=()=>{f(!1)};return(0,n.useImperativeHandle)(t,(()=>({open:()=>{k()}}))),n.createElement(n.Fragment,null,n.createElement(l.ku,{height:"24px",size:"small",setRef:d,onClick:k},"CONNECT",n.createElement(i.E_,{ml:2,mr:-2,fontSize:"2",color:"text.secondary"})),n.createElement(a.ZP,{anchorOrigin:o,transformOrigin:s,anchorEl:d.current,open:g,onClose:v,getContentAnchorEl:null},n.createElement(h,{getLoginItemsAttempt:b,onKeyPress:e=>{"Enter"!==e.key||c&&!e.currentTarget.value||(v(),r(e,e.currentTarget.value))},onClick:(e,t)=>{v(),r(e,t)},placeholder:x,width:u})))})),h=e=>{let{getLoginItemsAttempt:t,onClick:r,onKeyPress:o,placeholder:a,width:c}=e;const i=function(e,t){switch(e.status){case"":case"processing":return n.createElement(x,null);case"error":return null;case"success":return e.data.map(((e,r)=>{const{login:o,url:a}=e;return n.createElement(b,{key:r,px:"2",mx:"2",as:a?s.OL:f,to:a,onClick:e=>{t(e,o)}},o)}))}}(t,r);return n.createElement(l.kC,{flexDirection:"column",width:c},n.createElement(y,{p:"2",m:"2",onKeyPress:o,type:"text",autoFocus:!0,placeholder:a,autoComplete:"off"}),i)},f=o.ZP.button(["color:inherit;border:none;flex:1;"]),b=(0,o.ZP)(a.sN)((e=>{let{theme:t}=e;return`\n  color: ${t.colors.grey[400]};\n  font-size: 12px;\n  border-bottom: 1px solid ${t.colors.subtle};\n  min-height: 32px;\n  &:hover {\n    color: ${t.colors.link};\n  }\n\n  :last-child {\n    border-bottom: none;\n    margin-bottom: 8px;\n  }\n`})),y=o.ZP.input((e=>{let{theme:t}=e;return`\n  background: ${t.colors.subtle};\n  border: 1px solid ${t.colors.subtle};\n  border-radius: 4px;\n  box-sizing: border-box;\n  color: ${t.colors.grey[900]};\n  height: 32px;\n  outline: none;\n\n  &:focus {\n    background: ${t.colors.light};\n    border 1px solid ${t.colors.link};\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, .24);\n  }\n\n  ::placeholder {\n    color: ${t.colors.grey[100]};\n  }\n`}),c.Dh);var x=(0,o.ZP)(l.z$)(["",""],(e=>{let{theme:t}=e;return`\n            align-self: center;\n            color: ${t.colors.secondary.dark}\n          `}))},4123:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var n=r(2784),o=r(7849),s=r(2398),a=r(7067),c=r(5769),l=r(2499),i=r(2479),u=r(3652),p=r(4207),d=r(8388);const m=function(e){const{desktops:t=[],pageSize:r,onLoginMenuOpen:o,onLoginSelect:s,totalCount:a,fetchNext:c,fetchPrev:l,fetchStatus:i,from:m,to:g,params:h,setParams:f,startKeys:b,setSort:y,pathname:x,replaceHistory:k,onLabelClick:v}=e;function O(e,t,r){e.preventDefault(),s(t,r)}return n.createElement(u.ZP,{data:t,columns:[{key:"addr",headerText:"Address"},{key:"name",headerText:"Name",isSortable:!0},{key:"labels",headerText:"Labels",render:e=>{let{labels:t}=e;return n.createElement(u.aW,{labels:t,onClick:v})}},{altKey:"login-cell",render:e=>function(e,t,r){let{name:o}=e;return n.createElement(u.bL,{align:"right"},n.createElement(p.x,{getLoginItems:function(){return t(o)},onSelect:function(e,t){return r?r(e,t,o):[]},transformOrigin:{vertical:"top",horizontal:"right"},anchorOrigin:{vertical:"center",horizontal:"right"}}))}(e,o,O)}],pagination:{pageSize:r},fetching:{onFetchNext:c,onFetchPrev:l,fetchStatus:i},serversideProps:{sort:h.sort,setSort:y,startKeys:b,serversideSearchPanel:n.createElement(d.Z,{from:m,to:g,count:a,params:h,setParams:f,pathname:x,replaceHistory:k})},isSearchable:!0,emptyText:"No Desktops Found"})};var g=r(4517),h=r(4696),f=r(7278),b=r(6828),y=r(1392),x=r(321),k=r(3228),v=r(7773);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e){const{attempt:t,username:r,clusterId:s,canCreate:u,isLeafCluster:p,getWindowsLoginOptions:d,openRemoteDesktopTab:g,results:h,fetchNext:f,fetchPrev:b,from:y,to:x,pageSize:k,params:v,setParams:O,startKeys:E,setSort:w,pathname:P,replaceHistory:S,fetchStatus:j,isSearchEmpty:Z,onLabelClick:D}=e,$=0===h.desktops.length&&Z;return n.createElement(a.Ob,null,n.createElement(a.OX,{alignItems:"center",justifyContent:"space-between"},n.createElement(a.u4,null,"Desktops"),"success"===t.status&&!$&&n.createElement(i.Z,{agent:"desktop",beginsWithVowel:!1,isLeafCluster:p,canCreate:u})),"processing"===t.status&&n.createElement(o.xu,{textAlign:"center",m:10},n.createElement(o.z$,null)),"failed"===t.status&&n.createElement(l.Z,{message:t.statusText}),"processing"!==t.status&&!$&&n.createElement(m,{desktops:h.desktops,username:r,clusterId:s,onLoginMenuOpen:d,onLoginSelect:g,fetchNext:f,fetchPrev:b,fetchStatus:j,from:y,to:x,totalCount:h.totalCount,pageSize:k,params:v,setParams:O,startKeys:E,setSort:w,pathname:P,replaceHistory:S,onLabelClick:D}),"success"===t.status&&$&&n.createElement(c.Z,{clusterId:s,canCreate:u&&!p,emptyStateInfo:C}))}const C={title:"Add your first Windows desktop to Teleport",byline:"Teleport Desktop Access provides graphical desktop access to remote Windows hosts.",docsURL:"https://goteleport.com/docs/desktop-access/getting-started/",resourceType:"desktop",readOnly:{title:"No Desktops Found",resource:"desktops"}},S=function(){const e=function(e){const{attempt:t,setAttempt:r}=(0,h.Z)("processing"),{search:o,pathname:s}=(0,g.TH)(),[a,c]=(0,n.useState)([]),{clusterId:l,isLeafCluster:i}=(0,b.Z)(),u=e.storeUser.getTokenAccess().create,p=e.storeUser.state.username,d=e.storeUser.getWindowsLogins(),[m,O]=(0,n.useState)(""),[w,P]=(0,n.useState)(E({sort:{fieldName:"name",dir:"ASC"}},(0,x.Z)(o))),C=!(null!=w&&w.query||null!=w&&w.search),[S,j]=(0,n.useState)({desktops:[],startKey:"",totalCount:0}),Z=S.totalCount>0?15*(a.length-2)+1:0,D=S.totalCount>0?Z+S.desktops.length-1:0;function $(e){y.Z.replace(e)}return(0,n.useEffect)((()=>{r({status:"processing"}),e.desktopService.fetchDesktops(l,E(E({},w),{},{limit:15})).then((e=>{j({desktops:e.agents,startKey:e.startKey,totalCount:e.totalCount}),O(e.startKey?"":"disabled"),c(["",e.startKey]),r({status:"success"})})).catch((e=>{r({status:"failed",statusText:e.message}),j(E(E({},S),{},{desktops:[],totalCount:0})),c([""])}))}),[l,o]),{attempt:t,username:p,clusterId:l,canCreate:u,isLeafCluster:i,getWindowsLoginOptions:e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).map((r=>({login:r,url:f.Z.getDesktopRoute({clusterId:e,desktopName:t,username:r})})))}(l,e,d),openRemoteDesktopTab:(e,t)=>{const r=f.Z.getDesktopRoute({clusterId:l,desktopName:t,username:e});(0,k.RB)(r)},results:S,fetchNext:()=>{O("loading"),e.desktopService.fetchDesktops(l,E(E({},w),{},{limit:15,startKey:S.startKey})).then((e=>{j(E(E({},S),{},{desktops:e.agents,startKey:e.startKey})),O(e.startKey?"":"disabled"),c([...a,e.startKey])})).catch((e=>{r({status:"failed",statusText:e.message})}))},fetchPrev:()=>{O("loading"),e.desktopService.fetchDesktops(l,E(E({},w),{},{limit:15,startKey:a[a.length-3]})).then((e=>{const t=a;t.pop(),c(t),j(E(E({},S),{},{desktops:e.agents,startKey:e.startKey})),O("")})).catch((e=>{r({status:"failed",statusText:e.message})}))},pageSize:15,from:Z,to:D,params:w,setParams:P,startKeys:a,setSort:function(e){P(E(E({},w),{},{sort:e}))},pathname:s,replaceHistory:$,fetchStatus:m,isSearchEmpty:C,onLabelClick:e=>(0,v.Z)(e,w,P,s,$)}}((0,s.Z)());return n.createElement(P,e)}},2479:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(2784),o=r(7933),s=r(7849),a=r(7278);const c=function(e){const{canCreate:t,isLeafCluster:r,onClick:c,agent:l,beginsWithVowel:i}=e,u=r||!t;let p="";return t||(p=`You do not have access to add ${i?"an":"a"} ${l}`),r&&(p=`Adding ${i?"an":"a"} ${l} to a leaf cluster is not supported`),n.createElement(o.rU,{to:{pathname:`${a.Z.routes.root}/discover`,state:{entity:l}},style:{textDecoration:"none"}},n.createElement(s.DF,{title:p,disabled:u,width:"240px",onClick:c},"Add ",l))}},5769:(e,t,r)=>{r.d(t,{Z:()=>m});var n=r(2784),o=r(7933),s=r(7849),a=r(9049),c=r(7278);const l=r.p+"assets/img/img-b7a4b8.png",i=r.p+"assets/img/img-6693d4.png",u=r.p+"assets/img/img-7ba430.png",p=r.p+"assets/img/img-73fbbf.png";function d(e){return{application:l,database:i,desktop:u,kubernetes:p,server:p}[e]}const m=function(e){const{canCreate:t,clusterId:r,emptyStateInfo:l}=e,{byline:i,docsURL:u,resourceType:p,readOnly:m,title:g}=l;return t?n.createElement(s.xu,{p:8,pt:5,as:s.kC,width:"100%",mx:"auto",alignItems:"center",justifyContent:"center"},n.createElement(s.xu,{maxWidth:600},n.createElement(s.xu,{mb:4,textAlign:"center"},n.createElement(a.Z,{src:d(p),ml:"auto",mr:"auto",mb:4,height:"160px"}),n.createElement(s.xv,{typography:"h5",mb:2,fontWeight:700,fontSize:24},g),n.createElement(s.xv,{fontWeight:400,fontSize:14,style:{opacity:"0.6"}},i)),n.createElement(s.xu,{textAlign:"center"},n.createElement(o.rU,{to:{pathname:`${c.Z.routes.root}/discover`,state:{entity:p}},style:{textDecoration:"none"}},n.createElement(s.DF,{width:"224px"},"Add ",p)),n.createElement(s.JU,{size:"medium",as:"a",href:u,target:"_blank",width:"224px",ml:4,rel:"noreferrer"},"View Documentation")))):n.createElement(s.xu,{p:8,mx:"auto",maxWidth:"664px",textAlign:"center",color:"text.primary",borderRadius:"12px"},n.createElement(s.xv,{typography:"h2",mb:"3"},m.title),n.createElement(s.xv,null,"Either there are no ",m.resource,' in the "',n.createElement(s.xv,{as:"span",bold:!0},r),"\" cluster, or your roles don't grant you access."))}},7067:(e,t,r)=>{r.d(t,{Ob:()=>p,OX:()=>i,u4:()=>u,E2:()=>d});var n=r(917),o=r(7849),s=r(135);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const i=(0,n.ZP)(o.kC)(["flex-shrink:0;border-bottom:1px solid ",";height:56px;margin-left:-40px;margin-right:-40px;padding-left:40px;padding-right:40px;"],(e=>e.theme.colors.primary.main));i.defaultProps={alignItems:"center",mb:4};const u=(0,n.ZP)(o.xv)(["white-space:nowrap;"]);u.defaultProps=c(c({},o.xv.defaultProps),{},{typography:"h3"});const p=(0,n.ZP)(o.kC)(["width:100%;height:100%;flex-direction:column;::after{content:' ';padding-bottom:24px;}"]);p.defaultProps={theme:s.Z,px:6},n.ZP.div(["position:absolute;width:100%;height:100%;display:flex;"]),n.ZP.div(["display:flex;flex-direction:column;width:100%;"]);const d=n.ZP.button(["color:",";cursor:pointer;display:inline-flex;font-size:14px;padding:12px 40px;position:relative;text-decoration:none;font-weight:500;&:hover{background:",";}&.active{color:",";}&.active:after{background-color:",";content:'';position:absolute;bottom:0;left:0;width:100%;height:4px;}"],(e=>e.theme.colors.text.secondary),(e=>e.active?e.theme.colors.primary.light:"rgba(255, 255, 255, .06)"),(e=>e.theme.colors.light),(e=>e.theme.colors.accent))},3228:(e,t,r)=>{r.d(t,{ES:()=>a,Kp:()=>o,RB:()=>n,Sl:()=>s});const n=e=>{const t=document.createElement("a");t.setAttribute("href",`${e}`),t.setAttribute("target","_blank"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)};async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TextEncoder;const r=t.encode(e),n=await crypto.subtle.digest("SHA-256",r),o=Array.from(new Uint8Array(n)),s=o.map((e=>e.toString(16).padStart(2,"0"))).join("");return s}function s(e){let{authType:t,clusterId:r,username:n,accessRequestId:o}=e;const{hostname:s,port:a}=window.location;return`tsh login --proxy=${s}:${a||"443"} ${"local"===t?`--auth=${t} --user=${n} `:""}${r}${o?` --request-id=${o}`:""}`}function a(e,t){return e&&t?e.filter((e=>!t.includes(e))):[]}},6828:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(4517),o=r(2784),s=r(7278);function a(){var e;const t=(0,o.useRef)({clusterId:s.Z.proxyCluster,hasClusterUrl:!1,isLeafCluster:!1}),r=(0,n.$B)(s.Z.routes.cluster),a=null==r||null===(e=r.params)||void 0===e?void 0:e.clusterId;return a&&(t.current.clusterId=a,t.current.isLeafCluster=a!==s.Z.proxyCluster),t.current.hasClusterUrl=!!a,t.current}},2398:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(2784),o=r(3665);function s(){const e=n.useContext(o.U);if(!e)throw new Error("Unable to retrieve Teleport Context");return window.teleContext=e}}}]);