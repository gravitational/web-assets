"use strict";(self.webpackChunk_gravitational_teleport=self.webpackChunk_gravitational_teleport||[]).push([[202],{8570:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var n=r(2784),a=r(7849),s=r(8851),c=r(4517),o=r(4696),u=r(3022),i=r(1392);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){return"failed"===e.status?n.createElement(s.JK,{message:e.statusText}):n.createElement(a.kC,{height:"180px",justifyContent:"center",alignItems:"center",flex:"1"},n.createElement(a.z$,null))}const f=function(){const e=function(){const e=(0,c.UO)(),{attempt:t,setAttempt:r}=(0,o.Z)("processing");return n.useEffect((()=>{(function(e){const t=window.location,r=t.port?":"+t.port:"",n=(0,i.r)("state",t.search),a=(0,i.r)("awsrole",t.search),s=(0,i.r)("path",t.search);return n?(a&&(e.arn=a),u.Z.createAppSession(e).then((e=>{const t=new URL(`https://${e.fqdn}${r}/x-teleport-auth`);return t.searchParams.set("state",n),t.hash=`#value=${e.value}`,s&&t.searchParams.set("path",s),t.toString()}))):u.Z.getAppFqdn(e).then((t=>{const n=new URL(`https://${t.fqdn}${r}/x-teleport-auth`);return e.clusterId&&n.searchParams.set("cluster",e.clusterId),e.publicAddr&&n.searchParams.set("addr",e.publicAddr),e.arn&&n.searchParams.set("awsrole",decodeURIComponent(e.arn)),s&&n.searchParams.set("path",s),n.toString()}))})(e).then((e=>{window.location.replace(e)})).catch((e=>{r({status:"failed",statusText:e.message})}))}),[]),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t)}();return n.createElement(h,e)}}}]);