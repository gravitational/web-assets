"use strict";(self.webpackChunk_gravitational_teleport=self.webpackChunk_gravitational_teleport||[]).push([[55],{3159:(e,t,r)=>{r.r(t),r.d(t,{default:()=>$});var n=r(2784),a=r(7849),s=r(2398),o=r(7067),l=r(5769),c=r(2499),i=r(2479),p=r(917),u=r(3652),m=r(9488),d=r(3757),h=r(8388),f=r(2760),g=r(7278);function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class y extends n.Component{constructor(){super(...arguments),b(this,"anchorEl",n.createRef()),b(this,"state",{open:!1,anchorEl:null}),b(this,"onOpen",(()=>{this.setState({open:!0})})),b(this,"onClose",(()=>{this.setState({open:!1})}))}render(){const{open:e}=this.state,{awsRoles:t,fqdn:r,clusterId:s,publicAddr:o}=this.props;return n.createElement(n.Fragment,null,n.createElement(a.ku,{width:"88px",size:"small",setRef:e=>this.anchorEl=e,onClick:this.onOpen},"LAUNCH",n.createElement(d.E_,{ml:1,fontSize:2,color:"text.secondary"})),n.createElement(f.ZP,{menuListCss:()=>({overflow:"auto",minWidth:"180px"}),transformOrigin:{vertical:"top",horizontal:"right"},anchorOrigin:{vertical:"center",horizontal:"right"},getContentAnchorEl:null,anchorEl:this.anchorEl,open:e,onClose:this.onClose},n.createElement(x,{awsRoles:t,fqdn:r,clusterId:s,publicAddr:o,closeMenu:this.onClose})))}}function x(e){let{awsRoles:t,fqdn:r,clusterId:s,publicAddr:o,closeMenu:l}=e;const c=t.map(((e,t)=>{const{display:c,arn:i}=e,p=g.Z.getAppLauncherRoute({fqdn:r,clusterId:s,publicAddr:o,arn:i});return n.createElement(E,{as:"a",key:t,px:2,mx:2,href:p,target:"_blank",title:c,onClick:l},n.createElement(a.xv,{style:{maxWidth:"25ch"}},c))}));return n.createElement(n.Fragment,null,n.createElement(a.xv,{px:"2",fontSize:"11px",mb:"2",color:"grey.400",bg:"subtle"},"Select IAM Role"),c.length?c:n.createElement(a.xv,{px:2,m:2,color:"text.disabled"},"No roles found"))}const E=(0,p.ZP)(f.sN)((e=>{let{theme:t}=e;return`\n  color: ${t.colors.grey[400]};\n  font-size: 12px;\n  border-bottom: 1px solid ${t.colors.subtle};\n  min-height: 32px;\n  &:hover {\n    color: ${t.colors.link};\n  }\n\n  :last-child {\n    border-bottom: none;\n    margin-bottom: 8px;\n  }\n`})),v=y;function C(e){let{publicAddr:t}=e;return n.createElement(u.bL,null,"https://",t)}function O(e){let{name:t,awsConsole:r}=e;return n.createElement(u.bL,{style:{userSelect:"none"}},n.createElement(a.kC,{height:"32px",width:"32px",bg:r?m.$y[700]:S(t),borderRadius:"100%",justifyContent:"center",alignItems:"center"},r?n.createElement(d.qHJ,{fontSize:6}):n.createElement(a.xv,{fontSize:3,bold:!0,caps:!0},t[0])))}function P(e){let{launchUrl:t,awsConsole:r,awsRoles:s,fqdn:o,clusterId:l,publicAddr:c}=e;const i=r?n.createElement(v,{awsRoles:s,fqdn:o,clusterId:l,publicAddr:c}):n.createElement(a.ku,{as:"a",width:"88px",size:"small",target:"_blank",href:t,rel:"noreferrer"},"LAUNCH");return n.createElement(u.bL,{align:"right"},i)}function S(e){let t=0;for(let r=0;r<e.length;r++)t+=e.charCodeAt(r);return[m.iQ[700],m.$C[700],m.sl[700],m.iN[700],m.ek[700],m.$y[700],m.P_[700],m.Q6[700],m.bK[700],m.BU[700]][t%10]}const w=(0,p.ZP)(u.ZP)(["& > tbody > tr > td{vertical-align:middle;}"]),k=function(e){const{apps:t=[],pageSize:r,totalCount:a,fetchNext:s,fetchPrev:o,fetchStatus:l,from:c,to:i,params:p,setParams:m,startKeys:d,setSort:f,pathname:g,replaceHistory:b,onLabelClick:y}=e;return n.createElement(w,{data:t,columns:[{altKey:"app-icon",render:O},{key:"name",headerText:"Name",isSortable:!0},{key:"description",headerText:"Description",isSortable:!0},{key:"publicAddr",headerText:"Address",render:C},{key:"labels",headerText:"Labels",render:e=>{let{labels:t}=e;return n.createElement(u.aW,{labels:t,onClick:y})}},{altKey:"launch-btn",render:P}],emptyText:"No Applications Found",pagination:{pageSize:r},fetching:{onFetchNext:s,onFetchPrev:o,fetchStatus:l},serversideProps:{sort:p.sort,setSort:f,startKeys:d,serversideSearchPanel:n.createElement(h.Z,{from:c,to:i,count:a,params:p,setParams:m,pathname:g,replaceHistory:b})},isSearchable:!0})};var A=r(4517),j=r(4696),Z=r(1392),K=r(321),z=r(6828),L=r(7773);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e){const{clusterId:t,isLeafCluster:r,canCreate:s,attempt:p,results:u,fetchNext:m,fetchPrev:d,from:h,to:f,pageSize:g,params:b,setParams:y,startKeys:x,setSort:E,pathname:v,replaceHistory:C,fetchStatus:O,isSearchEmpty:P,onLabelClick:S}=e,w=0===u.apps.length&&P;return n.createElement(o.Ob,null,n.createElement(o.OX,{alignItems:"center",justifyContent:"space-between"},n.createElement(o.u4,null,"Applications"),"success"===p.status&&!w&&n.createElement(i.Z,{agent:"application",beginsWithVowel:!0,isLeafCluster:r,canCreate:s})),"processing"===p.status&&n.createElement(a.xu,{textAlign:"center",m:10},n.createElement(a.z$,null)),"failed"===p.status&&n.createElement(c.Z,{message:p.statusText}),"processing"!==p.status&&!w&&n.createElement(k,{apps:u.apps,fetchNext:m,fetchPrev:d,fetchStatus:O,from:h,to:f,totalCount:u.totalCount,pageSize:g,params:b,setParams:y,startKeys:x,setSort:E,pathname:v,replaceHistory:C,onLabelClick:S}),"success"===p.status&&w&&n.createElement(l.Z,{clusterId:t,canCreate:s&&!r,emptyStateInfo:R}))}const R={title:"Add your first application to Teleport",byline:"Teleport Application Access provides secure access to internal applications.",docsURL:"https://goteleport.com/docs/application-access/getting-started/",resourceType:"application",readOnly:{title:"No Applications Found",resource:"applications"}},$=function(){const e=function(e){const t=e.storeUser.getTokenAccess().create,{search:r,pathname:a}=(0,A.TH)(),[s,o]=(0,n.useState)([]),{clusterId:l,isLeafCluster:c}=(0,z.Z)(),{attempt:i,setAttempt:p}=(0,j.Z)("processing"),u=e.isEnterprise,[m,d]=(0,n.useState)(""),[h,f]=(0,n.useState)(T({sort:{fieldName:"name",dir:"ASC"}},(0,K.Z)(r))),[g,b]=(0,n.useState)({apps:[],startKey:"",totalCount:0}),y=!(null!=h&&h.query||null!=h&&h.search),x=g.totalCount>0?15*(s.length-2)+1:0,E=g.totalCount>0?x+g.apps.length-1:0;function v(e){Z.Z.replace(e)}return(0,n.useEffect)((()=>{p({status:"processing"}),e.appService.fetchApps(l,T(T({},h),{},{limit:15})).then((e=>{b({apps:e.agents,startKey:e.startKey,totalCount:e.totalCount}),d(e.startKey?"":"disabled"),o(["",e.startKey]),p({status:"success"})})).catch((e=>{p({status:"failed",statusText:e.message}),b(T(T({},g),{},{apps:[],totalCount:0})),o([""])}))}),[l,r]),{clusterId:l,isLeafCluster:c,isEnterprise:u,canCreate:t,attempt:i,results:g,fetchNext:()=>{d("loading"),e.appService.fetchApps(l,T(T({},h),{},{limit:15,startKey:g.startKey})).then((e=>{b(T(T({},g),{},{apps:e.agents,startKey:e.startKey})),d(e.startKey?"":"disabled"),o([...s,e.startKey])})).catch((e=>{p({status:"failed",statusText:e.message})}))},fetchPrev:()=>{d("loading"),e.appService.fetchApps(l,T(T({},h),{},{limit:15,startKey:s[s.length-3]})).then((e=>{const t=s;t.pop(),o(t),b(T(T({},g),{},{apps:e.agents,startKey:e.startKey})),d("")})).catch((e=>{p({status:"failed",statusText:e.message})}))},pageSize:15,from:x,to:E,params:h,setParams:f,startKeys:s,setSort:function(e){f(T(T({},h),{},{sort:e}))},pathname:a,replaceHistory:v,fetchStatus:m,isSearchEmpty:y,onLabelClick:e=>(0,L.Z)(e,h,f,a,v)}}((0,s.Z)());return n.createElement(N,e)}},2479:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(2784),a=r(7933),s=r(7849),o=r(7278);const l=function(e){const{canCreate:t,isLeafCluster:r,onClick:l,agent:c,beginsWithVowel:i}=e,p=r||!t;let u="";return t||(u=`You do not have access to add ${i?"an":"a"} ${c}`),r&&(u=`Adding ${i?"an":"a"} ${c} to a leaf cluster is not supported`),n.createElement(a.rU,{to:{pathname:`${o.Z.routes.root}/discover`,state:{entity:c}},style:{textDecoration:"none"}},n.createElement(s.DF,{title:u,disabled:p,width:"240px",onClick:l},"Add ",c))}},5769:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(2784),a=r(7933),s=r(7849),o=r(9049),l=r(7278);const c=r.p+"assets/img/img-b7a4b8.png",i=r.p+"assets/img/img-6693d4.png",p=r.p+"assets/img/img-7ba430.png",u=r.p+"assets/img/img-73fbbf.png";function m(e){return{application:c,database:i,desktop:p,kubernetes:u,server:u}[e]}const d=function(e){const{canCreate:t,clusterId:r,emptyStateInfo:c}=e,{byline:i,docsURL:p,resourceType:u,readOnly:d,title:h}=c;return t?n.createElement(s.xu,{p:8,pt:5,as:s.kC,width:"100%",mx:"auto",alignItems:"center",justifyContent:"center"},n.createElement(s.xu,{maxWidth:600},n.createElement(s.xu,{mb:4,textAlign:"center"},n.createElement(o.Z,{src:m(u),ml:"auto",mr:"auto",mb:4,height:"160px"}),n.createElement(s.xv,{typography:"h5",mb:2,fontWeight:700,fontSize:24},h),n.createElement(s.xv,{fontWeight:400,fontSize:14,style:{opacity:"0.6"}},i)),n.createElement(s.xu,{textAlign:"center"},n.createElement(a.rU,{to:{pathname:`${l.Z.routes.root}/discover`,state:{entity:u}},style:{textDecoration:"none"}},n.createElement(s.DF,{width:"224px"},"Add ",u)),n.createElement(s.JU,{size:"medium",as:"a",href:p,target:"_blank",width:"224px",ml:4,rel:"noreferrer"},"View Documentation")))):n.createElement(s.xu,{p:8,mx:"auto",maxWidth:"664px",textAlign:"center",color:"text.primary",borderRadius:"12px"},n.createElement(s.xv,{typography:"h2",mb:"3"},d.title),n.createElement(s.xv,null,"Either there are no ",d.resource,' in the "',n.createElement(s.xv,{as:"span",bold:!0},r),"\" cluster, or your roles don't grant you access."))}},7067:(e,t,r)=>{r.d(t,{Ob:()=>u,OX:()=>i,u4:()=>p,E2:()=>m});var n=r(917),a=r(7849),s=r(135);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const i=(0,n.ZP)(a.kC)(["flex-shrink:0;border-bottom:1px solid ",";height:56px;margin-left:-40px;margin-right:-40px;padding-left:40px;padding-right:40px;"],(e=>e.theme.colors.primary.main));i.defaultProps={alignItems:"center",mb:4};const p=(0,n.ZP)(a.xv)(["white-space:nowrap;"]);p.defaultProps=l(l({},a.xv.defaultProps),{},{typography:"h3"});const u=(0,n.ZP)(a.kC)(["width:100%;height:100%;flex-direction:column;::after{content:' ';padding-bottom:24px;}"]);u.defaultProps={theme:s.Z,px:6},n.ZP.div(["position:absolute;width:100%;height:100%;display:flex;"]),n.ZP.div(["display:flex;flex-direction:column;width:100%;"]);const m=n.ZP.button(["color:",";cursor:pointer;display:inline-flex;font-size:14px;padding:12px 40px;position:relative;text-decoration:none;font-weight:500;&:hover{background:",";}&.active{color:",";}&.active:after{background-color:",";content:'';position:absolute;bottom:0;left:0;width:100%;height:4px;}"],(e=>e.theme.colors.text.secondary),(e=>e.active?e.theme.colors.primary.light:"rgba(255, 255, 255, .06)"),(e=>e.theme.colors.light),(e=>e.theme.colors.accent))}}]);