"use strict";(self.webpackChunk_gravitational_teleport=self.webpackChunk_gravitational_teleport||[]).push([[23],{369:(e,t,n)=>{n.d(t,{cZ:()=>a.cZ,cN:()=>a.cN,fK:()=>a.fK,$N:()=>a.$N,ZP:()=>o});var r=n(2784),a=n(9161);const o=function(e){const{children:t,open:n,onClose:o,dialogCss:l}=e;return r.createElement(a.ZP,{dialogCss:l,disableEscapeKeyDown:!1,onClose:o,open:n},t)}},5070:(e,t,n)=>{function r(e){return navigator.clipboard.writeText(e).catch((e=>{window.prompt("Cannot copy to clipboard. Use ctrl/cmd + c",e)}))}n.d(t,{Z:()=>r})},3388:(e,t,n)=>{function r(e){let t,n;window.getSelection&&document.createRange&&(n=window.getSelection(),t=document.createRange(),t.selectNodeContents(e),n.removeAllRanges(),n.addRange(t))}n.d(t,{Z:()=>r})},1271:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(917),a=n(2784),o=n(1218),l=n(8197),i=n(7038);const s=["label","labelTip","value","options","onChange","placeholder","maxMenuHeight","isClearable","isMulti","menuPosition","rule","isSearchable","isSimpleValue","autoFocus","isDisabled"];function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}const u=()=>()=>({valid:!0}),m=e=>{let{text:t}=e;return a.createElement(d,null,` - ${t}`)};var d=(0,r.ZP)("span")({fontWeight:"normal",textTransform:"none"});const p=function(e){let{label:t,labelTip:n,value:r,options:d,onChange:p,placeholder:g,maxMenuHeight:b,isClearable:h,isMulti:E,menuPosition:f,rule:y=u,isSearchable:x=!1,isSimpleValue:I=!1,autoFocus:A=!1,isDisabled:C=!1}=e,v=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,s);const{valid:M,message:w}=(0,l.kQ)(y(r)),D=Boolean(!M),S=D?w:t;return a.createElement(o.xu,c({mb:"4"},v),t&&a.createElement(o.SO,{htmlFor:"select",hasError:D},S,n&&a.createElement(m,{text:n})),a.createElement(i.ZP,{inputId:"select",menuPosition:f,hasError:D,isSimpleValue:I,isSearchable:x,isClearable:h,value:r,onChange:p,options:d,maxMenuHeight:b,placeholder:g,isMulti:E,autoFocus:A,isDisabled:C}))}},4221:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(2784),a=n(8069),o=n.n(a);n(8170),n(8074),n(6110),n(997);const l=n(917).ZP.div(["overflow:hidden;border-radius:4px;flex:1;display:flex;position:relative;border:none;background:",";.ace-monokai{background:",";}.ace-monokai .ace_gutter,.ace-monokai .ace_gutter-cell{color:rgba(255,255,255,0.56);background:",";}> .ace_editor{position:absolute;top:8px;right:0px;bottom:0px;left:0px;}"],(e=>e.theme.colors.bgTerminal),(e=>e.theme.colors.bgTerminal),(e=>e.theme.colors.bgTerminal)),{UndoManager:i}=o().require("ace/undomanager");class s extends r.Component{constructor(){var e,t;super(...arguments),t=()=>{const e=this.editor.session.getUndoManager().isClean();this.props.onDirty&&this.props.onDirty(!e);const t=this.editor.session.getValue();this.props.onChange&&this.props.onChange(t)},(e="onChange")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}getData(){return this.sessions.map((e=>e.getValue()))}componentDidUpdate(e){e.activeIndex!==this.props.activeIndex&&this.setActiveSession(this.props.activeIndex),this.editor.resize()}createSession(e){let{content:t,type:n,tabSize:r=2}=e;const a="json"===n?"ace/mode/json":"ace/mode/yaml";let l=new(o().EditSession)(t),s=new i;return s.markClean(),l.setUndoManager(s),l.setUseWrapMode(!1),l.setOptions({tabSize:r,useSoftTabs:!0,useWorker:!1}),l.setMode(a),l}setActiveSession(e){let t=this.sessions[e];t||(t=this.createSession({content:""})),this.editor.setSession(t),this.editor.focus()}initSessions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.isDirty=!1,this.sessions=e.map((e=>this.createSession(e))),this.setActiveSession(0)}componentDidMount(){const{data:e,readOnly:t,theme:n="ace/theme/monokai"}=this.props;this.editor=o().edit(this.ace_viewer),this.editor.setFadeFoldWidgets(!0),this.editor.setWrapBehavioursEnabled(!0),this.editor.setHighlightActiveLine(!1),this.editor.setShowInvisibles(!1),this.editor.renderer.setShowGutter(!1),this.editor.renderer.setShowPrintMargin(!1),this.editor.renderer.setShowGutter(!0),this.editor.on("input",this.onChange),this.editor.setReadOnly(t),this.editor.setTheme(n),this.initSessions(e),this.editor.focus()}componentWillUnmount(){this.editor.destroy(),this.editor=null,this.session=null}render(){return r.createElement(l,null,r.createElement("div",{ref:e=>this.ace_viewer=e}))}}const c=s},2297:(e,t,n)=>{n.r(t),n.d(t,{default:()=>vi});var r=n(2784),a=n(917),o=n(1218),l=n(9124),i=n(4517),s=n(6735),c=n(2545),u=n(7067),m=n(9182),d=n(7278),p=n(5849),g=n(3298),b=n(3757),h=n(161);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){let t=0;for(const n of e)n.views?t+=x(n.views):t+=1;return t}function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=[];for(const r of e){const e=f(f({},r),{},{index:t,parent});r.views?(e.views=I(r.views,t),t+=x(r.views)):t+=1,n.push(e)}return n}function A(e,t){for(const n of e){if(n.views){const e=A(n.views,t);if(e)return e}if(t===n.index)return n}}function C(e,t){for(const n of e){if(n.index===t)return!0;if(n.views&&C(n.views,t))return!0}return!1}function v(e){if(e.view.hide)return null;let t,n=e.currentStep===e.view.index;e.view.views&&(t=r.createElement(o.xu,{ml:2},r.createElement(j,{views:e.view.views,currentStep:e.currentStep})),n||(n=C(e.view.views,e.currentStep)));const a=e.currentStep>e.view.index;return r.createElement(N,{active:a||n},r.createElement(M,null,function(e,t){return t?r.createElement(D,null):e?r.createElement(S,null):r.createElement(w,null)}(a,n),e.view.title),t)}const M=a.ZP.div(["display:flex;align-items:center;"]),w=a.ZP.span(["height:14px;width:14px;border:1px solid #9b9b9b;border-radius:50%;margin-right:8px;display:flex;align-items:center;justify-content:center;"]),D=(0,a.ZP)(w)(["border-color:",";background:",";:before{content:'';height:8px;width:8px;border-radius:50%;border:2px solid ",";}"],(e=>e.theme.colors.secondary.main),(e=>e.theme.colors.secondary.main),(e=>e.theme.colors.primary.main)),S=(0,a.ZP)(w)(["border-color:",";background:",";:before{content:'✓';}"],(e=>e.theme.colors.secondary.main),(e=>e.theme.colors.secondary.main)),N=(0,a.ZP)(o.xv)(["display:flex;flex-direction:column;color:",";margin-bottom:8px;"],(e=>e.active?"inherit":e.theme.colors.text.secondary));function j(e){const t=e.views.map(((t,n)=>r.createElement(v,{key:n,view:t,currentStep:e.currentStep})));return r.createElement(o.xu,{style:{marginLeft:7},mt:2},t)}const k=(0,a.ZP)(h.JL)(["min-width:var(--sidebar-width);width:var(--sidebar-width);"]),T=(0,a.ZP)(h.VY)(["padding:0 20px;"]);function O(e){let t;return e.views&&(t=r.createElement(j,{views:e.views,currentStep:e.currentStep})),r.createElement(k,null,r.createElement(h.TR,null),r.createElement(T,null,r.createElement(P,{border:"1px solid rgba(255,255,255,0.1);",borderRadius:"8px",p:3},r.createElement(o.kC,{alignItems:"center"},r.createElement(o.kC,{borderRadius:5,alignItems:"center",justifyContent:"center",bg:"secondary.main",height:"30px",width:"30px",mr:2},e.selectedResource?e.selectedResource.icon:r.createElement(b.xFH,null)),r.createElement(o.xv,{bold:!0},"Add New Resource")),r.createElement(o.xu,{mt:3},t))))}var P=(0,a.ZP)(o.xu)({backgroundColor:"rgba(255,255,255,0.02);"});const z=a.ZP.div(["position:relative;"]),Z=a.ZP.label(["cursor:pointer;display:flex;justify-content:center;padding:10px;width:","%;z-index:1;"],(e=>100/e.itemCount)),L=a.ZP.input(["display:none;"]),U=a.ZP.div(["background-color:#512fc9;border-radius:",";box-shadow:0px 2px 6px rgba(12,12,14,0.1);height:",";left:calc(","% + 8px);margin:",";position:absolute;top:0;transition:all 0.3s ease;width:calc(","% - 16px);"],(e=>"square"===e.appearance?"8px":"60px"),(e=>"xlarge"===e.size?"56px":"40px"),(e=>100/e.itemCount*e.activeIndex),(e=>"xlarge"===e.size?"12px 12px 12px 0":"4px 4px 4px 0"),(e=>100/e.itemCount)),R=a.ZP.nav(["align-items:center;background-color:rgba(255,255,255,0.05);border-radius:",";display:flex;height:",";justify-content:space-around;"],(e=>"square"===e.appearance?"8px":"60px"),(e=>"xlarge"===e.size?"80px":"47px")),Q=function(e){let{appearance:t="square",initialSelected:n=0,name:a="slide-tab",onChange:o,size:l="xlarge",tabs:i}=e;const[s,c]=(0,r.useState)(n);return(0,r.useEffect)((()=>{o(s)}),[s]),r.createElement(z,null,r.createElement(R,{role:"tablist",appearance:t,size:l},i.map(((e,t)=>{const n="string"==typeof e,o=n?e:e.name,l=n?e:e.component;return r.createElement(Z,{role:"tab",htmlFor:`${a}-${o}`,onClick:()=>c(t),itemCount:i.length,key:`${o}-${t}`},l,r.createElement(L,{type:"radio",name:a,id:`${a}-${o}`}))}))),r.createElement(U,{itemCount:i.length,activeIndex:s,appearance:t,size:l}))};var Y=n(9161),G=n(2398);function B(e){return r.createElement(W,{ml:"4",typography:"h5",key:e.title,active:e.active,onClick:e.onClick},r.createElement(b.ZPm,{as:e.Icon,mr:"2"}),e.title)}const W=(0,a.ZP)(o.xv)(["align-items:center;display:flex;padding:4px 8px;cursor:pointer;border-bottom:4px solid transparent;",""],(e=>{let{active:t,theme:n}=e;return t&&`\n    font-weight: 500;\n    border-bottom: 4px solid ${n.colors.accent};\n  `}));var F=n(1347);const H="https://get.gravitational.com/";function V(e,t,n){let r="linux-amd64";const a=n?"ent-":"";return"mac"===e?`${H}teleport-${a}${t}.pkg`:("linux32"===e&&(r="linux-386"),`${H}teleport-${a}v${t}-${r}-bin.tar.gz`)}const J=function(e){let{isEnterprise:t,version:n}=e;return r.createElement(o.xu,null,r.createElement(o.rU,{href:V("mac",n,t),target:"_blank",mr:"2"},"MacOS"),r.createElement(o.rU,{href:V("linux64",n,t),target:"_blank",mr:"2"},"Linux 64-bit"),r.createElement(o.rU,{href:V("linux32",n,t),target:"_blank"},"Linux 32-bit"))},K=`${d.Z.configDir}/app_config.yaml`,X=`teleport start --config=${K}`;function q(e,t){return`teleport configure --output=${K} --app-name=[example-app] --app-uri=http://localhost/ --roles=app --token=${e} --proxy=${t} --data-dir=${d.Z.configDir}`}const $=e=>{let{tshLoginCmd:t,host:n}=e;return r.createElement(r.Fragment,null,r.createElement(o.xu,{mb:4},r.createElement(o.xv,{bold:!0,as:"span"},"Step 2")," - Login to Teleport",r.createElement(F.Z,{mt:"2",text:t})),r.createElement(o.xu,{mb:4},r.createElement(o.xv,{bold:!0,as:"span"},"Step 3")," - Generate a join token",r.createElement(F.Z,{mt:"2",text:"tctl tokens add --type=app"})),r.createElement(o.xu,{mb:"4"},r.createElement(o.xv,{bold:!0,as:"span"},"Step 4")," - Configure your teleport agent",r.createElement(F.Z,{mt:"2",text:q("[generated-join-token]",n)})),r.createElement(o.xu,null,r.createElement(o.xv,{bold:!0,as:"span"},"Step 5")," - Start the Teleport agent with the generated configuration file",r.createElement(F.Z,{mt:"2",text:X})),r.createElement(o.xu,null,"* Note: For a self-hosted Teleport version, you may need to update DNS and obtain a TLS certificate for this application.\n            Learn more about application access ",r.createElement(o.rU,{href:"https://goteleport.com/docs/application-access/introduction/",target:"_blank"},"here"),"."))},_=e=>{let{token:t,host:n,createToken:a}=e;return r.createElement(r.Fragment,null,r.createElement(o.xu,{mb:4},r.createElement(o.xv,{bold:!0,as:"span"},"Step 2")," - Configure your teleport agent",r.createElement(o.xv,{mt:"1"},"The token will be valid for"," ",r.createElement(o.xv,{bold:!0,as:"span"},t.expiryText,".")),r.createElement(F.Z,{mt:"2",text:q(t.id,n)}),r.createElement(o.xu,null,r.createElement(o.ZP,{onClick:a},"Regenerate Token"))),r.createElement(o.xu,null,r.createElement(o.xv,{bold:!0,as:"span"},"Step 3")," - Start the Teleport agent with the configuration file",r.createElement(F.Z,{mt:"2",text:X})))},ee=function(e){let{isEnterprise:t,user:n,version:a,onClose:l,isAuthTypeLocal:i,token:s,createToken:c,attempt:u}=e;const{hostname:m,port:d}=window.document.location,p=`${m}:${d||"443"}`;let g=`tsh login --proxy=${p}`;return i&&(g=`${g} --auth=local --user=${n}`),"processing"===u.status?r.createElement(o.xu,{textAlign:"center"},r.createElement(o.z$,null)):r.createElement(r.Fragment,null,r.createElement(Y.cZ,{flex:"0 0 auto"},r.createElement(o.xu,{mb:4},r.createElement(o.xv,{bold:!0,as:"span"},"Step 1")," ","- Download Teleport package to your computer",r.createElement(J,{isEnterprise:t,version:a})),"failed"===u.status?r.createElement($,{host:p,tshLoginCmd:g}):r.createElement(_,{createToken:c,host:p,token:s})),r.createElement(Y.cN,null,r.createElement(o.PL,{onClick:l},"Close")))};var te=n(8197),ne=n(6933);const re=/^[-\w/:. ]+$/,ae=e=>()=>{if(!e)return{valid:!1,message:"Required"};try{new URL(e)}catch{return{valid:!1,message:"URL is invalid"}}return e.match(re)?{valid:!0}:{valid:!1,message:"Invalid app URI"}},oe=/^[a-z]([-a-z0-9]*[a-z0-9])?$/,le=e=>()=>e&&0!==e.length?e.length>63?{valid:!1,message:"Must be 63 chars or less"}:e.match(oe)?{valid:!0}:{valid:!1,message:"Invalid DNS sub-domain name"}:{valid:!1,message:"Required"},ie=(e,t,n)=>{const r=encodeURIComponent(n).replace(/'/g,"%27");return`sudo bash -c "$(curl -fsSL '${d.Z.baseUrl+d.Z.api.appNodeScriptPath.replace(":token",e).replace(":name",t).replace(":uri",r)}')"`},se=function(e){const{onClose:t,attempt:n,token:a}=e,[l,i]=r.useState(""),[s,c]=r.useState(""),[u,m]=r.useState("");function d(t){t.validate()&&e.onCreate(l,s)}function p(e){if(!e.validate())return;const t=ie(a.id,l,s);m(t)}function g(e,t){"Enter"===e.key&&(u?d(t):p(t))}return r.useEffect((()=>{if(l&&s){const e=ie(a.id,l,s);m(e)}}),[a]),r.createElement(te.ZP,null,(e=>{let{validator:m}=e;return r.createElement(r.Fragment,null,r.createElement(Y.cZ,{minHeight:"254px",flex:"0 0 auto"},r.createElement(o.kC,{alignItems:"center",flexDirection:"row"},r.createElement(ne.Z,{rule:le,label:"App Name",autoFocus:!0,value:l,placeholder:"jenkins",width:"320px",mr:"3",onKeyPress:e=>g(e,m),onChange:e=>i(e.target.value.toLowerCase())}),r.createElement(ne.Z,{rule:ae,label:"INTERNAL APPLICATION URL",width:"100%",value:s,placeholder:"https://localhost:4000",onKeyPress:e=>g(e,m),onChange:e=>c(e.target.value)})),!u&&r.createElement(o.xv,{mb:"3"},"Teleport can automatically set up application access. Provide the name and URL of your application to generate our auto-installer script.",r.createElement(o.xv,{mt:"2"},"The script will install the Teleport agent to provide secure access to your application.")),"failed"===n.status&&r.createElement(o.bZ,{kind:"danger",children:n.statusText}),u&&r.createElement(r.Fragment,null,r.createElement(o.xv,{mb:"3"},"Use the script below to add an application to your cluster."," ","The script will be valid for",r.createElement(o.xv,{bold:!0,as:"span"},` ${a.expiryText}`,"."),function(){const e=`https://${arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}.${window.location.host}`;return r.createElement(o.xv,null,"This app will be available on ","  ",r.createElement(o.rU,{target:"_blank",href:e},`${e}`))}(l)),r.createElement(F.Z,{text:u,mb:2}))),r.createElement(Y.cN,null,!u&&r.createElement(o.DF,{mr:"3",disabled:"processing"===n.status,onClick:()=>p(m)},"Generate Script"),u&&r.createElement(o.DF,{mr:"3",disabled:"processing"===n.status,onClick:()=>d(m)},"Regenerate"),r.createElement(o.PL,{disabled:"processing"===n.status,onClick:t},"Close")))}))};var ce=n(4696);function ue(){return ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}function me(e){let{user:t,onClose:n,createToken:a,isEnterprise:l,version:i,attempt:s,automatic:c,setAutomatic:u,isAuthTypeLocal:m,token:d}=e;return r.createElement(Y.ZP,{dialogCss:()=>({maxWidth:"600px",width:"100%",minHeight:"330px"}),disableEscapeKeyDown:!1,onClose:n,open:!0},r.createElement(o.kC,{flex:"1",flexDirection:"column"},r.createElement(o.kC,{alignItems:"center",justifyContent:"space-between",mb:"4"},r.createElement(Y.$N,{mr:"auto"},"Add Application"),l&&r.createElement(r.Fragment,null,r.createElement(B,{Icon:b.$8D,title:"Automatically",active:c,onClick:()=>u(!0)}),r.createElement(B,{Icon:b.Oz3,title:"Manually",active:!c,onClick:()=>u(!1)}))),c&&r.createElement(se,{onClose:n,onCreate:a,attempt:s,token:d}),!c&&r.createElement(ee,{isAuthTypeLocal:m,isEnterprise:l,onClose:n,user:t,version:i,createToken:a,attempt:s,token:d})))}const de=function(e){const t=function(e){const{attempt:t,run:n}=(0,ce.Z)(""),a=e.storeUser.state.username,o=e.storeUser.state.cluster.authVersion,l=!e.storeUser.isSso(),i=e.isEnterprise,[s,c]=(0,r.useState)(i),[u,m]=(0,r.useState)();function d(){return n((()=>e.joinTokenService.fetchJoinToken({roles:["App"]}).then(m)))}return(0,r.useEffect)((()=>{d()}),[]),{user:a,version:o,createToken:d,attempt:t,automatic:s,setAutomatic:c,isAuthTypeLocal:l,isEnterprise:i,token:u}}((0,G.Z)());return r.createElement(me,ue({},t,e))};var pe,ge;!function(e){e[e.AWS=0]="AWS",e[e.SelfHosted=1]="SelfHosted",e[e.GCP=2]="GCP"}(pe||(pe={})),function(e){e[e.PostgreSQL=0]="PostgreSQL",e[e.MySQL=1]="MySQL",e[e.SQLServer=2]="SQLServer",e[e.RedShift=3]="RedShift",e[e.Mongo=4]="Mongo",e[e.Redis=5]="Redis"}(ge||(ge={}));const be=[{location:pe.AWS,engine:ge.PostgreSQL,name:"AWS RDS PostgreSQL",popular:!0},{location:pe.SelfHosted,engine:ge.PostgreSQL,name:"Self-Hosted PostgreSQL",popular:!0},{location:pe.AWS,engine:ge.MySQL,name:"AWS RDS MySQL",popular:!1},{location:pe.AWS,engine:ge.SQLServer,name:"AWS RDS SQL Server",popular:!1},{location:pe.AWS,engine:ge.RedShift,name:"Redshift PostgresSQL",popular:!1},{location:pe.SelfHosted,engine:ge.Mongo,name:"Self-Hosted MongoDB",popular:!1},{location:pe.SelfHosted,engine:ge.MySQL,name:"Self-Hosted MySQL/MariaDB",popular:!1},{location:pe.SelfHosted,engine:ge.Redis,name:"Self-Hosted Redis",popular:!1},{location:pe.SelfHosted,engine:ge.SQLServer,name:"Self-hosted SQL Server",popular:!1},{location:pe.GCP,engine:ge.PostgreSQL,name:"Cloud PostgresSQL",popular:!1},{location:pe.GCP,engine:ge.MySQL,name:"Cloud MySQL/MariaDB",popular:!1},{location:pe.GCP,engine:ge.SQLServer,name:"Cloud SQL Server",popular:!1}];function he(e){switch(e){case ge.PostgreSQL:case ge.RedShift:return"postgres";case ge.MySQL:return"mysql";case ge.Mongo:return"mongodb";case ge.SQLServer:return"sqlserver";case ge.Redis:return"redis"}}var Ee=n(3228);function fe(){return fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fe.apply(this,arguments)}function ye(e){let{createJoinToken:t,attempt:n,token:a,authType:l,username:i,onClose:s,isEnterprise:c,version:u,selectedDb:m}=e;const{hostname:d,port:p}=window.document.location,g=`${d}:${p||"443"}`;return r.createElement(Y.ZP,{dialogCss:()=>({maxWidth:"600px",width:"100%"}),disableEscapeKeyDown:!1,onClose:s,open:!0},r.createElement(Y.fK,{mb:4},r.createElement(Y.$N,null,"Add ",m.name)),r.createElement(Y.cZ,null,"processing"===n.status&&r.createElement(o.xu,{textAlign:"center"},r.createElement(o.z$,null)),"failed"===n.status&&r.createElement(Ie,{loginCommand:(0,Ee.Sl)({authType:l,username:i}),addCommand:Ae(m,g,""),isEnterprise:c,version:u}),"success"===n.status&&r.createElement(xe,{command:Ae(m,g,a.id),expiry:a.expiryText,onRegenerateToken:t,isEnterprise:c,version:u})),"processing"!==n.status&&r.createElement(Y.cN,null,r.createElement(o.PL,{onClick:s},"Close")))}const xe=e=>{let{expiry:t,command:n,onRegenerateToken:a,isEnterprise:l,version:i}=e;return r.createElement(r.Fragment,null,r.createElement(o.xu,{mb:4},r.createElement(o.xv,{bold:!0,as:"span"},"Step 1")," - Download Teleport package to your computer ",r.createElement(J,{isEnterprise:l,version:i})),r.createElement(o.xu,{mb:2},r.createElement(o.xv,{bold:!0,as:"span"},"Step 2")," - Generate the Teleport config file",r.createElement(o.xv,{mt:"1"},"The token will be valid for"," ",r.createElement(o.xv,{bold:!0,as:"span"},t,".")),r.createElement(F.Z,{mt:"2",text:n}),r.createElement(o.ZP,{onClick:a},"Regenerate Token")),r.createElement(o.xu,{mb:4},r.createElement(o.xv,{bold:!0,as:"span"},"Step 3")," - Start the Teleport agent with the following parameters",r.createElement(F.Z,{mt:"2",text:"teleport start"})),r.createElement(o.xu,null,"Learn more about database access in our ",r.createElement(o.rU,{href:"https://goteleport.com/docs/database-access/",target:"_blank"},"documentation"),"."))},Ie=e=>{let{loginCommand:t,addCommand:n,isEnterprise:a,version:l}=e;return r.createElement(r.Fragment,null,r.createElement(o.xu,{mb:4},r.createElement(o.xv,{bold:!0,as:"span"},"Step 1")," - Download Teleport package to your computer ",r.createElement(J,{isEnterprise:a,version:l})),r.createElement(o.xu,{mb:4},r.createElement(o.xv,{bold:!0,as:"span"},"Step 2")," - Login to Teleport",r.createElement(F.Z,{mt:"2",text:t})),r.createElement(o.xu,{mb:4},r.createElement(o.xv,{bold:!0,as:"span"},"Step 3")," - Generate a join token",r.createElement(F.Z,{mt:"2",text:"tctl tokens add --type=db"})),r.createElement(o.xu,{mb:4},r.createElement(o.xv,{bold:!0,as:"span"},"Step 4")," - Generate the Teleport config file",r.createElement(F.Z,{mt:"2",text:n})),r.createElement(o.xu,{mb:4},r.createElement(o.xv,{bold:!0,as:"span"},"Step 5")," - Start the Teleport agent with the following parameters",r.createElement(F.Z,{mt:"2",text:"teleport start"})),r.createElement(o.xu,null,"Learn more about database access in our ",r.createElement(o.rU,{href:"https://goteleport.com/docs/database-access/",target:"_blank"},"documentation"),"."))},Ae=(e,t,n)=>{const r=he(e.engine);let a=`teleport db configure create --token=${n||"[generated-join-token]"} --proxy=${t} --name=[db-name] --protocol=${r} --uri=[uri] -o file`;switch("sqlserver"===r&&(a=`${a} --ad-keytab-file=/path/to/teleport.keytab --ad-domain=EXAMPLE.COM --ad-spn=MSSQLSvc/sqlserver.example.com:1433`),e.location){case pe.SelfHosted:return a;case pe.AWS:return e.engine===ge.RedShift?`${a} --aws-region=[region] --aws-redshift-cluster-id=[cluster-id]`:`${a} --aws-region=[region]`;case pe.GCP:return`${a} --ca-cert-file=[instance-ca-filepath] --gcp-project-id=[project-id] --gcp-instance-id=[instance-id]`;default:return"unknown type and protocol"}},Ce=function(e){const t=function(e){const{attempt:t,run:n}=(0,ce.Z)("processing"),[a,o]=(0,r.useState)();function l(){return n((()=>e.joinTokenService.fetchJoinToken({roles:["Db"]}).then(o)))}return(0,r.useEffect)((()=>{l()}),[]),{createJoinToken:l,attempt:t,token:a}}((0,G.Z)());return r.createElement(ye,fe({},t,e))};var ve=n(7933),Me=n(8227);const we=e=>{let{onProceed:t=null,proceedHref:n="",disableProceed:a=!1,lastStep:l=!1}=e;return r.createElement(o.xu,{mt:4},n&&r.createElement(o.DF,{size:"medium",as:"a",href:n,target:"_blank",width:"224px",mr:3,rel:"noreferrer"},"View Documentation"),t&&r.createElement(o.DF,{width:"165px",onClick:t,mr:3,disabled:a},l?"Finish":"Next"),r.createElement(Me.PL,{as:ve.OL,to:d.Z.routes.root,mt:3,width:"165px"},"Exit"))},De=(0,a.ZP)(o.oD)(["color:",";font-weight:normal;padding-left:0;font-size:inherit;min-height:auto;"],(e=>{let{theme:t}=e;return t.colors.link})),Se=e=>{let{children:t}=e;return r.createElement(o.xv,{my:1,fontSize:"18px",bold:!0},t)},Ne=e=>{let{children:t}=e;return r.createElement(o.xv,{mb:5},t)},je=e=>{let{children:t,onPrev:n}=e;return r.createElement(o.kC,{alignItems:"center"},r.createElement(o.Ei,{size:1,title:"Go Back",onClick:n,ml:-2},r.createElement(b.xhZ,{fontSize:"24px"})),r.createElement(o.xv,{my:1,fontSize:"18px",bold:!0},t))};var ke=n(1392);const Te=n.p+"assets/img/img-55ebd1.png";function Oe(e){let t;return e.agentMeta&&e.agentMeta.resourceName&&(t=`Resource [${e.agentMeta.resourceName}] has been successfully added to\n        this Teleport Cluster.`),r.createElement(Pe,{width:"600px",flexDirection:"column",alignItems:"center"},r.createElement(o.Ee,{width:"120px",height:"120px",src:Te}),r.createElement(o.xv,{mt:3,mb:2,typography:"h4",bold:!0},"Resource Successfully Added"),r.createElement(o.xv,{mb:3},t," You can start accessing this resource right away or add another resource."),r.createElement(o.kC,null,r.createElement(o.DF,{width:"270px",size:"large",onClick:()=>ke.Z.push(d.Z.routes.root,!0),mr:3},"Browse Existing Resources"),r.createElement(o.PL,{width:"270px",size:"large",onClick:()=>ke.Z.reload()},"Add Another Resource")))}var Pe=(0,a.ZP)(o.kC)(["margin:0 auto;text-align:center;"]);const ze=a.ZP.mark(["padding:2px 5px;border-radius:6px;background-color:",";color:inherit;"],(e=>e.light?"#d3d3d3":"rgb(255 255 255 / 17%)"));function Ze(e){return r.createElement(Be,null,r.createElement(o.xv,{typography:"h5"},"You are not able to ",e.action,". There are two possible reasons for this:"),r.createElement("ul",{style:{paddingLeft:28}},r.createElement("li",null,"Your Teleport Enterprise license does not include ",e.productName,". Reach out to your Teleport administrator to enable ",e.productName,"."),r.createElement("li",null,"You don’t have sufficient permissions to ",e.action,". Reach out to your Teleport administrator to request additional permissions.")))}var Le,Ue=n(4221);function Re(e){switch(e){case Le.Application:return"App";case Le.Database:return"Db";case Le.Desktop:return"WindowsDesktop";case Le.Kubernetes:return"Kube";case Le.Server:return"Node"}}function Qe(e){let t;return e.stepNumber&&(t=`Step ${e.stepNumber}: `),r.createElement(Ye,null,r.createElement(o.xv,{bold:!0},t,e.title),r.createElement(F.Z,{text:e.text,mt:2,mb:1,bash:e.isBash}))}!function(e){e[e.Application=0]="Application",e[e.Database=1]="Database",e[e.Desktop=2]="Desktop",e[e.Kubernetes=3]="Kubernetes",e[e.Server=4]="Server"}(Le||(Le={}));const Ye=a.ZP.div(["background:rgba(255,255,255,0.05);border-radius:8px;padding:16px;margin-bottom:12px;"]),Ge=(0,a.ZP)(o.xv)(["display:flex;align-items:center;.icon{margin-right:8px;}"]),Be=(0,a.ZP)(o.xu)(["width:100%;margin-top:32px;border-radius:8px;background-color:",";padding:24px;"],(e=>e.theme.colors.primary.light));var We=n(7097);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){Ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Je(e){let{labels:t=[],setLabels:n,disableBtns:a=!1,isLabelOptional:l=!1}=e;const i=(0,te.V$)(),s=(e,r,a)=>{const{value:o}=e.target,l=[...t];l[r]=He(He({},l[r]),{},{[a]:o}),n(l)};return r.createElement(r.Fragment,null,t.length>0&&r.createElement(o.kC,{mt:2},r.createElement(o.xu,{width:"170px",mr:"3"},"Key"," ",r.createElement(Ke,null,"(required field)")),r.createElement(o.xu,null,"Value"," ",r.createElement(Xe,null,"(required field)"))),r.createElement(o.xu,null,t.map(((e,c)=>r.createElement(o.xu,{mb:2,key:c},r.createElement(o.kC,{alignItems:"center"},r.createElement(ne.Z,{Input:!0,rule:(0,We.lp)("required"),autoFocus:!0,value:e.name,placeholder:"label key",width:"170px",mr:3,mb:0,onChange:e=>s(e,c,"name"),readonly:a||e.isFixed}),r.createElement(ne.Z,{rule:(0,We.lp)("required"),value:e.value,placeholder:"label value",width:"170px",mb:0,mr:2,onChange:e=>s(e,c,"value"),readonly:a||e.isFixed}),!e.isFixed&&r.createElement(qe,{size:1,title:"Remove Label",onClick:()=>function(e){if(!l&&1===t.length){const r=[...t];return r[e]={name:"",value:""},n(r),void i.validate()}const r=[...t];r.splice(e,1),n(r)}(c),disabled:a},r.createElement(b.rFk,null))))))),r.createElement($e,{onClick:function(){i.validate()&&(i.reset(),n([...t,{name:"",value:""}]))},disabled:a},r.createElement(_e,{className:"icon-add",disabled:a}),"Add New Label"))}var Ke=(0,a.ZP)("span")({fontSize:"12px",fontWeight:"lighter"}),Xe=(0,a.ZP)("span")({fontSize:"12px",fontWeight:"lighter"}),qe=(0,a.ZP)(o.Ei)(["&:disabled{opacity:0.65;pointer-events:none;}"]),$e=(0,a.ZP)(o.oD)(["padding-left:0px;&:disabled{.icon-add{opacity:0.35;}pointer-events:none;}"]),_e=(0,a.ZP)(b.mm_)(["font-weight:bold;letter-spacing:4px;margin-top:-2px;&:after{content:' ';}"]);const et="kind: role\nspec:\n  allow:\n    rules:\n    # Rule that allows users to create and update database.\n    - resources:\n      - db\n      verbs:\n      - create\n      - update\n";function tt(e){let{accessKind:t,traitKind:n,traitDesc:a}=e;switch(t){case"ssoUserAndNoTraits":return r.createElement(r.Fragment,null,r.createElement(rt,null,"You don’t have any ",n," ",a," defined.",r.createElement("br",null),"Please ask your Teleport administrator to update your role and add the required ",n," ",a,"."),r.createElement(nt,{traitKind:n,userAccessReadOnly:!0}));case"noAccessAndNoTraits":return r.createElement(r.Fragment,null,r.createElement(rt,null,"You don’t have ",n," access.",r.createElement("br",null),"Please ask your Teleport administrator to update your role:"),r.createElement(nt,{traitKind:n}));case"noAccessButHasTraits":return r.createElement(r.Fragment,null,r.createElement(rt,null,"You don't have permission to add new ",n," ",a,".",r.createElement("br",null),"If you don't see the ",n," ",a," that you require, please ask your Teleport administrator to update your role:"),r.createElement(nt,{traitKind:n}));case"ssoUserButHasTraits":return r.createElement(r.Fragment,null,r.createElement(rt,null,"SSO users are not able to add new ",n," ",a,".",r.createElement("br",null),"If you don't see the ",n," ",a," that you require, please ask your Teleport administrator to update your role:"),r.createElement(nt,{traitKind:n,userAccessReadOnly:!0}))}}function nt(e){let{traitKind:t,userAccessReadOnly:n}=e;switch(t){case"Kubernetes":return n?r.createElement(o.kC,{minHeight:"215px",mt:3},r.createElement(at,{content:"kind: role\nspec:\n  allow:\n    kubernetes_groups:\n    # Define Kubernetes groups for this role.\n    - kubeGroup1\n    - kubeGroup2\n    kubernetes_users:\n    # Define Kubernetes users for this role.\n    - kubeUser1\n    - kubeUser2\n"})):r.createElement(o.kC,{minHeight:"370px",mt:3},r.createElement(at,{content:"kind: role\nspec:\n  allow:\n    # Define Kubernetes groups for this role.\n    kubernetes_groups:\n    - '{{internal.kubernetes_groups}}'\n    - kubeGroup1\n    - kubeGroup2\n    # Define Kubernetes users for this role.\n    kubernetes_users:\n    - '{{internal.kubernetes_users}}'\n    - kubeUser1\n    - kubeUser2\n    rules:\n    # Rule that allows users to define their own Kubernetes users and groups.\n    - resources:\n      - user\n      verbs:\n      - update\n"}));case"OS":return n?r.createElement(o.kC,{minHeight:"150px",mt:3},r.createElement(at,{content:"kind: role\nspec:\n  allow:\n    # List of allowed SSH logins\n    logins:\n    - osUser1\n    - osUser2\n"})):r.createElement(o.kC,{minHeight:"245px",mt:3},r.createElement(at,{content:"kind: role\nspec:\n  allow:\n    # List of allowed SSH logins\n    logins:\n    - '{{internal.logins}}'\n    - osUser1\n    - osUser2\n    rules:\n    # Rule that allows users to define their own logins\n    - resources:\n      - user\n      verbs:\n      - update\n"}));case"Database":return n?r.createElement(o.kC,{minHeight:"210px",mt:3},r.createElement(at,{content:"kind: role\nspec:\n  allow:\n    # List of databases on the database server users can access\n    db_names:\n    - dbName1\n    - '*'\n    # List of database users allowed to open database connections with\n    db_users:\n    - dbUser1\n    - '*'\n"})):r.createElement(o.kC,{minHeight:"340px",mt:3},r.createElement(at,{content:"kind: role\nspec:\n  allow:\n    # List of databases on the database server users can access\n    db_names:\n    - '{{internal.db_names}}'\n    - dbName1\n    - '*'\n    # List of database users allowed to open database connections with\n    db_users:\n    - '{{internal.db_users}}'\n    - dbUser1\n    - '*'\n    rules:\n    # Rule that allows users to define their own Database names and users.\n    - resources:\n      - user\n      verbs:\n      - update\n"}));case"ConnDiag":return r.createElement(o.kC,{minHeight:"190px",mt:3},r.createElement(at,{content:"kind: role\nspec:\n  allow:\n    rules:\n    - resources:\n      - connection_diagnostic\n      verbs:\n      - create\n      - read\n      - update\n"}))}}const rt=e=>{let{children:t}=e;return r.createElement(o.xv,{mt:4,width:"100px"},t)},at=e=>{let{content:t}=e;return r.createElement(Ue.Z,{readOnly:!0,data:[{content:t,type:"yaml"}]})};function ot(e){let{attempt:t,diagnosis:n,canTestConnection:a,testConnection:l,stepNumber:i,stepDescription:s}=e;const c=!!n||"failed"===t.status;let u;return"processing"===t.status?u=r.createElement(Ge,null,r.createElement(b.r6F,{fontSize:4}),"Testing in-progress"):"failed"===t.status||n&&!n.success?u=r.createElement(Ge,null,r.createElement(b.v3j,{ml:1,color:"danger"}),"Testing failed"):"success"===t.status&&null!=n&&n.success&&(u=r.createElement(Ge,null,r.createElement(b.yGk,{ml:1,color:"success"}),"Testing complete")),r.createElement(it,{mb:5},r.createElement(o.xv,{bold:!0},"Step ",i),r.createElement(o.xv,{typography:"subtitle1",mb:3},s),r.createElement(o.kC,{alignItems:"center",mt:3},a?r.createElement(r.Fragment,null,r.createElement(o.PL,{width:"200px",onClick:l,disabled:"processing"===t.status},n?"Restart Test":"Test Connection"),r.createElement(o.xu,{ml:4},u)):r.createElement(o.xu,null,r.createElement(o.xv,null,"You don't have permission to test connection.",r.createElement("br",null),"Please ask your Teleport administrator to update your role and add the ",r.createElement(ze,null,"connection_diagnostic")," rule:"),r.createElement(nt,{traitKind:"ConnDiag"}))),c&&r.createElement(o.xu,{mt:3},"failed"===t.status&&`Encountered Error: ${t.statusText}`,"success"===t.status&&r.createElement(o.xu,null,n.traces.map(((e,t)=>"failed"===e.status?r.createElement(lt,{error:e.error,details:e.details,key:t}):"success"===e.status?r.createElement(ct,{key:t},r.createElement(b.yGk,{mr:1,color:"success"}),e.details):r.createElement(Ge,{key:t},r.createElement(b.HNF,{mr:1}),e.details))))))}const lt=e=>{let{details:t,error:n}=e;const[a,o]=(0,r.useState)(!1);return r.createElement(ut,null,r.createElement(b.liM,{mr:1,color:"danger"}),r.createElement("div",null,r.createElement("div",null,t),r.createElement("div",null,r.createElement(st,{onClick:()=>o((e=>!e))},a?"Hide":"Click for extra"," details"),a&&r.createElement("div",null,n))))},it=(0,a.ZP)(o.xu)(["max-width:800px;background-color:rgba(255,255,255,0.05);border-radius:8px;padding:20px;"]),st=(0,a.ZP)(o.oD)(["min-height:auto;padding:0;font-weight:inherit;text-decoration:underline;"]);var ct=(0,a.ZP)(Ge)({alignItems:"baseline"}),ut=(0,a.ZP)(Ge)({alignItems:"baseline"});function mt(e){const t=(0,G.Z)(),{attempt:n,run:a}=(0,ce.Z)(""),[o,l]=(0,r.useState)(),i=t.storeUser.getConnectionDiagnosticAccess(),s=i.create&&i.edit&&i.read,{username:c,authType:u}=t.storeUser.state;return{attempt:n,runConnectionDiagnostic:function(e){l(null),a((()=>t.agentService.createConnectionDiagnostic(e).then(l)))},diagnosis:o,nextStep:()=>e.nextStep(),prevStep:e.prevStep,canTestConnection:s,username:c,authType:u,clusterId:t.storeUser.getClusterId()}}function dt(e){let t;return e.disabled&&(t=r.createElement(Ze,{action:"add new Applications",productName:"Application Access"})),r.createElement(r.Fragment,null,t,r.createElement(we,{onProceed:()=>e.onProceed(),disableProceed:e.disabled}))}var pt=n(2944),gt=n(4998);n(1238),n(3665);const bt=r.createContext(null);function ht(e){const[t,n]=(0,r.useState)(null),[a,o]=(0,r.useState)(!1),[l,i]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(l&&l>Date.now()){o(!1);const e=window.setTimeout((()=>o(!0)),l-Date.now());return()=>clearTimeout(e)}}),[l]);const s=(0,r.useCallback)((()=>{i(Date.now()+e.timeout)}),[e.timeout]);return r.createElement(bt.Provider,{value:{joinToken:t,setJoinToken:n,timeout:l,startTimer:s,timedOut:a}},e.children)}let Et,ft;function yt(){ft=null}function xt(){return(0,r.useContext)(bt).joinToken}function It(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"token";const a=(0,G.Z)(),o=(0,r.useContext)(bt);function l(){return Et=new AbortController,ft={promise:a.joinTokenService.fetchJoinToken({roles:[Re(e)],method:n,suggestedAgentMatcherLabels:t},Et.signal).then((e=>{if(!e.internalResourceId)throw new Error("internal resource ID is required to discover the newly added resource, but none was provided");ft.response=e,o.setJoinToken(e),o.startTimer()})).catch((e=>{ft.error=e}))},ft}if((0,r.useEffect)((()=>()=>{var e;null===(e=Et)||void 0===e||e.abort(),yt()}),[]),ft){if(ft.error)throw ft.error;if(ft.response)return{joinToken:ft.response,reloadJoinToken:l,timedOut:o.timedOut,timeout:o.timeout};throw ft.promise}throw l().promise}function At(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;const o=(0,r.useRef)(new AbortController),[l,i]=(0,r.useState)(!1),[s,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null);return(0,r.useEffect)((()=>{n&&!l&&(m(null),c(!1),i(!0)),!n&&l&&i(!1)}),[e,n,l]),(0,r.useEffect)((()=>{if(l&&t>Date.now()){const e=window.setTimeout((()=>{c(!0)}),t-Date.now());return()=>clearTimeout(e)}}),[l,t]),(0,r.useEffect)((()=>{if(l){o.current=new AbortController;const t=window.setInterval((async()=>{try{const n=await e(o.current.signal);n&&(clearInterval(t),m(n))}catch{}}),a);return()=>{clearInterval(t),o.current.abort()}}}),[l,s,a,e]),{timedOut:s,result:u}}var Ct=n(4195);const vt=r.createContext(null);function Mt(e){const t=(0,G.Z)(),[n,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(null),[i,s]=(0,r.useState)(""),c=xt(),{timedOut:u,result:m}=At((n=>function(n){const r=t.storeUser.getClusterId();let a=`${Ct.E} ${c.internalResourceId}`;i&&(a=i);const o={search:a,limit:1};switch(e.resourceKind){case Le.Server:return t.nodeService.fetchNodes(r,o,n);case Le.Desktop:return t.desktopService.fetchDesktopServices(r,o,n);case Le.Kubernetes:return t.kubeService.fetchKubernetes(r,o,n);case Le.Database:return t.databaseService.fetchDatabases(r,o,n)}}(n).then((e=>e.agents.length?e.agents[0]:null))),o,n,e.interval);(0,r.useEffect)((()=>{n&&Date.now()>o&&a(!1)}),[n,o,u]);const d=(0,r.useCallback)((()=>{l(Date.now()+e.timeout),a(!0)}),[e.timeout]);return(0,r.useEffect)((()=>{m&&(l(null),a(!1))}),[m]),r.createElement(vt.Provider,{value:{active:n,start:d,result:m,timedOut:u,timeout:o,setAlternateSearchTerm:s}},e.children)}function wt(e){const t=(0,r.useContext)(vt);return(0,r.useEffect)((()=>{t.active||(t.start(),t.setAlternateSearchTerm(e))}),[]),t}function Dt(e){let{timeout:t,message:n="This script is valid for another",tailMessage:a=""}=e;const[,o]=(0,r.useState)(0);(0,r.useEffect)((()=>{const e=window.setInterval((()=>{Date.now()>=t&&clearInterval(e),o((e=>e+1))}),1e3);return()=>clearInterval(e)}),[t]);const{minutes:l,seconds:i}=function(e){if(e<0)return{minutes:0,seconds:0};return{minutes:Math.floor(e/6e4),seconds:Math.floor(e%6e4/1e3).toFixed(0).padStart(2,"0")}}(t-Date.now()),s=String(i).padStart(2,"0"),c=String(l).padStart(2,"0");return r.createElement("span",null,n," ",c,":",s,a)}const St=e=>{let{command:t,poll:n,pollingTimeout:a,header:l}=e;return r.createElement(Nt,{p:3,borderRadius:3,pollState:n.state},l||r.createElement(o.xv,{bold:!0},"Command"),r.createElement(o.xu,{mt:2,mb:1},r.createElement(F.r,{lines:[{text:t}]})),"polling"===n.state&&r.createElement(jt,null,r.createElement(b.r6F,{fontSize:4}),r.createElement(Dt,{timeout:a,message:`${n.customStateDesc||"Waiting for Teleport Service"}  |  `})),"success"===n.state&&r.createElement(Ge,null,r.createElement(b.yGk,{ml:1,color:"success"}),n.customStateDesc||"The Teleport Service successfully join this Teleport cluster"),"error"===n.state&&r.createElement(o.xu,null,r.createElement(Ge,null,r.createElement(b.v3j,{ml:1,color:"danger"}),n.error.customErrContent||"We could not detect the Teleport Service you were trying to add"),r.createElement(o.xv,{bold:!0,mt:4},"Possible reasons"),r.createElement(kt,null,n.error.reasonContents.map(((e,t)=>r.createElement("li",{key:t},e))))))},Nt=(0,a.ZP)(o.xu)(["max-width:800px;background-color:rgba(255,255,255,0.05);padding:",";border-radius:",";border:2px solid ",";"],(e=>`${e.theme.space[3]}px`),(e=>`${e.theme.space[2]}px`),(e=>{switch(e.pollState){case"error":return e.theme.colors.danger;case"success":return e.theme.colors.success;default:return"#2F3659"}}));var jt=(0,a.ZP)(Ge)(["white-space:pre;"]),kt=(0,a.ZP)("ul")(["margin-top:6px;margin-bottom:0;"]);function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(n),!0).forEach((function(t){Pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zt(e){const{joinToken:t,reloadJoinToken:n,timeout:a}=It(Le.Server),{timedOut:o,start:l,result:i}=wt();let s={state:"polling",customStateDesc:"Waiting for Teleport SSH Service"};return o?s={state:"error",error:{customErrContent:r.createElement(r.Fragment,null,"We could not detect the server you were trying to add."," ",r.createElement(De,{ml:1,onClick:function(){n(),l()}},"Generate a new command")),reasonContents:[r.createElement(r.Fragment,null,"The command was not run on the server you were trying to add"),r.createElement(r.Fragment,null,"The Teleport SSH Service could not join this Teleport cluster. Check the logs for errors by running ",r.createElement("br",null),r.createElement(ze,null,"journalctl status teleport"))]}}:i&&(s={state:"success",customStateDesc:"The server successfully joined this Teleport cluster"}),r.createElement(r.Fragment,null,r.createElement(Se,null,"Configure Resource"),r.createElement(Ne,null,"Install and configure the Teleport SSH Service.",r.createElement("br",null),"Run the following command on the server you want to add."),r.createElement(St,{command:(c=t.id,`sudo bash -c "$(curl -fsSL ${d.Z.getNodeScriptUrl(c)})"`),poll:s,pollingTimeout:a}),r.createElement(we,{onProceed:function(){e.updateAgentMeta(Ot(Ot({},e.agentMeta),{},{resourceName:i.hostname,node:i})),e.nextStep()},disableProceed:"success"!==s.state}));var c}const Zt=e=>{let{nextStep:t,pollState:n,children:a}=e;return r.createElement(r.Fragment,null,r.createElement(Se,null,"Configure Resource"),r.createElement(Ne,null,"Install and configure the Teleport SSH Service.",r.createElement("br",null),"Run the following command on the server you want to add."),r.createElement(Nt,{pollState:n},a),r.createElement(we,{onProceed:t,disableProceed:!n||"error"===n||"polling"===n}))};var Lt=n(7896),Ut=n(8777),Rt=n(6666),Qt=n(9249),Yt=n(7371),Gt=n(5754),Bt=n(1987),Wt=n(5058),Ft=(n(3528),n(8316),n(1997)),Ht=n(1774),Vt=(n(8951),n(8726),n(4486));function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Kt,Xt,qt,$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=String(e).toLowerCase(),r=String(t.value).toLowerCase(),a=String(t.label).toLowerCase();return r===n||a===n},_t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){(0,Rt.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allowCreateWhileLoading:!1,createOptionPosition:"last"},{formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,n){return!(!e||t.some((function(t){return $t(e,t)}))||n.some((function(t){return $t(e,t)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}}),en=(Kt=Ht.S,qt=Xt=function(e){(0,Gt.Z)(o,e);var t,n,a=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,Wt.Z)(t);if(n){var a=(0,Wt.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,Bt.Z)(this,e)});function o(e){var t;(0,Qt.Z)(this,o),(t=a.call(this,e)).select=void 0,t.onChange=function(e,n){var r=t.props,a=r.getNewOptionData,o=r.inputValue,l=r.isMulti,i=r.onChange,s=r.onCreateOption,c=r.value,u=r.name;if("select-option"!==n.action)return i(e,n);var m=t.state.newOption,d=Array.isArray(e)?e:[e];if(d[d.length-1]!==m)i(e,n);else if(s)s(o);else{var p=a(o,o),g={action:"create-option",name:u};i(l?[].concat((0,Ut.Z)((0,Ft.C)(c)),[p]):p,g)}};var n=e.options||[];return t.state={newOption:void 0,options:n},t}return(0,Yt.Z)(o,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.allowCreateWhileLoading,n=e.createOptionPosition,r=e.formatCreateLabel,a=e.getNewOptionData,o=e.inputValue,l=e.isLoading,i=e.isValidNewOption,s=e.value,c=e.options||[],u=this.state.newOption;u=i(o,(0,Ft.C)(s),c)?a(o,r(o)):void 0,this.setState({newOption:u,options:!t&&l||!u?c:"first"===n?[u].concat((0,Ut.Z)(c)):[].concat((0,Ut.Z)(c),[u])})}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"render",value:function(){var e=this,t=this.state.options;return r.createElement(Kt,(0,Lt.Z)({},this.props,{ref:function(t){e.select=t},options:t,onChange:this.onChange}))}}]),o}(r.Component),Xt.defaultProps=_t,qt);const tn=(0,Vt.m)(en);var nn=n(135);const rn=["isMulti","isClearable","isDisabled","autoFocus"];function an(){return an=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},an.apply(this,arguments)}function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){sn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const cn={multiValue:(e,t)=>t.data.isFixed?ln(ln({},e),{},{backgroundColor:"gray"}):e,multiValueLabel:(e,t)=>t.data.isFixed?ln(ln({},e),{},{color:nn.Z.colors.text.onDark,paddingRight:6}):t.isDisabled?ln(ln({},e),{},{paddingRight:6}):ln(ln({},e),{},{color:nn.Z.colors.text.onLight}),multiValueRemove:(e,t)=>t.data.isFixed||t.isDisabled?ln(ln({},e),{},{display:"none"}):ln(ln({},e),{},{cursor:"pointer",color:nn.Z.colors.text.onLight}),menuList:e=>ln(ln({},e),{},{color:nn.Z.colors.text.onLight})},un=e=>{let{isMulti:t=!0,isClearable:n=!0,isDisabled:a=!1,autoFocus:o=!1}=e,l=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,rn);return r.createElement(tn,an({className:"react-select",components:{DropdownIndicator:null},styles:cn},l,{isMulti:t,isClearable:n,isDisabled:a,autoFocus:o}))};function mn(e){let{attempt:t,fetchUserTraits:n,canEditUser:a,isSsoUser:l,hasTraits:i,traitKind:s,traitDescription:c,headerSubtitle:u,onProceed:m,children:d,infoContent:p}=e;const g=!l&&a;let h;switch(t.status){case"failed":h=r.createElement(r.Fragment,null,r.createElement(o.xv,{my:3},r.createElement(b.v3j,{ml:1,mr:2,color:"danger"}),"Encountered Error: ",t.statusText),r.createElement(De,{ml:1,onClick:n},"Retry"));break;case"processing":h=r.createElement(o.xu,{mt:4,textAlign:"center",height:"70px",width:"300px"},r.createElement(o.z$,{delay:"none"}));break;case"success":h=l&&!i?r.createElement(tt,{accessKind:"ssoUserAndNoTraits",traitKind:s,traitDesc:c}):g||i?r.createElement(r.Fragment,null,r.createElement(dn,null,d),!l&&!a&&r.createElement(tt,{accessKind:"noAccessButHasTraits",traitKind:s,traitDesc:c}),l&&r.createElement(tt,{accessKind:"ssoUserButHasTraits",traitKind:s,traitDesc:c})):r.createElement(tt,{accessKind:"noAccessAndNoTraits",traitKind:s,traitDesc:c})}return r.createElement(o.xu,{maxWidth:"700px"},r.createElement(Se,null,"Set Up Access"),r.createElement(Ne,null,u),r.createElement(o.xu,{mb:3},h),p,r.createElement(we,{onProceed:m,disableProceed:"failed"===t.status||"processing"===t.status||!i}))}const dn=(0,a.ZP)(o.xu)(["max-width:700px;background-color:rgba(255,255,255,0.05);border-radius:8px;padding:20px;"]);function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(n),!0).forEach((function(t){bn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hn(e){const t=(0,G.Z)(),n=(0,p.Z)(),[a,o]=(0,r.useState)(),{attempt:l,run:i,setAttempt:s,handleError:c}=(0,ce.Z)("processing"),u="sso"===t.storeUser.state.authType,m=t.storeUser.getUserAccess().edit,d=En(a);let g=e.agentMeta,b=En();switch(e.selectedResourceKind){case Le.Kubernetes:const t=g.kube;b.kubeUsers=(0,Ee.ES)(t.users,d.kubeUsers),b.kubeGroups=(0,Ee.ES)(t.groups,d.kubeGroups);break;case Le.Server:const n=g.node;b.logins=(0,Ee.ES)(n.sshLogins,d.logins);break;case Le.Database:const r=g.db;b.databaseUsers=(0,Ee.ES)(r.users,d.databaseUsers),b.databaseNames=(0,Ee.ES)(r.names,d.databaseNames);break;default:throw new Error(`useUserTraits.ts:statiTraits: resource kind ${e.selectedResourceKind} is not handled`)}async function h(r){if(!u&&m){!function(t){let n=e.agentMeta;switch(e.selectedResourceKind){case Le.Kubernetes:const r=n.kube;e.updateAgentMeta(gn(gn({},n),{},{kube:gn(gn({},r),{},{users:[...b.kubeUsers,...t.kubeUsers],groups:[...b.kubeGroups,...t.kubeGroups]})}));break;case Le.Server:const a=n.node;e.updateAgentMeta(gn(gn({},n),{},{node:gn(gn({},a),{},{sshLogins:[...b.logins,...t.logins]})}));break;case Le.Database:const o=n.db;e.updateAgentMeta(gn(gn({},n),{},{db:gn(gn({},o),{},{users:[...b.databaseUsers,...t.databaseUsers],names:[...b.databaseNames,...t.databaseNames]})}));break;default:throw new Error(`useUserTraits.ts:updateResourceMetaDynamicTraits: resource kind ${e.selectedResourceKind} is not handled`)}}(r),s({status:"processing"});try{await t.userService.updateUser(gn(gn({},a),{},{traits:gn(gn({},a.traits),r)})),await t.userService.applyUserTraits(n),e.nextStep()}catch(e){c(e)}}else e.nextStep()}return(0,r.useEffect)((function(){i((()=>t.userService.fetchUser(t.storeUser.getUsername()).then(o)))}),[t.storeUser,t.userService,i]),{attempt:l,onProceed:function(t){switch(e.selectedResourceKind){case Le.Kubernetes:const n=new Set;t.kubeUsers.forEach((e=>{b.kubeUsers.includes(e.value)||n.add(e.value)}));const r=new Set;t.kubeGroups.forEach((e=>{b.kubeGroups.includes(e.value)||r.add(e.value)})),h({kubeUsers:[...n],kubeGroups:[...r]});break;case Le.Server:const a=new Set;t.logins.forEach((e=>{b.logins.includes(e.value)||a.add(e.value)})),h({logins:[...a]});break;case Le.Database:const o=new Set;t.databaseUsers.forEach((e=>{b.databaseUsers.includes(e.value)||o.add(e.value)}));const l=new Set;t.databaseNames.forEach((e=>{b.databaseNames.includes(e.value)||l.add(e.value)})),h({databaseUsers:[...o],databaseNames:[...l]});break;default:throw new Error(`useUserTrait.ts:onProceed: resource kind ${e.selectedResourceKind} is not handled`)}},fetchUserTraits:function(){i((()=>t.userService.fetchUser(t.storeUser.getUsername()).then(o)))},isSsoUser:u,canEditUser:m,initSelectedOptions:function(e){return fn({trait:e,staticTraits:b,dynamicTraits:d})},getFixedOptions:function(e){return fn({trait:e,staticTraits:b})},getSelectableOptions:e=>fn({trait:e,dynamicTraits:d}),dynamicTraits:d,staticTraits:b,resourceState:e.resourceState}}function En(e){return{logins:(null==e?void 0:e.traits.logins)||[],databaseUsers:(null==e?void 0:e.traits.databaseUsers)||[],databaseNames:(null==e?void 0:e.traits.databaseNames)||[],kubeUsers:(null==e?void 0:e.traits.kubeUsers)||[],kubeGroups:(null==e?void 0:e.traits.kubeGroups)||[],windowsLogins:(null==e?void 0:e.traits.windowsLogins)||[],awsRoleArns:(null==e?void 0:e.traits.awsRoleArns)||[]}}function fn(e){let{trait:t,staticTraits:n,dynamicTraits:r}=e,a=[];n&&(a=n[t].map((e=>({value:e,label:e,isFixed:!0}))));let o=[];return r&&(o=r[t].map((e=>({value:e,label:e,isFixed:!1})))),[...a,...o]}const yn=["onProceed","initSelectedOptions","getFixedOptions","getSelectableOptions"];function xn(){return xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xn.apply(this,arguments)}function In(e){const{onProceed:t,initSelectedOptions:n,getFixedOptions:a,getSelectableOptions:l}=e,i=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,yn),[s,c]=(0,r.useState)(""),[u,m]=(0,r.useState)([]);(0,r.useEffect)((()=>{"success"===e.attempt.status&&m(n("logins"))}),[e.attempt.status,n]);const d=u.length>0,p=!e.isSsoUser&&e.canEditUser;return r.createElement(mn,xn({},i,{headerSubtitle:"Select the OS users you will use to connect to server.",traitKind:"OS",traitDescription:"users",hasTraits:d,onProceed:function(){t({logins:u})}}),r.createElement(o.xu,{mb:2},"OS Users",r.createElement(un,{inputValue:s,isClearable:u.some((e=>!e.isFixed)),onInputChange:c,onKeyDown:function(e){if(s)switch(e.key){case"Enter":case"Tab":m([...u,{value:s,label:s}]),c(""),e.preventDefault()}},placeholder:"Start typing OS users and press enter",value:u,isDisabled:!p,onChange:(e,t)=>{"clear"===t.action?m(a("logins")):m(e||[])},options:l("logins")})))}var An=n(7038);const Cn=["runConnectionDiagnostic"];function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(n),!0).forEach((function(t){wn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Dn=e=>{const t=e.filter((e=>"root"!==e)).sort();return t.length===e.length?e:["root",...t]};function Sn(e){let{attempt:t,startSshSession:n,logins:a,testConnection:l,diagnosis:i,nextStep:s,prevStep:c,canTestConnection:u}=e;const[m]=(0,r.useState)((()=>a.map((e=>({value:e,label:e}))))),[d,p]=(0,r.useState)(m[0]);return r.createElement(o.xu,null,r.createElement(je,{onPrev:c},"Test Connection"),r.createElement(Ne,null,"Optionally verify that you can successfully connect to the server you just added."),r.createElement(Nn,{mb:5},r.createElement(o.xv,{bold:!0},"Step 1"),r.createElement(o.xv,{typography:"subtitle1",mb:3},"Pick the OS user to test"),r.createElement(o.xu,{width:"320px"},r.createElement(o.SO,null,"Select Login"),r.createElement(An.ZP,{value:d,options:m,onChange:e=>p(e),isDisabled:"processing"===t.status}))),r.createElement(ot,{attempt:t,diagnosis:i,canTestConnection:u,testConnection:()=>l(d.value),stepNumber:2,stepDescription:"Verify that the server is accessible"}),r.createElement(Nn,null,r.createElement(o.xv,{bold:!0},"Step 3"),r.createElement(o.xv,{typography:"subtitle1",mb:3},"Connect to the server"),r.createElement(o.PL,{width:"200px",onClick:()=>n(d.value)},"Start Session")),r.createElement(we,{onProceed:s,lastStep:!0}))}const Nn=(0,a.ZP)(o.xu)(["max-width:800px;background-color:rgba(255,255,255,0.05);border-radius:8px;padding:20px;"]);function jn(e){return r.createElement(ht,{timeout:3e5},r.createElement(Mt,{timeout:3e5,interval:3e3,resourceKind:Le.Server},e.children))}const kn={kind:Le.Server,icon:r.createElement(b.xFH,null),wrapper:e=>r.createElement(jn,null,e),shouldPrompt:e=>0!==e,views:[{title:"Select Resource"},{title:"Configure Resource",component:function(e){return r.createElement(gt.$,{onRetry:yt,fallbackFn:e=>r.createElement(Zt,{pollState:"error",nextStep:()=>null},r.createElement(Ge,{mt:2,mb:3},r.createElement(b.v3j,{ml:1,color:"danger"}),"Encountered Error: ",e.error.message),r.createElement(De,{ml:2,onClick:e.retry},"Refetch a command"))},r.createElement(r.Suspense,{fallback:r.createElement(o.xu,{height:"144px"},r.createElement(Zt,{nextStep:()=>null},r.createElement(o.xu,{textAlign:"center",height:"108px"},r.createElement(o.z$,{delay:"none"}))))},r.createElement(zt,e)))}},{title:"Set Up Access",component:function(e){const t=hn(e);return r.createElement(In,t)}},{title:"Test Connection",component:function(e){const t=function(e){const t=mt(e),{runConnectionDiagnostic:n}=t,r=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,Cn);return Mn(Mn({},r),{},{testConnection:function(t){n({resourceKind:"node",resourceName:e.agentMeta.resourceName,sshPrincipal:t})},logins:Dn(e.agentMeta.node.sshLogins),startSshSession:function(t){const n=e.agentMeta,a=d.Z.getSshConnectRoute({clusterId:r.clusterId,serverId:n.node.id,login:t});(0,Ee.RB)(a)}})}(e);return r.createElement(Sn,t)}},{title:"Finished",component:Oe,hide:!0}]};function Tn(e){return r.createElement(ht,{timeout:3e5},r.createElement(Mt,{timeout:3e5,interval:3e3,resourceKind:Le.Database},e.children))}var On=n(369);function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){Zn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ln(e){const t=function(e){const t=(0,G.Z)(),n=t.storeUser.getClusterId(),{attempt:a,setAttempt:o}=(0,ce.Z)(""),[l,i]=(0,r.useState)(0),[s,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(),{timedOut:d,result:p}=At((e=>function(e){const r={search:u.name,limit:1};return t.databaseService.fetchDatabases(n,r,e).then((e=>e.agents.length?e.agents[0]:null))}(e)),l,s,3e3);function g(e){let t;t=e instanceof Error?e.message:String(e),o({status:"failed",statusText:t})}(0,r.useEffect)((()=>{s&&Date.now()>l&&(c(!1),o({status:"failed",statusText:"Teleport could not detect your new database in time. Please try again."}))}),[s,l,d]),(0,r.useEffect)((()=>{p&&(i(null),c(!1),e.updateAgentMeta(zn(zn({},e.agentMeta),{},{resourceName:u.name,agentMatcherLabels:u.labels,db:p})),e.nextStep(2))}),[p]);const b=t.storeUser.getDatabaseAccess(),h=e.resourceState;return{attempt:a,clearAttempt:function(){o({status:""})},registerDatabase:async function(r){if(i(Date.now()+3e4),o({status:"processing"}),!u||r.name!=u.name)try{await t.databaseService.createDatabase(n,r),m(r)}catch(e){return void g(e)}try{const{services:a}=await t.databaseService.fetchDatabaseServices(n);if(!function(e,t){if(!t.length)return!1;let n={},r={};e.forEach((e=>{n[e.name]=e.value,r[e.value]=e.name}));for(let a=0;a<t.length;a++)for(const[o,l]of Object.entries(t[a].matcherLabels)){const t=l.includes("*");if("*"===o&&t)return!0;if(!e.length)continue;if("*"===o&&l.find((e=>r[e])))return!0;if(t&&n[o])return!0;const a=n[o];if(a&&l.find((e=>e===a)))return!0}return!1}(r.labels,a))return e.updateAgentMeta(zn(zn({},e.agentMeta),{},{resourceName:r.name,agentMatcherLabels:r.labels})),void e.nextStep()}catch(e){return void g(e)}c(!0)},canCreateDatabase:b.create,pollTimeout:l,dbEngine:h.engine,dbLocation:h.location}}(e);return r.createElement(Un,t)}function Un(e){let{attempt:t,clearAttempt:n,registerDatabase:a,canCreateDatabase:l,pollTimeout:i,dbEngine:s,dbLocation:c}=e;const[u,m]=(0,r.useState)(""),[d,p]=(0,r.useState)(""),[g,b]=(0,r.useState)([]),[h,E]=(0,r.useState)("5432"),[f,y]=(0,r.useState)(""),[x,I]=(0,r.useState)("");function A(e){if(!e.validate())return;let t;c===pe.AWS&&(t={accountId:f,resourceId:x}),a({labels:g,name:u,uri:`${d}:${h}`,protocol:he(s),awsRds:t})}return r.createElement(te.ZP,null,(e=>{let{validator:a}=e;return r.createElement(o.xu,{maxWidth:"800px"},r.createElement(Se,null,"Register a Database"),r.createElement(Ne,null,"Create a new database resource for the database server."),!l&&r.createElement(o.xu,null,r.createElement(o.xv,null,"You don't have permission to register a database.",r.createElement("br",null),"Please ask your Teleport administrator to update your role and add the ",r.createElement(ze,null,"db")," rule:"),r.createElement(o.kC,{minHeight:"195px",mt:3},r.createElement(Ue.Z,{readOnly:!0,data:[{content:et,type:"yaml"}]}))),l&&r.createElement(r.Fragment,null,r.createElement(o.xu,{width:"500px"},r.createElement(ne.Z,{label:"Database Name",rule:Fn,autoFocus:!0,value:u,placeholder:"Enter database name",onChange:e=>m(e.target.value),toolTipContent:"An identifier name for this new database for Teleport."})),r.createElement(o.kC,{width:"500px"},r.createElement(ne.Z,{label:"Database Connection Endpoint",rule:(0,We.lp)("connection endpoint is required"),value:d,placeholder:"db.example.com",onChange:e=>p(e.target.value),toolTipContent:"Database location and connection information.",width:"50%",mr:2}),r.createElement(ne.Z,{label:"Endpoint Port",rule:Yn,value:h,placeholder:"5432",onChange:e=>E(e.target.value),width:"50%"})),c===pe.AWS&&r.createElement(r.Fragment,null,r.createElement(o.xu,{width:"500px"},r.createElement(ne.Z,{label:"AWS Account ID",rule:Bn,value:f,placeholder:"123456789012",onChange:e=>y(e.target.value),toolTipContent:"A 12-digit number that uniquely identifies your AWS account."})),r.createElement(o.xu,{width:"500px",mb:6},r.createElement(ne.Z,{label:"Resource ID",value:x,rule:(0,We.lp)("database resource ID is required"),placeholder:"db-ABCDE1234567...",onChange:e=>I(e.target.value),toolTipContent:r.createElement(o.xv,null,"The unique identifier for your resource. For AWS database, may have the prefix ",r.createElement(ze,{light:!0},"db-")," ","then follow with alphanumerics.")}))),r.createElement(o.xu,{mt:3},r.createElement(o.xv,{bold:!0},"Labels (optional)"),r.createElement(o.xv,{mb:2},"Labels make this new database discoverable by the database service. ",r.createElement("br",null),"Not defining labels is equivalent to asteriks (any database service can discover this database)."),r.createElement(Je,{labels:g,setLabels:b,isLabelOptional:!0,disableBtns:"processing"===t.status}))),r.createElement(we,{onProceed:()=>A(a),disableProceed:"processing"===t.status||!l}),("processing"===t.status||"failed"===t.status)&&r.createElement(Rn,{pollTimeout:i,attempt:t,retry:()=>A(a),close:n}))}))}const Rn=e=>{let{pollTimeout:t,attempt:n,retry:a,close:l}=e;return r.createElement(On.ZP,{disableEscapeKeyDown:!1,open:!0},r.createElement(On.cZ,{width:"400px",alignItems:"center",mb:0,textAlign:"center"},"failed"!==n.status?r.createElement(r.Fragment,null," ",r.createElement(o.xv,{bold:!0,caps:!0,mb:4},"Registering Database"),r.createElement(o.oS,null),r.createElement(Hn,null,r.createElement(b.r6F,{fontSize:4}),r.createElement(Dt,{timeout:t,message:"",tailMessage:" seconds left"}))):r.createElement(o.xu,{width:"100%"},r.createElement(o.xv,{bold:!0,caps:!0,mb:3},"Database Register Failed"),r.createElement(o.xv,{mb:5},r.createElement(b.v3j,{ml:1,mr:2,color:"danger"}),"Error: ",n.statusText),r.createElement(o.kC,null,r.createElement(o.DF,{mr:2,width:"50%",onClick:a},"Retry"),r.createElement(o.PL,{width:"50%",onClick:l},"Close")))))},Qn=/^\d{4}$/,Yn=e=>()=>e.match(Qn)?{valid:!0}:{valid:!1,message:"port must be 4 digits"},Gn=/^\d{12}$/,Bn=e=>()=>e.match(Gn)?{valid:!0}:{valid:!1,message:"aws account id must be 12 digits"},Wn=/^[\w@+=,.:/-]+$/,Fn=e=>()=>e.match(Wn)?{valid:!0}:{valid:!1,message:"name must be alphanumerics, including characters such as _ @ = , . + -"};var Hn=(0,a.ZP)(Ge)(["white-space:pre;"]);const Vn=["onProceed","initSelectedOptions","getFixedOptions","getSelectableOptions","resourceState"];function Jn(){return Jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jn.apply(this,arguments)}function Kn(e){const t=hn(e);return r.createElement(Xn,t)}function Xn(e){const{onProceed:t,initSelectedOptions:n,getFixedOptions:a,getSelectableOptions:l,resourceState:i}=e,s=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Vn),[c,u]=(0,r.useState)(""),[m,d]=(0,r.useState)([]),[p,g]=(0,r.useState)(""),[b,h]=(0,r.useState)([]);(0,r.useEffect)((()=>{"success"===e.attempt.status&&(d(n("databaseNames")),h(n("databaseUsers")))}),[e.attempt.status,n]);const E=m.length>0&&b.length>0,f=!e.isSsoUser&&e.canEditUser,{engine:y,location:x}=i;return r.createElement(mn,Jn({},s,{headerSubtitle:"Allow access from your Database names and users to interact with your Database.",traitKind:"Database",traitDescription:"names and users",hasTraits:E,onProceed:function(){t({databaseNames:m,databaseUsers:b})},infoContent:r.createElement(qn,{dbEngine:y,dbLocation:x})}),r.createElement(o.xu,{mb:4},"Database Users",r.createElement(un,{inputValue:p,isClearable:b.some((e=>!e.isFixed)),onInputChange:g,onKeyDown:function(e){if(p)switch(e.key){case"Enter":case"Tab":h([...b,{value:p,label:p}]),g(""),e.preventDefault()}},placeholder:"Start typing database users and press enter",value:b,isDisabled:!f,onChange:(e,t)=>{"clear"===t.action?h(a("databaseUsers")):h(e||[])},options:l("databaseUsers"),autoFocus:!0})),r.createElement(o.xu,{mb:2},"Database Names",r.createElement(un,{inputValue:c,isClearable:m.some((e=>!e.isFixed)),onInputChange:u,onKeyDown:function(e){if(c)switch(e.key){case"Enter":case"Tab":d([...m,{value:c,label:c}]),u(""),e.preventDefault()}},placeholder:"Start typing database names and press enter",value:m,isDisabled:!f,onChange:(e,t)=>{"clear"===t.action?d(a("databaseNames")):d(e||[])},options:l("databaseNames")})))}const qn=e=>r.createElement(_n,{mt:5},r.createElement(o.kC,{mb:2},r.createElement(b.cEj,{fontSize:18,mr:1,mt:"2px"}),r.createElement(o.xv,{bold:!0},"To allow access using your Database Users")),r.createElement($n,e),r.createElement(o.xu,null,r.createElement(o.xv,{bold:!0},"Access Definition"),r.createElement(er,null,r.createElement("li",null,r.createElement(ze,null,"Database User")," is the name of a user that is allowed to connect to a database. A wildcard allows any user."),r.createElement("li",null,r.createElement(ze,null,"Database Name")," is the name of a logical database (aka schemas) that a ",r.createElement(ze,null,"Database User")," will be allowed to connect to within a database server. A wildcard allows any database."))));function $n(e){let{dbEngine:t,dbLocation:n}=e;if(n===pe.AWS){if(t===ge.PostgreSQL)return r.createElement(o.xu,{mb:3},r.createElement(o.xv,{mb:2},"Database users must allow"," ",r.createElement(o.rU,{href:"https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/UsingWithRDS.IAMDBAuth.DBAccounts.html",target:"_blank"},"IAM authentication")," ","in order to be used with Database Access for RDS. To enable, users must have a ",r.createElement(ze,null,"rds_iam")," role:"),r.createElement(F.r,{bash:!1,lines:[{text:"CREATE USER YOUR_USERNAME;\nGRANT rds_iam TO YOUR_USERNAME;"}]}))}else{if(t===ge.PostgreSQL)return r.createElement(o.xu,{mb:3},r.createElement(o.xv,{mb:2},"Add the following entries to PostgreSQL's"," ",r.createElement(o.rU,{href:"https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/UsingWithRDS.IAMDBAuth.DBAccounts.html#UsingWithRDS.IAMDBAuth.DBAccounts.PostgreSQL",target:"_blank"},"host-based authentication")," ","file named ",r.createElement(ze,null,"pg_hba.conf"),", so that PostgreSQL require's client CA from clients connecting over TLS:"),r.createElement(F.r,{bash:!1,lines:[{text:"hostssl all             all             ::/0                    cert\nhostssl all             all             0.0.0.0/0               cert\n"}]}),r.createElement(o.xv,{mt:2},"Note: Ensure that you have no higher-priority md5 authentication rules that will match, otherwise PostgreSQL will offer them first, and the certificate-based Teleport login will fail."));if(t===ge.Mongo)return r.createElement(o.xu,{mb:3},r.createElement(o.xv,{mb:2},"To create a user for this database, connect to this database using the ",r.createElement(ze,null,"mongosh"),"or ",r.createElement(ze,null,"mongo")," shell and run the following command:"),r.createElement(F.r,{bash:!1,lines:[{text:'db.getSiblingDB("$external").runCommand(\n  {\n    createUser: "CN=YOUR_USERNAME",\n    roles: [\n      { role: "readWriteAnyDatabase", db: "admin" }\n    ]\n  }\n)'}]}));if(t===ge.MySQL)return r.createElement(o.xu,{mb:3},r.createElement(o.xv,{mb:2},"MySQL/MariaDB database user accounts must be configured to require a valid client certificate."),r.createElement(o.xu,{mb:2},r.createElement(o.xv,{bold:!0},"To create a new user:"),r.createElement(F.r,{bash:!1,lines:[{text:"CREATE USER 'YOUR_USERNAME'@'%' REQUIRE SUBJECT '/CN=YOUR_USERNAME';"}]})),r.createElement(o.xu,{mb:3},r.createElement(o.xv,{bold:!0},"To update an existing user:"),r.createElement(F.r,{bash:!1,lines:[{text:"ALTER USER 'YOUR_USERNAME'@'%' REQUIRE SUBJECT '/CN=YOUR_USERNAME';"}]})),r.createElement(o.xu,null,r.createElement(o.xv,null,"By default, the created user may not have access to anything and won't be able to connect, so let's grant it some permissions:"),r.createElement(F.r,{bash:!1,lines:[{text:"GRANT ALL ON ` % `.* TO 'YOUR_USERNAME'@'%';"}]})))}}const _n=(0,a.ZP)(o.xu)(["max-width:800px;background-color:rgba(255,255,255,0.05);border-radius:8px;padding:20px;"]);var er=(0,a.ZP)("ul")(["margin-bottom:0;"]);function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach((function(t){rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ar(){return ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ar.apply(this,arguments)}function or(e){var t,n;const[a,l]=(0,r.useState)(e.runJoinTokenPromise),i=null===(t=e.agentMeta)||void 0===t||null===(n=t.agentMatcherLabels)||void 0===n?void 0:n.length,s=i?e.agentMeta.agentMatcherLabels:[],[c,u]=(0,r.useState)(i?s:[{name:"*",value:"*",isFixed:!0}]),m={labels:c,setLabels:u,dbLabels:s};return r.createElement(te.ZP,null,(t=>{let{validator:n}=t;return r.createElement(gt.$,{onRetry:yt,fallbackFn:e=>r.createElement(o.xu,null,r.createElement(ir,null),r.createElement(sr,ar({},m,{generateBtn:r.createElement(ur,{onClick:()=>{n.validate()&&e.retry()}})})),r.createElement(o.xu,null,r.createElement(Ge,{mt:3},r.createElement(b.v3j,{ml:1,color:"danger"}),"Encountered Error: ",e.error.message)),r.createElement(we,{onProceed:()=>null,disableProceed:!0}))},r.createElement(r.Suspense,{fallback:r.createElement(o.xu,null,r.createElement(ir,null),r.createElement(sr,ar({},m,{disableBtns:!0,generateBtn:r.createElement(ur,{disabled:!0})})),r.createElement(we,{onProceed:()=>null,disableProceed:!0}))},!a&&r.createElement(o.xu,null,r.createElement(ir,null),r.createElement(sr,ar({},m,{generateBtn:r.createElement(ur,{onClick:()=>function(e){e.validate()&&l(!0)}(n)})})),r.createElement(we,{onProceed:()=>null,disableProceed:!0})),a&&r.createElement(lr,ar({},e,m,{validator:n}))))}))}function lr(e){const{joinToken:t,reloadJoinToken:n,timeout:a}=It(Le.Database,e.labels),{timedOut:l,start:i,result:s}=wt(e.agentMeta.resourceName);let c={state:"polling"};return l?c={state:"error",error:{reasonContents:[r.createElement(r.Fragment,null,"The command was not run on the server you were trying to add, regenerate command and try again."),r.createElement(r.Fragment,null,"The Teleport Database Service could not join this Teleport cluster. Check the logs for errors by running ",r.createElement("br",null),r.createElement(ze,null,"journalctl status teleport"))]}}:s&&(c={state:"success"}),r.createElement(o.xu,null,r.createElement(ir,null),r.createElement(sr,{labels:e.labels,setLabels:e.setLabels,disableBtns:"polling"===c.state,dbLabels:e.dbLabels,generateBtn:r.createElement(ur,{disabled:"polling"===c.state,onClick:function(){e.validator.validate()&&(n(),i())},title:"Regenerate Command"})}),r.createElement(o.xu,{mt:6},r.createElement(St,{command:(u=t.id,`sudo bash -c "$(curl -fsSL ${d.Z.getDbScriptUrl(u)})"`),poll:c,pollingTimeout:a})),r.createElement(we,{onProceed:function(){e.updateAgentMeta(nr(nr({},e.agentMeta),{},{resourceName:s.name,db:s})),e.nextStep()},disableProceed:"success"!==c.state||0===e.labels.length}));var u}const ir=()=>r.createElement(r.Fragment,null,r.createElement(Se,null,"Deploy a Database Service"),r.createElement(Ne,null,"On the host where you will run the Teleport Database Service, execute the generated command that will install and start Teleport with the appropriate configuration.")),sr=e=>{let{labels:t,setLabels:n,disableBtns:a=!1,dbLabels:l,generateBtn:i}=e;const{valid:s,message:c}=(0,te.kQ)(cr(l,t)),u=!s;return r.createElement(o.xu,{mb:2},r.createElement(o.xv,{bold:!0},"Labels"),r.createElement(o.xv,{typography:"subtitle1",mb:3},"At least one label is required to help this service identify your database."),r.createElement(Je,{labels:t,setLabels:n,disableBtns:a}),r.createElement(o.xu,{mt:3},i,u&&r.createElement(Ge,{mt:3},r.createElement(b.v3j,{ml:1,color:"danger"}),c)))},cr=(e,t)=>()=>function(e,t){let n={},r={};e.forEach((e=>{n[e.name]=e.value,r[e.value]=e.name}));for(let e=0;e<t.length;e++){const a=t[e],o=a.name,l=a.value;if("*"===o&&"*"===l)return!0;if("*"===o&&r[l])return!0;if("*"===l&&n[o])return!0;const i=n[a.name];if(i&&i===l)return!0}return!1}(e,t)?{valid:!0}:{valid:!1,message:"At least one matching label needs to be defined.           Asteriks can also be used to match any databases."},ur=e=>{let{onClick:t,title:n="Generate Command",disabled:a=!1}=e;return r.createElement(o.PL,{width:"200px",onClick:t,disabled:a},n)};function mr(e){let{tabs:t}=e;const[n,a]=(0,r.useState)(0);return r.createElement(o.xu,null,r.createElement(dr,null,t.map(((e,t)=>{const o=t===n;return r.createElement(pr,{as:"button",key:t,onClick:()=>a(t),py:3,px:4,borderTopLeftRadius:2,borderTopRightRadius:2,bg:o?"rgba(255, 255, 255, 0.05)":"transparent",$_css:o?1:.6},e.title)}))),r.createElement(o.xu,{p:2,borderBottomLeftRadius:2,borderBottomRightRadius:2,bg:"rgba(255, 255, 255, 0.05)"},t[n].content))}var dr=(0,a.ZP)(o.kC)(["overflow-x:auto;white-space:nowrap;::-webkit-scrollbar-track{background:rgba(255,255,255,0.05);}"]),pr=(0,a.ZP)(o.xu)(["opacity:",";color:inherit;border:none;:hover,:focus{cursor:pointer;opacity:1;}"],(e=>e.$_css));function gr(e,t,n){if(!n)return"";const r=d.Z.getDatabaseSignUrl(e),a=JSON.stringify({hostname:t});return`curl ${d.Z.baseUrl}/${r} -d '${a}' -H 'Authorization: Bearer ${n}' -H 'Content-Type: application/json' -OJ; tar -xvf teleport_mTLS_${t}.tar.gz\n  `}function br(e){const t=function(e){let{ctx:t,props:n}=e;const{attempt:a,run:o}=(0,ce.Z)(""),l=xt(),[i,s]=(0,r.useState)(l),c=n.agentMeta,u=t.storeUser.getClusterId();return(0,r.useEffect)((()=>{i||o((()=>t.joinTokenService.fetchJoinToken({roles:[Re(Le.Database)],method:"token"}).then(s)))}),[]),{attempt:a,onNextStep:function(e){e?o((()=>t.databaseService.updateDatabase(u,{name:c.db.name,caCert:e}).then((()=>n.nextStep())))):n.nextStep()},canUpdateDatabase:t.storeUser.getDatabaseAccess().edit,curlCmd:gr(u,c.db.hostname,null==i?void 0:i.id),dbEngine:n.resourceState.engine}}({ctx:(0,G.Z)(),props:e});return r.createElement(hr,t)}function hr(e){let{attempt:t,onNextStep:n,curlCmd:a,canUpdateDatabase:i,dbEngine:s}=e;const[c,u]=(0,r.useState)("");return r.createElement(o.xu,{maxWidth:"800px"},r.createElement(Se,null,"Configure Mutual TLS"),r.createElement(Ne,null,"Self-hosted databases must be configured with Teleport's certificate authority to be able to verify client certificates. They also need a certificate/key pair that Teleport can verify."),"failed"===t.status&&r.createElement(l.b0,{children:t.statusText}),!i&&r.createElement(o.xu,null,r.createElement(o.xv,null,"You don't have permission to update a database.",r.createElement("br",null),"Please ask your Teleport administrator to update your role and add the ",r.createElement(ze,null,"db")," rule:"),r.createElement(o.kC,{minHeight:"195px",mt:3},r.createElement(Ue.Z,{readOnly:!0,data:[{content:et,type:"yaml"}]}))),i&&r.createElement(r.Fragment,null,r.createElement(o.xu,{mb:3},r.createElement(o.xv,{bold:!0},"Run the command below to download Teleport's CA and generate cert/key pair."),r.createElement(o.xu,{mt:2,mb:1},r.createElement(F.r,{lines:[{text:a}]}))),r.createElement(fr,{mb:6},r.createElement(o.kC,{mb:2},r.createElement(b.cEj,{fontSize:18,mr:1,mt:"2px"}),r.createElement(o.xv,{bold:!0},"After Running the Command")),r.createElement(Er,{dbEngine:s})),r.createElement(o.xu,{mb:5},r.createElement(o.xv,{bold:!0},"Add a copy of your CA certificate*"),r.createElement(o.xv,{mb:2},"*Only required if your database is configured with a certificate signed by a third-party CA. Adding a copy allows Teleport to trust it."),r.createElement(o.xu,{mt:2,height:"100px",width:"800px",as:"textarea",p:2,borderRadius:2,placeholder:"Copy and paste your CA certificate",value:c,onChange:e=>u(e.target.value),autoFocus:!0,style:{outline:"none"}}))),r.createElement(we,{onProceed:()=>n(c),disableProceed:"processing"===t.status}))}function Er(e){let{dbEngine:t}=e;return t===ge.PostgreSQL?r.createElement(o.xu,null,r.createElement(o.xv,{mb:1},"Add the following to the PostgreSQL configuration file"," ",r.createElement(ze,null,"postgresql.conf"),", to have your server accept"," ",r.createElement(o.rU,{href:"https://www.postgresql.org/docs/current/ssl-tcp.html",target:"_blank"},"TLS connections"),":"),r.createElement(F.r,{bash:!1,lines:[{text:"ssl = on\nssl_cert_file = '$PGDATA/server.crt'\nssl_key_file = '$PGDATA/server.key'\nssl_ca_file = '$PGDATA/server.cas'"}]})):t===ge.Mongo?r.createElement(o.xu,null,r.createElement(o.xv,{mb:3},"Use the generated secrets to"," ",r.createElement(o.rU,{href:"https://www.mongodb.com/docs/manual/tutorial/configure-ssl/",target:"_blank"},"enable mutual TLS")," ","in your",r.createElement(ze,null,"mongod.conf")," configuration file and restart the database:"),r.createElement(mr,{tabs:[{title:"MongoDB 3.6 - 4.2",content:r.createElement(F.r,{bash:!1,lines:[{text:"net:\n  ssl:\n    mode: requireSSL\n    PEMKeyFile: /etc/certs/mongo.crt\n    CAFile: /etc/certs/mongo.cas"}]})},{title:"MongoDB 4.2+",content:r.createElement(F.r,{bash:!1,lines:[{text:"net:\n  tls:\n    mode: requireTLS\n    certificateKeyFile: /etc/certs/mongo.crt\n    CAFile: /etc/certs/mongo.cas"}]})}]})):t===ge.MySQL?r.createElement(o.xu,null,r.createElement(o.xv,{mb:3},"To configure this database to accept TLS connections, add the following to your configuration file, ",r.createElement(ze,null,"mysql.cnf"),":"),r.createElement(mr,{tabs:[{title:"MySQL",content:r.createElement(r.Fragment,null,r.createElement(F.r,{bash:!1,lines:[{text:"[mysqld]\nrequire_secure_transport=ON\nssl-ca=/path/to/server.cas\nssl-cert=/path/to/server.crt\nssl-key=/path/to/server.key"}]}),r.createElement(o.xv,{mt:2},"See"," ",r.createElement(o.rU,{href:"https://dev.mysql.com/doc/refman/8.0/en/using-encrypted-connections.html",target:"_blank"},"Configuring MySQL to Use Encrypted Connections")," ","for more details."))},{title:"MariaDB",content:r.createElement(r.Fragment,null,r.createElement(F.r,{bash:!1,lines:[{text:"[mariadb]\nrequire_secure_transport=ON\nssl-ca=/path/to/server.cas\nssl-cert=/path/to/server.crt\nssl-key=/path/to/server.key"}]}),r.createElement(o.xv,{mt:2},"See"," ",r.createElement(o.rU,{href:"https://mariadb.com/docs/server/security/data-in-transit-encryption/enterprise-server/enable-tls/",target:"_blank"},"Enabling TLS on MariaDB Server")," ","for more details."))}]})):void 0}const fr=(0,a.ZP)(o.xu)(["max-width:800px;background-color:rgba(255,255,255,0.05);border-radius:8px;padding:20px;"]),yr=["runConnectionDiagnostic"];function xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(n),!0).forEach((function(t){Ar(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cr(e){const t=function(e){const t=mt(e),{runConnectionDiagnostic:n}=t;return Ir(Ir({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,yr)),{},{testConnection:function(t){let{name:r,user:a}=t;n({resourceKind:"db",resourceName:e.agentMeta.resourceName,dbTester:{name:r,user:a}})},db:e.agentMeta.db})}(e);return r.createElement(vr,t)}function vr(e){let{attempt:t,testConnection:n,diagnosis:a,nextStep:l,prevStep:i,canTestConnection:s,db:c,authType:u,username:m,clusterId:d}=e;const p=c.users.map((e=>({value:e,label:e}))),g=c.names.map((e=>({value:e,label:e}))),[b,h]=(0,r.useState)(p[0]),[E,f]=(0,r.useState)(g[0]);return r.createElement(o.xu,null,r.createElement(je,{onPrev:i},"Test Connection"),r.createElement(Ne,null,"Optionally verify that you can successfully connect to the Database you just added."),r.createElement(Mr,{mb:5},r.createElement(o.xv,{bold:!0},"Step 1"),r.createElement(o.xv,{typography:"subtitle1",mb:3},"Select a user and a database name to test."),r.createElement(o.xu,{width:"500px",mb:4},r.createElement(o.SO,{htmlFor:"select"},"Database User"),r.createElement(An.ZP,{placeholder:0===p.length?"No database users defined":"Click to select a database user",isSearchable:!0,value:b,onChange:e=>h(e),options:p,isDisabled:"processing"===t.status||0===p.length})),r.createElement(o.xu,{width:"500px",mb:3},r.createElement(o.SO,{htmlFor:"select"},"Database Name"),r.createElement(An.ZP,{label:"Database name",placeholder:0===g.length?"No database names defined":"Click to select a database name",isSearchable:!0,value:E,onChange:e=>f(e),options:g,isDisabled:"processing"===t.status||0===g.length}))),r.createElement(ot,{attempt:t,diagnosis:a,canTestConnection:s,testConnection:()=>n({name:E.value,user:b.value}),stepNumber:2,stepDescription:"Verify that your database is accessible"}),r.createElement(Mr,null,r.createElement(o.xv,{bold:!0,mb:3},"To Access your Database"),r.createElement(o.xu,{mb:2},"Log into your Teleport cluster",r.createElement(F.Z,{mt:"1",text:(0,Ee.Sl)({authType:u,username:m,clusterId:d})})),r.createElement(o.xu,{mb:2},"Connect to your database",r.createElement(F.Z,{mt:"1",text:`tsh db connect ${c.name} --db-user=${b.value} --db-name=${E.value}`}))),r.createElement(we,{onProceed:l,lastStep:!0}))}const Mr=(0,a.ZP)(o.xu)(["max-width:800px;background-color:rgba(255,255,255,0.05);border-radius:8px;padding:20px;"]);function wr(e){const t=function(e){let{ctx:t,props:n}=e;const{attempt:a,run:o}=(0,ce.Z)(""),[l,i]=(0,r.useState)();function s(){const e=t.storeUser.getClusterId();o((()=>t.databaseService.fetchDatabaseIamPolicy(e,n.agentMeta.resourceName).then(i)))}return(0,r.useEffect)((()=>{s()}),[]),{attempt:a,nextStep:n.nextStep,iamPolicy:l,fetchIamPolicy:s,iamPolicyName:`TeleportDatabaseAccess_${n.agentMeta.resourceName}`}}({ctx:(0,G.Z)(),props:e});return r.createElement(Dr,t)}function Dr(e){let{attempt:t,nextStep:n,iamPolicy:a,fetchIamPolicy:l,iamPolicyName:i}=e;return r.createElement(o.xu,{maxWidth:"800px"},r.createElement(Se,null,"Configure IAM Policy"),r.createElement(Ne,null,"Teleport needs AWS IAM permissions to be able to discover and register RDS instances and configure IAM authentications."),"failed"===t.status?r.createElement(r.Fragment,null,r.createElement(o.xv,{my:3},r.createElement(b.v3j,{ml:1,mr:2,color:"danger"}),"Encountered Error: ",t.statusText),r.createElement(De,{ml:1,onClick:l},"Retry")):r.createElement(o.kC,{height:"428px"},"processing"===t.status&&r.createElement(o.kC,{width:"404px",justifyContent:"center",alignItems:"center"},r.createElement(o.z$,null)),"success"===t.status&&r.createElement(o.xu,null,r.createElement(o.xv,{bold:!0},"Run this AWS CLI command to create a IAM policy. ",r.createElement("br",null),"Then attach this policy to appropriate AWS resources (eg."," ",r.createElement(o.rU,{href:"https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-create-and-attach-iam-policy.html",target:"_blank"},"IAM users"),","," ",r.createElement(o.rU,{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html#attach-iam-role",target:"_blank"},"ec2 instance"),")."),r.createElement(o.xu,{mt:2,mb:1},r.createElement(F.r,{lines:[{text:`aws iam create-policy \\\n--policy-name ${i} \\\n--policy-document \\\n'${JSON.stringify(JSON.parse(a.aws.policy_document),null,2)}'`}]})))),r.createElement(we,{onProceed:n,disableProceed:"success"!==t.status}))}const Sr={kind:Le.Database,icon:r.createElement(b.voY,null),wrapper:e=>r.createElement(Tn,null,e),shouldPrompt:e=>0!==e,views(e){let t;if(e)switch(e.location){case pe.AWS:t=[{title:"Register a Database",component:Ln},{title:"Deploy Database Service",component:or},{title:"Configure IAM Policy",component:wr}];break;case pe.SelfHosted:t=[{title:"Register a Database",component:Ln},{title:"Deploy Database Service",component:or},{title:"Configure mTLS",component:br}]}return[{title:"Select Resource"},{title:"Configure Resource",views:t},{title:"Setup Access",component:Kn},{title:"Test Connection",component:Cr},{title:"Finished",component:Oe,hide:!0}]}};function Nr(e){return r.createElement(ht,{timeout:3e5},r.createElement(Mt,{timeout:3e5,interval:3e3,resourceKind:Le.Kubernetes},e.children))}const jr=["onProceed","initSelectedOptions","getFixedOptions","getSelectableOptions"];function kr(){return kr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kr.apply(this,arguments)}function Tr(e){const{onProceed:t,initSelectedOptions:n,getFixedOptions:a,getSelectableOptions:l}=e,i=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,jr),[s,c]=(0,r.useState)(""),[u,m]=(0,r.useState)([]),[d,p]=(0,r.useState)(""),[g,b]=(0,r.useState)([]);(0,r.useEffect)((()=>{"success"===e.attempt.status&&(m(n("kubeGroups")),b(n("kubeUsers")))}),[e.attempt.status,n]);const h=u.length>0||g.length>0,E=!e.isSsoUser&&e.canEditUser;return r.createElement(mn,kr({},i,{headerSubtitle:"Allow access from your Kubernetes user and groups to interact with your Kubernetes Clusters.",traitKind:"Kubernetes",traitDescription:"users and groups",hasTraits:h,onProceed:function(){t({kubeGroups:u,kubeUsers:g})}}),r.createElement(o.xu,{mb:4},"Kubernetes Groups",r.createElement(un,{inputValue:s,isClearable:u.some((e=>!e.isFixed)),onInputChange:e=>c(e),onKeyDown:function(e){if(s)switch(e.key){case"Enter":case"Tab":m([...u,{value:s,label:s}]),c(""),e.preventDefault()}},placeholder:"Start typing groups and press enter",value:u,isDisabled:!E,onChange:(e,t)=>{"clear"===t.action?m(a("kubeGroups")):m(e||[])},options:l("kubeGroups"),autoFocus:!0})),r.createElement(o.xu,{mb:2},"Kubernetes Users",r.createElement(un,{inputValue:d,isClearable:g.some((e=>!e.isFixed)),onInputChange:p,onKeyDown:function(e){if(d)switch(e.key){case"Enter":case"Tab":b([...g,{value:d,label:d}]),p(""),e.preventDefault()}},placeholder:"Start typing users and press enter",value:g,isDisabled:!E,onChange:(e,t)=>{"clear"===t.action?b(a("kubeUsers")):b(e||[])},options:l("kubeUsers")})))}function Or(){return Or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Or.apply(this,arguments)}function Pr(e){const{joinToken:t,reloadJoinToken:n,timeout:a}=It(Le.Kubernetes);return r.createElement(o.xu,null,r.createElement(zr,null),r.createElement(Zr,null),r.createElement(Lr,{generateScript:n,namespace:e.namespace,setNamespace:e.setNamespace,clusterName:e.clusterName,setClusterName:e.setClusterName,hasJoinToken:!!t}),r.createElement(Ur,{namespace:e.namespace,clusterName:e.clusterName,joinToken:t,pollingTimeout:a,nextStep:e.nextStep,updateAgentMeta:e.updateAgentMeta}))}const zr=()=>r.createElement(r.Fragment,null,r.createElement(Se,null,"Configure Resource"),r.createElement(Ne,null,"Install Teleport Service in your cluster via Helm to easily connect your Kubernetes cluster with Teleport.",r.createElement("br",null),"For all the available values of the helm chart see the"," ",r.createElement(o.rU,{href:"https://goteleport.com/docs/kubernetes-access/helm/reference/teleport-kube-agent/",target:"_blank"},"the documentation"),".")),Zr=()=>r.createElement(Rr,{mb:5},r.createElement(o.xv,{bold:!0},"Step 1"),r.createElement(o.xv,{typography:"subtitle1",mb:3},"Add teleport-agent chart to your charts repository"),r.createElement(F.r,{lines:[{text:"helm repo add teleport https://charts.releases.teleport.dev && helm repo update"}]})),Lr=e=>{let{namespace:t,setNamespace:n,clusterName:a,setClusterName:l,hasJoinToken:i,error:s,onRetry:c,generateScript:u}=e;return r.createElement(Rr,{mb:5},r.createElement(o.xv,{bold:!0},"Step 2"),r.createElement(o.xv,{typography:"subtitle1",mb:3},"Generate a command to automatically configure and install the teleport-agent namespace"),r.createElement(te.ZP,null,(e=>{let{validator:m}=e;return r.createElement(r.Fragment,null,r.createElement(o.xu,{mb:4},r.createElement(ne.Z,{mb:3,rule:(0,We.lp)("Namespace is required"),label:"Teleport Service Namespace",autoFocus:!0,value:t,placeholder:"teleport",width:"100%",mr:"3",onChange:e=>n(e.target.value)}),r.createElement(ne.Z,{rule:(0,We.lp)("Kubernetes Cluster Name is required"),label:"Kubernetes Cluster Name",labelTip:"Name shown to Teleport users connecting to the cluster",value:a,placeholder:"my-cluster",width:"100%",mr:"3",onChange:e=>l(e.target.value)})),r.createElement(o.PL,{width:"200px",type:"submit",disabled:!s&&!u,onClick:()=>s?c():function(e){e.validate()&&u()}(m)},i?"Regenerate Command":"Generate Command"))})),s&&r.createElement(o.xu,null,r.createElement(Ge,{mt:3},r.createElement(b.v3j,{ml:1,color:"danger"}),"Encountered Error: ",s.message)))},Ur=e=>{let{namespace:t,clusterName:n,joinToken:a,pollingTimeout:l,nextStep:i,updateAgentMeta:s}=e;const c=(0,G.Z)().storeUser.state.cluster.authVersion,{hostname:u,port:m}=window.document.location,d=`${u}:${m||"443"}`,{timedOut:p,result:g}=wt();let b={state:"polling"};return p?b={state:"error",error:{reasonContents:[r.createElement(r.Fragment,null,"The command was not run on the server you were trying to add, regenerate command and try again."),r.createElement(r.Fragment,null,"The Teleport Service could not join this Teleport cluster. Check the logs for errors by running ",r.createElement("br",null),r.createElement(ze,null,"kubectl logs -l app=teleport-agent -n ",t))]}}:g&&(b={state:"success"}),r.createElement(r.Fragment,null,r.createElement(St,{command:(h={namespace:t,clusterName:n,proxyAddr:d,tokenId:a.id,clusterVersion:c,resourceId:a.internalResourceId},`cat << EOF > prod-cluster-values.yaml\nroles: kube\nauthToken: ${h.tokenId}\nproxyAddr: ${h.proxyAddr}\nkubeClusterName: ${h.clusterName}\nteleportVersionOverride: ${h.clusterVersion}\nlabels:\n    teleport.internal/resource-id: ${h.resourceId}\nEOF\n \nhelm install teleport-agent teleport/teleport-kube-agent -f prod-cluster-values.yaml --create-namespace --namespace ${h.namespace}`),poll:b,pollingTimeout:l,header:r.createElement(r.Fragment,null,r.createElement(o.xv,{bold:!0},"Step 3"),r.createElement(o.xv,{typography:"subtitle1",mb:3},"Run the command below on the server running your Kubernetes cluster. May take up to a minute for the Teleport Service to join after running the command."))}),r.createElement(we,{onProceed:function(){s({kube:g,resourceName:g.name}),i()},disableProceed:"success"!==b.state}));var h},Rr=(0,a.ZP)(o.xu)(["max-width:800px;background-color:rgba(255,255,255,0.05);border-radius:8px;padding:20px;"]);var Qr=n(1271);const Yr=["runConnectionDiagnostic"];function Gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(n),!0).forEach((function(t){Wr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fr(e){let{attempt:t,testConnection:n,diagnosis:a,nextStep:l,prevStep:i,canTestConnection:s,kube:c,authType:u,username:m,clusterId:d}=e;const p=c.users.map((e=>({value:e,label:e}))),g=c.groups.map((e=>({value:e,label:e}))),[b,h]=(0,r.useState)("default"),[E,f]=(0,r.useState)(g),[y,x]=(0,r.useState)((()=>p[0]||{value:m,label:m}));return r.createElement(te.ZP,null,(e=>{let{validator:I}=e;return r.createElement(o.xu,null,r.createElement(je,{onPrev:i},"Test Connection"),r.createElement(Ne,null,"Optionally verify that you can successfully connect to the Kubernetes cluster you just added."),r.createElement(Hr,{mb:5},r.createElement(o.xv,{bold:!0},"Step 1"),r.createElement(o.xv,{typography:"subtitle1",mb:3},"Define the namespace to test."),r.createElement(o.xu,{width:"500px"},r.createElement(ne.Z,{label:"Namespace",rule:(0,We.lp)("Namespace is required"),autoFocus:!0,value:b,placeholder:"Enter namespace",onChange:e=>h(e.target.value)}))),r.createElement(Hr,{mb:5},r.createElement(o.xv,{bold:!0},"Step 2"),r.createElement(o.xv,{typography:"subtitle1",mb:3},"Select groups and a user to test."),r.createElement(o.xu,{width:"500px"},r.createElement(Qr.Z,{label:"Kubernetes groups",placeholder:0===g.length?"No groups defined":"Click to select groups",isSearchable:!0,isMulti:!0,isClearable:!1,value:E,onChange:e=>f(e),options:g,isDisabled:"processing"===t.status||0===g.length})),r.createElement(o.xu,{width:"500px"},r.createElement(Qr.Z,{label:"Kubernetes user",labelTip:0===p.length?"Defaulted to your teleport username":"",isSearchable:!0,isClearable:!0,placeholder:"Select a user",value:y,onChange:e=>x(e),options:p,isDisabled:"processing"===t.status||0===p.length}))),r.createElement(ot,{attempt:t,diagnosis:a,canTestConnection:s,testConnection:()=>function(e){e.validate()&&n({namespace:b,user:null==y?void 0:y.value,groups:null==E?void 0:E.map((e=>e.value))})}(I),stepNumber:3,stepDescription:"Verify that the Kubernetes is accessible"}),r.createElement(Hr,null,r.createElement(o.xv,{bold:!0,mb:3},"To Access your Kubernetes cluster"),r.createElement(o.xu,{mb:2},"Log into your Teleport cluster",r.createElement(F.Z,{mt:"1",text:(0,Ee.Sl)({authType:u,username:m,clusterId:d})})),r.createElement(o.xu,{mb:2},"Log into your Kubernetes cluster",r.createElement(F.Z,{mt:"1",text:`tsh kube login ${c.name}`})),r.createElement(o.xu,null,"Use kubectl",r.createElement(F.Z,{mt:"1",text:"kubectl get pods"}))),r.createElement(we,{onProceed:l,lastStep:!0}))}))}const Hr=(0,a.ZP)(o.xu)(["max-width:800px;background-color:rgba(255,255,255,0.05);border-radius:8px;padding:20px;"]),Vr={kind:Le.Kubernetes,icon:r.createElement(b.YJo,null),wrapper:e=>r.createElement(Nr,null,e),shouldPrompt:e=>0!==e,views:[{title:"Select Resource"},{title:"Configure Resource",component:function(e){const[t,n]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[i,s]=(0,r.useState)(e.runJoinTokenPromise);return r.createElement(gt.$,{onRetry:yt,fallbackFn:e=>r.createElement(o.xu,null,r.createElement(zr,null),r.createElement(Zr,null),r.createElement(Lr,{error:e.error,onRetry:e.retry,namespace:t,setNamespace:n,clusterName:a,setClusterName:l}),r.createElement(we,{onProceed:()=>null,disableProceed:!0}))},r.createElement(r.Suspense,{fallback:r.createElement(o.xu,null,r.createElement(zr,null),r.createElement(Zr,null),r.createElement(Lr,{namespace:t,setNamespace:n,clusterName:a,setClusterName:l}),r.createElement(we,{onProceed:()=>null,disableProceed:!0}))},!i&&r.createElement(o.xu,null,r.createElement(zr,null),r.createElement(Zr,null),r.createElement(Lr,{generateScript:()=>s(!0),namespace:t,setNamespace:n,clusterName:a,setClusterName:l}),r.createElement(we,{onProceed:()=>null,disableProceed:!0})),i&&r.createElement(Pr,Or({},e,{namespace:t,setNamespace:n,clusterName:a,setClusterName:l}))))}},{title:"Set Up Access",component:function(e){const t=hn(e);return r.createElement(Tr,t)}},{title:"Test Connection",component:function(e){const t=function(e){const t=mt(e),{runConnectionDiagnostic:n}=t;return Br(Br({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,Yr)),{},{testConnection:function(t){n({resourceKind:"kube_cluster",resourceName:e.agentMeta.resourceName,kubeImpersonation:t})},kube:e.agentMeta.kube})}(e);return r.createElement(Fr,t)}},{title:"Finished",component:Oe,hide:!0}]},Jr={kind:Le.Application,icon:r.createElement(b.Ljw,null),shouldPrompt:e=>0!==e,views:[{title:"Select Resource"}]};var Kr,Xr,qr=n(1665),$r=(n(3980),n(4657)),_r=n(7008),ea="out-in",ta="in-out",na=function(e,t,n){return function(){var r;e.props[t]&&(r=e.props)[t].apply(r,arguments),n()}},ra=((Kr={})["out-in"]=function(e){var t=e.current,n=e.changeState;return r.cloneElement(t,{in:!1,onExited:na(t,"onExited",(function(){n($r.d0,null)}))})},Kr[ta]=function(e){var t=e.current,n=e.changeState,a=e.children;return[t,r.cloneElement(a,{in:!0,onEntered:na(a,"onEntered",(function(){n($r.d0)}))})]},Kr),aa=((Xr={})["out-in"]=function(e){var t=e.children,n=e.changeState;return r.cloneElement(t,{in:!0,onEntered:na(t,"onEntered",(function(){n($r.cn,r.cloneElement(t,{in:!0}))}))})},Xr[ta]=function(e){var t=e.current,n=e.children,a=e.changeState;return[r.cloneElement(t,{in:!1,onExited:na(t,"onExited",(function(){a($r.cn,r.cloneElement(n,{in:!0}))}))}),r.cloneElement(n,{in:!0})]},Xr),oa=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={status:$r.cn,current:null},t.appeared=!1,t.changeState=function(e,n){void 0===n&&(n=t.state.current),t.setState({status:e,current:n})},t}(0,qr.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(e,t){return null==e.children?{current:null}:t.status===$r.d0&&e.mode===ta?{status:$r.d0}:!t.current||((n=t.current)===(a=e.children)||r.isValidElement(n)&&r.isValidElement(a)&&null!=n.key&&n.key===a.key)?{current:r.cloneElement(e.children,{in:!0})}:{status:$r.Ix};var n,a},n.render=function(){var e,t=this.props,n=t.children,a=t.mode,o=this.state,l=o.status,i=o.current,s={children:n,current:i,changeState:this.changeState,status:l};switch(l){case $r.d0:e=aa[a](s);break;case $r.Ix:e=ra[a](s);break;case $r.cn:e=i}return r.createElement(_r.Z.Provider,{value:{isMounting:!this.appeared}},e)},t}(r.Component);oa.propTypes={},oa.defaultProps={mode:ea};const la=oa,ia=a.ZP.div(["border-radius:5px;width:100%;box-shadow:0px 0px 20px 0px rgba(0,0,0,0.43);"]),sa=a.ZP.div(["background:#040b1d;height:32px;position:relative;display:flex;align-items:center;justify-content:center;border-top-left-radius:5px;border-top-right-radius:5px;"]),ca=a.ZP.div(["display:flex;position:absolute;top:50%;left:10px;transform:translate(0,-50%);"]),ua=a.ZP.div(["width:12px;height:12px;border-radius:50%;margin-right:5px;"]),ma=a.ZP.div(["background:#04162c;height:var(--content-height,660px);overflow-y:auto;border-bottom-left-radius:5px;border-bottom-right-radius:5px;"]),da=a.ZP.div(["font-size:12px;font-family:Menlo,DejaVu Sans Mono,Consolas,Lucida Console,monospace;line-height:20px;white-space:pre-wrap;"]);function pa(e){return r.createElement(sa,null,r.createElement(ca,null,r.createElement(ua,{style:{backgroundColor:"#f95e57"}}),r.createElement(ua,{style:{backgroundColor:"#fbbe2e"}}),r.createElement(ua,{style:{backgroundColor:"#31c842"}})),e.title)}function ga(e){return r.createElement(ia,null,r.createElement(pa,{title:e.title}),r.createElement(ma,null,e.children))}const ba=a.ZP.div(["width:100%;display:flex;overflow-x:hidden;padding-bottom:50px;margin-top:-24px;padding-top:24px;"]),ha=a.ZP.div(["display:inline-flex;align-items:center;transition:0.2s ease-in opacity;cursor:pointer;font-size:18px;margin-bottom:30px;"]),Ea=a.ZP.div(["font-size:30px;margin-right:20px;"]),fa=a.ZP.div(["display:flex;flex:1;flex-direction:column;margin-right:30px;"]),ya=(a.ZP.div(["flex:0 0 600px;margin-left:30px;"]),a.ZP.div([""]));function xa(e){return`(Invoke-WebRequest -Uri ${e}).Content | Invoke-Expression`}function Ia(e){const{joinToken:t,reloadJoinToken:n,timeout:a,timedOut:l}=It(Le.Desktop);let i;if(l)i=r.createElement(ya,null,r.createElement(o.xv,{mb:4},"That script expired."),r.createElement(Me.DF,{onClick:n},"Generate another"));else{const n=xa(d.Z.getConfigureADUrl(t.id));i=r.createElement(ya,null,r.createElement(F.Z,{text:n,mt:2,mb:5,bash:!0,allowMultiline:!0}),r.createElement(Me.DF,{onClick:()=>e.onNext()},"Next"),r.createElement(o.xu,{mt:4},r.createElement(Dt,{timeout:a})))}return r.createElement(fa,null,r.createElement(ha,null,r.createElement(Ea,null,r.createElement(b.oI9,null)),"1. Run the configure Active Directory script"),i)}function Aa(){return r.createElement(fa,null,r.createElement(ha,null,r.createElement(Ea,null,r.createElement(b.oI9,null)),"1. Run the configure Active Directory script"),r.createElement(ya,null,r.createElement(Ca,null)))}const Ca=a.ZP.div(["width:340px;height:84px;background:url(",") no-repeat;"],"data:image/svg+xml;base64,PHN2ZwogIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICByb2xlPSJpbWciCiAgd2lkdGg9IjM0MCIKICBoZWlnaHQ9Ijg0IgogIGFyaWEtbGFiZWxsZWRieT0ibG9hZGluZy1hcmlhIgogIHZpZXdCb3g9IjAgMCAzNDAgODQiCiAgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIKPgogIDx0aXRsZSBpZD0ibG9hZGluZy1hcmlhIj5Mb2FkaW5nLi4uPC90aXRsZT4KICA8cmVjdAogICAgeD0iMCIKICAgIHk9IjAiCiAgICB3aWR0aD0iMTAwJSIKICAgIGhlaWdodD0iMTAwJSIKICAgIGNsaXAtcGF0aD0idXJsKCNjbGlwLXBhdGgpIgogICAgc3R5bGU9J2ZpbGw6IHVybCgiI2ZpbGwiKTsnCiAgLz4KICA8ZGVmcz4KICAgIDxjbGlwUGF0aCBpZD0iY2xpcC1wYXRoIj4KICAgICAgPHJlY3QgeD0iMCIgeT0iMCIgcng9IjMiIHJ5PSIzIiB3aWR0aD0iNjciIGhlaWdodD0iMTEiIC8+CiAgICAgIDxyZWN0IHg9Ijc2IiB5PSIwIiByeD0iMyIgcnk9IjMiIHdpZHRoPSIxNDAiIGhlaWdodD0iMTEiIC8+CiAgICAgIDxyZWN0IHg9IjEyNyIgeT0iNDgiIHJ4PSIzIiByeT0iMyIgd2lkdGg9IjUzIiBoZWlnaHQ9IjExIiAvPgogICAgICA8cmVjdCB4PSIxODciIHk9IjQ4IiByeD0iMyIgcnk9IjMiIHdpZHRoPSI3MiIgaGVpZ2h0PSIxMSIgLz4KICAgICAgPHJlY3QgeD0iMTgiIHk9IjQ4IiByeD0iMyIgcnk9IjMiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTEiIC8+CiAgICAgIDxyZWN0IHg9IjAiIHk9IjcxIiByeD0iMyIgcnk9IjMiIHdpZHRoPSIzNyIgaGVpZ2h0PSIxMSIgLz4KICAgICAgPHJlY3QgeD0iMTgiIHk9IjIzIiByeD0iMyIgcnk9IjMiIHdpZHRoPSIxNDAiIGhlaWdodD0iMTEiIC8+CiAgICAgIDxyZWN0IHg9IjE2NiIgeT0iMjMiIHJ4PSIzIiByeT0iMyIgd2lkdGg9IjE3MyIgaGVpZ2h0PSIxMSIgLz4KICAgIDwvY2xpcFBhdGg+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImZpbGwiPgogICAgICA8c3RvcAogICAgICAgIG9mZnNldD0iMC41OTk5NjQiCiAgICAgICAgc3RvcC1jb2xvcj0iIzIyMmM1OSIKICAgICAgICBzdG9wLW9wYWNpdHk9IjEiCiAgICAgID4KICAgICAgICA8YW5pbWF0ZQogICAgICAgICAgYXR0cmlidXRlTmFtZT0ib2Zmc2V0IgogICAgICAgICAgdmFsdWVzPSItMjsgLTI7IDEiCiAgICAgICAgICBrZXlUaW1lcz0iMDsgMC4yNTsgMSIKICAgICAgICAgIGR1cj0iMnMiCiAgICAgICAgICByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIKICAgICAgICAvPgogICAgICA8L3N0b3A+CiAgICAgIDxzdG9wCiAgICAgICAgb2Zmc2V0PSIxLjU5OTk2IgogICAgICAgIHN0b3AtY29sb3I9IiM3NTY5YjAiCiAgICAgICAgc3RvcC1vcGFjaXR5PSIxIgogICAgICA+CiAgICAgICAgPGFuaW1hdGUKICAgICAgICAgIGF0dHJpYnV0ZU5hbWU9Im9mZnNldCIKICAgICAgICAgIHZhbHVlcz0iLTE7IC0xOyAyIgogICAgICAgICAga2V5VGltZXM9IjA7IDAuMjU7IDEiCiAgICAgICAgICBkdXI9IjJzIgogICAgICAgICAgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiCiAgICAgICAgLz4KICAgICAgPC9zdG9wPgogICAgICA8c3RvcAogICAgICAgIG9mZnNldD0iMi41OTk5NiIKICAgICAgICBzdG9wLWNvbG9yPSIjMjIyYzU5IgogICAgICAgIHN0b3Atb3BhY2l0eT0iMSIKICAgICAgPgogICAgICAgIDxhbmltYXRlCiAgICAgICAgICBhdHRyaWJ1dGVOYW1lPSJvZmZzZXQiCiAgICAgICAgICB2YWx1ZXM9IjA7IDA7IDMiCiAgICAgICAgICBrZXlUaW1lcz0iMDsgMC4yNTsgMSIKICAgICAgICAgIGR1cj0iMnMiCiAgICAgICAgICByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIKICAgICAgICAvPgogICAgICA8L3N0b3A+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KPC9zdmc+Cg==");var va;!function(e){e.Argument="#cfa7ff",e.Keyword="#5af78e",e.Error="#f07278",e.Label="rgba(255, 255, 255, 0.7)",e.Punctuation="#81ceee"}(va||(va={}));const Ma=a.ZP.div(["width:100%;background:rgba(255,255,255,0.3);position:absolute;left:0;z-index:0;transform:translate3d(0,0,0);transition-property:height;"]),wa=a.ZP.div(["position:relative;z-index:1;"]);function Da(e){const t=(0,r.useRef)();(0,r.useLayoutEffect)((()=>{t.current.scrollTop=t.current.scrollHeight}),[e.counter]);const n=(0,r.useRef)();let a;if((0,r.useEffect)((()=>{if(!e.selectedLines)return;const t=e.selectedLines.end-e.selectedLines.start,r=window.setTimeout((()=>{n.current.style.height=20*(t+1)+"px"}),1e3);return()=>clearTimeout(r)}),[e.selectedLines]),e.selectedLines){const t=e.selectedLines.end-e.selectedLines.start;a=r.createElement(Ma,{ref:n,style:{top:20*(e.selectedLines.start+1),transitionTimingFunction:`steps(${t+2}, jump-none)`,transitionDuration:.08*t+"s",height:0}})}return r.createElement(Oa,{ref:t},r.createElement(Pa,null,r.createElement(wa,null,function(e,t){if(!e.length)return r.createElement(ja,{key:"cursor"},"$ ",r.createElement(Ta,null));const n=e.map((e=>r.createElement(r.Fragment,{key:e.id},e.isCommand?r.createElement(ja,null,"$",e.text.length>0?" ":""):null,function(e,t,n){let a,o=e;const l=o.indexOf("#");l>-1&&(o=e.substring(0,l),a=r.createElement(ka,null,e.substring(l,e.length)));const i=o.split(" "),s=[];e:for(const[e,a]of i.entries())if(t||!/(https?:\/\/\S+)/g.test(a)){if(n)for(const t of n){const n=Sa(a,t);if(n){s.push(r.createElement(Na,{key:`${t.key}-${e}`},n," "));continue e}}s.push(r.createElement(Na,{key:e},a," "))}else s.push(r.createElement(r.Fragment,{key:e},r.createElement("a",{key:e,style:{color:"#feaa01",textDecoration:"underline"},href:a,target:"_blank",rel:"noopener noreferrer"},a)," "));return r.createElement(r.Fragment,null,s,a)}(e.text,e.isCommand,t),e.isCurrent&&e.isCommand?r.createElement(Ta,null):null,r.createElement("br",null))));return n}(e.lines,e.highlights)),a))}function Sa(e,t){const n=new RegExp(`(${t.keywords.join("|")})`);return n.test(e)?e.split(n).map(((e,n)=>{if(e)return n%2==0?r.createElement("span",{key:n},e):r.createElement("span",{key:`${t.key}-${n}`,style:{color:t.color}},e)})).filter(Boolean):null}const Na=a.ZP.span(["user-select:none;"]),ja=a.ZP.span(["user-select:none;color:rgb(204,204,204);"]),ka=a.ZP.span(["user-select:none;color:rgb(255,255,255,0.4);"]),Ta=a.ZP.span(["display:inline-block;width:6px;height:15px;background:#ffffff;vertical-align:middle;"]),Oa=a.ZP.div(["background:#04162c;height:inherit;overflow-y:auto;border-bottom-left-radius:5px;border-bottom-right-radius:5px;"]),Pa=a.ZP.div(["font-size:12px;font-family:Menlo,DejaVu Sans Mono,Consolas,Lucida Console,monospace;line-height:20px;white-space:pre-wrap;margin:10px 16px;position:relative;"]);function za(e){return new Promise((t=>window.setTimeout(t,e)))}function Za(e){const t=(0,r.useRef)(0),n=(0,r.useMemo)((()=>async function*(e,t){let n=0,r=0,a=!1;const o=[];if(t>0){for(let n=0;n<t;n++)o.push({id:n,text:e[n].text,isCommand:e[n].isCommand,isCurrent:n===t});yield o}for(;;){if(!(t<e.length))return yield o,o;if(e[t].isCommand)if(n>e[t].text.length)o[t].isCurrent=t===e.length-1,n=0,yield o,await za(300),t+=1;else{const r=e[t].delay;isNaN(r)||(yield o,await za(r),yield o),0===n&&(await za(100),o.push({id:t,text:"",isCommand:e[t].isCommand,isCurrent:!0}),yield o,await za(600)),o[t].text=e[t].text.substring(0,n),n+=1}else{const l=e[t].delay;isNaN(l)||(await za(l),yield o);const i=e[t].frames;if(i)if(r<i.length){const e=i[r]();0!==r||a||(a=!0,o.push({id:t,text:e.text,isCurrent:!1,isCommand:!1})),o[t].text=e.text,isNaN(e.delay)||(yield o,await za(e.delay),yield o),r+=1}else a&&e[t+1]&&(o[t].text=e[t].text,n=0,r=0,t+=1,a=!1),r=0;else o.push({id:t,text:e[t].text,isCommand:!1,isCurrent:!1}),yield o,n=0,t+=1}yield o}}(e.lines,t.current)),[e.lines]),[a,o]=(0,r.useState)(0),[l,i]=(0,r.useState)(!1),s=(0,r.useRef)([]);(0,r.useEffect)((()=>{let r,a;async function l(){const{value:r,done:c}=await n.next();if(r){if(r.length){const e=r[r.length-1].id+1;e>t.current&&(t.current=e)}s.current=r,o((e=>e+1))}if(c)return i(!0),e.onCompleted&&e.onCompleted(),void o((e=>e+1));a=requestAnimationFrame(l)}function c(){a=requestAnimationFrame(l)}return e.startDelay?r=window.setTimeout(c,e.startDelay):c(),()=>{cancelAnimationFrame(a),clearTimeout(r)}}),[e.startDelay,e.lines,n]);let c=s.current;return e.stopped&&(c=e.lines.map(((t,n)=>({id:n,text:t.text,isCommand:t.isCommand,isCurrent:n===e.lines.length-1})))),r.createElement(ga,{title:"Terminal"},r.createElement(Da,{lines:c,completed:l,counter:a,highlights:e.highlights,selectedLines:e.selectedLines}))}const La=e=>[{text:xa(d.Z.getConfigureADUrl(e.id)),isCommand:!0},{text:"Running...",isCommand:!1,delay:800},{text:`\nversion: v3\nteleport:\n  auth_token: ${e.id}\n  proxy_server: ${window.location.hostname}:${window.location.port||"443"}\n\nauth_service:\n  enabled: no\nssh_service:\n  enabled: no\nproxy_service:\n  enabled: no\n\nwindows_desktop_service:\n  enabled: yes\n  ldap:\n    addr:        127.0.0.1:636\n    domain:      TELEPORT\n    username:    example\n    server_name: desktop.teleport.example\n    insecure_skip_verify: false\n    ldap_ca_cert: |\n      -----THIS IS JUST AN EXAMPLE-----\n  discovery:\n    base_dn: '*'\n  labels:\n    teleport.internal/resource-id: ${e.internalResourceId}\n`,isCommand:!1,delay:500},{text:"Desktop Access Configuration Reference: https://goteleport.com/docs/desktop-access/reference/configuration/",isCommand:!1,delay:500},{text:"",isCommand:!0}],Ua={start:4,end:29},Ra=[{key:"keyword",color:va.Keyword,keywords:["Invoke-WebRequest","Invoke-Expression"]},{key:"arg",color:va.Argument,keywords:["-Uri"]}];function Qa(e){const{joinToken:t}=It(Le.Desktop);return r.createElement(Za,{lines:La(t),highlights:Ra,selectedLines:e.isCopying?Ua:null,stopped:e.isCopying})}function Ya(e){return null}function Ga(e){const t=e.items.map(((t,n)=>r.createElement(Wa,{key:n,active:n===e.activeIndex,onClick:()=>e.onSelect(n)},r.createElement(Fa,null,r.createElement(b.EKh,null)),t)));return r.createElement(Ba,null,t)}const Ba=a.ZP.div(["background:#0a102c;display:flex;"]),Wa=a.ZP.div(["background:rgba(255,255,255,0.1);padding:8px 20px 10px 15px;cursor:pointer;position:relative;&:after{content:'';position:absolute;bottom:0;height:2px;left:0;right:0;background:",";}"],(e=>e.active?"linear-gradient(to right, #ec008c, #fc6767)":"transparent")),Fa=(0,a.ZP)("span")(["font-size:14px;margin-right:10px;position:relative;top:1px;"]);var Ha;function Va(e){const[t,n]=(0,r.useState)(0),a=r.Children.map(e.children,(e=>e.type===Ya?{name:e.props.name,content:e.props.code,language:e.props.language}:null)).filter(Boolean),o=a.map((e=>e.name)),{content:l,language:i}=a[t],s=function(e,t){if(t===Ha.YAML)return function(e){if(!e)return[];const t=[{key:"string",keywords:["'\\*'"],color:va.Keyword},{key:"certificate",match:/(-----.*?-----)/,color:va.Punctuation}],n=e.split("\n"),a=[];for(const[e,o]of n.entries()){const n=Ja(o,": |",e,t);if(n){a.push(n);continue}const l=Ja(o,":",e,t);l?a.push(l):o?a.push(r.createElement("div",{key:e},Ka(o,t))):a.push(r.createElement("div",{key:e}," "))}return a}(e);throw new Error("Language not supported")}(l,i),c=[];if(l){const e=l.split("\n").length;for(let t=0;t<=e;t++)c.push(r.createElement(no,{key:t,"data-line-number":t+1,active:t===e}))}else c.push(r.createElement(no,{key:0,"data-line-number":1,active:!0}));return r.createElement(ia,null,r.createElement(pa,{title:e.title}),r.createElement(Ga,{items:o,activeIndex:t,onSelect:n}),r.createElement(ma,{style:{height:585}},r.createElement(da,{style:{display:"flex"}},r.createElement(to,null,c),r.createElement(ro,null,s,r.createElement(ao,null,r.createElement(eo,null))))))}function Ja(e,t,n,a){if(!e.includes(t))return;const o=e.indexOf(t);let l=e.substring(o+t.length,e.length);return r.createElement("div",{key:n},r.createElement(qa,null,e.substring(0,o)),r.createElement($a,null,t),Ka(l,a))}function Ka(e,t){for(const n of t)if(n.match&&n.match.test(e))return e.split(n.match).map(((e,t)=>{if(e)return t%2==0?r.createElement("span",{key:t},e):r.createElement("span",{key:`${n.key}-${t}`,style:{color:n.color}},e)})).filter(Boolean);const n=e.split(" "),a=[];e:for(const[e,o]of n.entries()){for(const n of t)if(n.keywords){const t=Xa(o,n);if(t){a.push(r.createElement("span",{key:`${n.key}-${e}`},t," "));continue e}}a.push(r.createElement("span",{key:e},o," "))}return a}function Xa(e,t){const n=new RegExp(`(${t.keywords.join("|")})`);return n.test(e)?e.split(n).map(((e,n)=>{if(e)return n%2==0?r.createElement("span",{key:n},e):r.createElement("span",{key:`${t.key}-${n}`,style:{color:t.color}},e)})).filter(Boolean):null}!function(e){e[e.YAML=0]="YAML"}(Ha||(Ha={}));const qa=a.ZP.span(["color:#d4656b;"]),$a=a.ZP.span(["color:#81ceee;"]),_a=(0,a.F4)(["0%{opacity:0;}"]),eo=a.ZP.span(["display:inline-block;width:2px;height:15px;background:#ffffff;vertical-align:middle;animation:"," 1.5s steps(2) infinite;"],_a),to=a.ZP.div(["user-select:none;width:55px;"]),no=a.ZP.div(["background:",";color:",";text-align:right;padding-right:20px;&:before{content:attr(data-line-number);}"],(e=>e.active?"rgba(0, 0, 0, 0.3)":"none"),(e=>e.active?"rgba(255, 255, 255, 0.6)":"rgba(255, 255, 255, 0.3)")),ro=a.ZP.div(["width:100%;"]),ao=a.ZP.div(["background:rgba(0,0,0,0.3);width:100%;"]),oo=e=>`version: v3\nteleport:\n  auth_token: ${e.id}\n  proxy_server: ${window.location.hostname}:${window.location.port||"443"}\n\nauth_service:\n  enabled: no\nssh_service:\n  enabled: no\nproxy_service:\n  enabled: no\n\nwindows_desktop_service:\n  enabled: yes\n  ldap:\n    addr:        127.0.0.1:636\n    domain:      TELEPORT\n    username:    example\n    server_name: desktop.teleport.example\n    insecure_skip_verify: false\n    ldap_ca_cert: |\n      -----THIS IS JUST AN EXAMPLE-----\n  discovery:\n    base_dn: '*'\n  labels:\n    teleport.internal/resource-id: ${e.internalResourceId}`;var lo;function io(){const e=xt(),[t,n]=(0,r.useState)(lo.Original),{content:a}=(e=>[{kind:lo.Original,content:""},{kind:lo.Pasted,content:oo(e)}])(e).find((e=>e.kind===t));return(0,r.useEffect)((()=>{n(lo.Original);const e=window.setTimeout((()=>n(lo.Pasted)),1500);return()=>clearTimeout(e)}),[]),r.createElement(so,null,r.createElement(Va,{title:"Your IDE"},r.createElement(Ya,{language:Ha.YAML,name:"/etc/teleport.yaml",code:a})))}!function(e){e[e.Original=0]="Original",e[e.Pasted=1]="Pasted"}(lo||(lo={}));const so=(0,a.ZP)("div")(["user-select:none;"]),co=[{text:"sudo systemctl start teleport",isCommand:!0},{text:"sudo systemctl status teleport",isCommand:!0},{text:"• teleport.service - Teleport SSH Service\n   Loaded: loaded\n   Active: active (running)",isCommand:!1,delay:100},{text:"logout # We'll take it from here",isCommand:!0},{text:"\n",isCommand:!1,delay:30}],uo=["_","_","_","-","`","`","'","´","-","_","_","_"],mo=[{key:"keyword",color:va.Keyword,keywords:["sudo","systemctl","active","\\(running\\)","•","wait","logout","✔"]},{key:"error",color:va.Error,keywords:["✖","Oh","no!"]},{key:"label",color:va.Label,keywords:["Hostname:","Address:"]}];function po(){const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)([...co]),{active:o,result:l,timedOut:i,timeout:s}=wt(),c=(0,r.useRef)(0);(0,r.useEffect)((()=>{c.current=l?null:s}),[s,l]);const[u,m]=(0,r.useState)(!1),[d,p]=(0,r.useState)(!1),[g,b]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(l&&!g)return a((e=>[...e,{isCommand:!1,text:""},{isCommand:!1,text:"✔ Found your Teleport node"},{isCommand:!1,text:`  Hostname: ${l.hostname}`},{isCommand:!1,text:`   Address: ${l.addr}`}])),void b(!0);g||(e&&o&&!u&&a((e=>[...e,{text:"wait your.teleport.instance",isCommand:!0},{isCommand:!1,text:""},{isCommand:!1,text:"- Waiting to hear from your Teleport node",frames:uo.map((e=>()=>{if(Date.now()>c.current)return{text:"- Waiting to hear from your Teleport node"};const{minutes:t,seconds:n}=function(e){if(e<0)return{minutes:0,seconds:0};return{minutes:Math.floor(e/6e4),seconds:Math.floor(e%6e4/1e3).toFixed(0).padStart(2,"0")}}(c.current-Date.now());return{text:`${e} Waiting to hear from your Teleport node (${t}:${n} remaining)`,delay:70}}))}])),i&&!d&&a((e=>[...e,{isCommand:!1,text:""},{isCommand:!1,text:"✖ Oh no! We couldn't find your Teleport node."}])),e&&m(o),p(i))}),[l,i,o,g,d,u,e]),r.createElement(go,null,r.createElement(Za,{stopped:null!==l,lines:n,startDelay:800,highlights:mo,onCompleted:()=>t(!0)}))}const go=a.ZP.div(["--content-height:400px;"]);function bo(e){return r.createElement(fa,null,r.createElement(ha,null,r.createElement(Ea,null,r.createElement(b.TUt,null)),"2. Copy the outputted Teleport config"),r.createElement(ya,null,r.createElement(o.xv,{mb:4},"You'll need this in the next step."),r.createElement(Me.DF,{onClick:()=>e.onNext()},"Next")))}function ho(e){return r.createElement(fa,null,r.createElement(ha,null,r.createElement(Ea,null,r.createElement(b.EKh,null)),"3. Create /etc/teleport.yaml"),r.createElement(ya,null,r.createElement(o.xv,{mb:4},"Paste the output you just copied into /etc/teleport.yaml."),r.createElement(Me.DF,{onClick:()=>e.onNext()},"Next")))}var Eo=n(2010);function fo(e){return r.createElement(fa,null,r.createElement(ha,null,r.createElement(Ea,null,r.createElement(xo,null)),"4. Start Teleport"),e.children)}function yo(e){const{active:t,result:n,start:a,timedOut:l}=wt();return l?r.createElement(fo,null,r.createElement(ya,null,r.createElement(o.xv,{mb:4},"We looked everywhere but we couldn't find your Teleport node."),r.createElement(Me.DF,{disabled:t,onClick:()=>a()},"Retry"))):n?r.createElement(fo,null,r.createElement(ya,null,r.createElement(o.xv,{mb:4},"Success! We've detected the new Teleport node you configured."),r.createElement(Me.DF,{onClick:()=>e.onNext()},"Next"))):r.createElement(fo,null,r.createElement(ya,null,r.createElement(o.xv,{mb:4},"Once you've started Teleport, we'll detect it here."),r.createElement(Me.DF,{disabled:!n,onClick:()=>e.onNext()},"Next")))}const xo=a.ZP.div(["width:30px;height:30px;background:url(",") no-repeat;background-size:contain;top:1px;position:relative;"],Eo);function Io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Io(Object(n),!0).forEach((function(t){Co(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Co(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vo,Mo;!function(e){e[e.RunConfigureScript=0]="RunConfigureScript",e[e.CopyOutput=1]="CopyOutput",e[e.CreateConfig=2]="CreateConfig",e[e.StartTeleport=3]="StartTeleport",e[e.Finished=4]="Finished"}(vo||(vo={})),function(e){e[e.RunCommand=0]="RunCommand",e[e.CreateConfig=1]="CreateConfig",e[e.StartTeleport=2]="StartTeleport"}(Mo||(Mo={}));const wo=[{kind:vo.RunConfigureScript,animation:Mo.RunCommand},{kind:vo.CopyOutput,animation:Mo.RunCommand},{kind:vo.CreateConfig,animation:Mo.CreateConfig},{kind:vo.StartTeleport,animation:Mo.StartTeleport},{kind:vo.Finished,animation:null}],Do={transition:"opacity 250ms, transform 250ms",opacity:0,width:"100%"},So={entering:{opacity:0,transform:"translateX(50px)"},entered:{opacity:1,transform:"translateX(0%)"},exiting:{opacity:0,transform:"translateX(-50px)"},exited:{opacity:0,transform:"translateX(-50px)"}},No={entering:{opacity:0,transform:"translateY(50px)"},entered:{opacity:1,transform:"translateY(0%)"},exiting:{opacity:0,transform:"translateY(-50px)"},exited:{opacity:0,transform:"translateY(-50px)"}},jo=a.ZP.div(["width:650px;display:flex;flex-direction:column;max-width:875px;flex:1 0 850px;align-items:flex-end;margin-left:-101px;position:relative;z-index:1;padding-right:20px;"]),ko=a.ZP.div(["position:relative;width:calc(100% - 100px);padding:20px 100px;left:100px;"]),To=(0,a.F4)(["from{width:0;}to{width:260px;}"]),Oo=a.ZP.div(["position:absolute;top:43px;border-bottom-left-radius:5px;border-bottom-right-radius:5px;overflow:hidden;animation:"," 1s ease-in forwards;svg{path{fill:none;}}"],To),Po=(0,a.F4)(["0%{stroke-dashoffset:-250;}100%{stroke-dashoffset:0;}"]),zo=a.ZP.svg(["position:absolute;z-index:1;path{stroke:#278348;stroke-width:4;fill:none;}"]),Zo=(0,a.ZP)(zo)(["stroke-dasharray:5,20;stroke-dashoffset:0;z-index:2;animation:"," 5s cubic-bezier(0.78,0.11,0.27,0.94) alternate infinite 0.6s;path{stroke:#32c842;}"],Po);function Lo(e){return r.createElement(Oo,{style:{width:e.width,height:e.height,left:-e.width}},r.createElement(zo,{width:e.width,height:e.height},e.children),r.createElement(Zo,{width:e.width,height:e.height},e.children))}function Uo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ro{constructor(){Uo(this,"x0",void 0),Uo(this,"y0",void 0),Uo(this,"x1",null),Uo(this,"y1",null),Uo(this,"path","")}moveTo(e,t){this.path+=`M${this.x0=this.x1=+e},${this.y0=this.y1=+t}`}closePath(){null!==this.x1&&(this.x1=this.x0,this.y1=this.y0,this.path+="Z")}lineTo(e,t){this.path+=`L${this.x1=+e},${this.y1=+t}`}bezierCurveTo(e,t,n,r,a,o){this.path+=`C${+e},${+t},${+n},${+r},${this.x1=+a},${this.y1=+o}`}}function Qo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yo(e){return e<0?-1:1}function Go(e,t){const n=e.x1-e.x0;return n?(3*(e.y1-e.y0)/n-t)/2:t}function Bo(e,t,n){const r=e.x0,a=e.y0,o=e.x1,l=e.y1,i=(o-r)/3;e.path.bezierCurveTo(r+i,a+i*t,o-i,l-i*n,o,l)}function Wo(e,t,n){const r=e.x1-e.x0,a=t-e.x1,o=(e.y1-e.y0)/(r||a<0&&-0),l=(n-e.y1)/(a||r<0&&-0),i=(o*a+l*r)/(r+a);return(Yo(o)+Yo(l))*Math.min(Math.abs(o),Math.abs(l),.5*Math.abs(i))||0}class Fo{constructor(e){Qo(this,"path",void 0),Qo(this,"line",void 0),Qo(this,"x0",void 0),Qo(this,"x1",void 0),Qo(this,"y0",void 0),Qo(this,"y1",void 0),Qo(this,"t0",void 0),Qo(this,"p",void 0),this.path=e}areaStart(){this.line=0}areaEnd(){this.line=NaN}lineStart(){this.x0=this.x1=this.y0=this.y1=this.t0=NaN,this.p=0}lineEnd(){switch(this.p){case 2:this.path.moveTo(this.x1,this.y1);break;case 3:Bo(this,this.t0,Go(this,this.t0))}(this.line||0!==this.line&&1===this.p)&&this.path.closePath(),this.line=1-this.line}point(e,t){let n=NaN;if(t=+t,(e=+e)!==this.x1||t!==this.y1){switch(this.p){case 0:this.p=1,this.line?this.path.lineTo(e,t):this.path.moveTo(e,t);break;case 1:this.p=2;break;case 2:this.p=3,Bo(this,Go(this,n=Wo(this,e,t)),n);break;default:Bo(this,this.t0,n=Wo(this,e,t))}this.x0=this.x1,this.x1=e,this.y0=this.y1,this.y1=t,this.t0=n}}}const Ho=a.ZP.div(["color:rgba(0,0,0,0.8);display:flex;align-items:center;color:#9cb974;font-size:12px;font-weight:500;margin-bottom:5px;"]),Vo=a.ZP.span(["margin-right:5px;font-size:14px;font-family:Menlo,DejaVu Sans Mono,Consolas,Lucida Console,monospace;"]),Jo=a.ZP.div(["display:flex;align-items:center;justify-content:center;padding:0 7px;margin-left:1px;"]),Ko=(0,a.ZP)(Jo)(["background:#323436;box-sizing:border-box;border-bottom:1px solid #92c7ef;"]),Xo=a.ZP.div(["background:url(",") no-repeat;width:15px;height:13px;position:relative;top:1px;background-size:contain;"],"data:image/svg+xml;base64,PHN2ZyBkYXRhLW5hbWU9IkxheWVyIDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDYuOTUgNS44NSI+PHBhdGggZD0iTTYuNTguMzhILjM4djEuMzloMi4yOXYzLjdoMS42di0zLjdoMi4zVi4zOFoiIHN0eWxlPSJmaWxsOndoaXRlIi8+PC9zdmc+Cg=="),qo=a.ZP.div(["display:flex;height:30px;"]),$o=a.ZP.div(["background:#d9d9d9;font-size:12px;display:flex;justify-content:space-between;padding:5px 10px;line-height:1;color:rgba(0,0,0,0.8);border-top-left-radius:5px;border-top-right-radius:5px;align-items:center;font-weight:bold;"]),_o=a.ZP.div(["background:white;padding:13px 10px 5px;font-size:12px;line-height:1;"]),el=a.ZP.div(["background:url(",") no-repeat;width:16px;height:16px;background-size:contain;flex:0 0 16px;"],"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjBweCIgeT0iMHB4IgogICAgIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIKICAgICB2aWV3Qm94PSIwIDAgNDggNDgiCiAgICAgc3R5bGU9IiBmaWxsOiMwMDAwMDA7Ij4KICA8cGF0aCBmaWxsPSIjZmZmIgogICAgICAgIGQ9Ik0yMCAyNS4wMjZMNS4wMTEgMjUgNS4wMTIgMzcuNzQ0IDIwIDM5LjgxOHpNMjIgMjUuMDNMMjIgNDAuMDk1IDQyLjk5NSA0MyA0MyAyNS4wNjZ6TTIwIDguMjU2TDUgMTAuMzggNS4wMTQgMjMgMjAgMjN6TTIyIDcuOTczTDIyIDIzIDQyLjk5NSAyMyA0Mi45OTUgNXoiLz4KPC9zdmc+Cg=="),tl=a.ZP.div(["background:#000000;display:flex;justify-content:space-between;border-bottom-left-radius:5px;border-bottom-right-radius:5px;padding-right:5px;height:30px;color:white;font-size:10px;align-items:center;"]),nl=a.ZP.div(["color:rgba(0,0,0,0.5);font-size:12px;margin-bottom:5px;"]),rl=a.ZP.div(["color:black;font-weight:bold;font-size:15px;margin:10px 0;"]),al=a.ZP.div(["color:black;font-size:13px;display:flex;justify-content:space-between;"]),ol=a.ZP.div(["margin-top:3px;font-size:11px;color:rgba(0,0,0,0.6);"]),ll=a.ZP.div(["font-family:Menlo,DejaVu Sans Mono,Consolas,Lucida Console,monospace;font-size:13px;color:rgba(0,0,0,0.8);"]),il=a.ZP.div(["font-size:10px;margin-bottom:10px;"]);function sl(e){return r.createElement(r.Fragment,null,r.createElement($o,null,r.createElement("div",null,"Teleport"),r.createElement(b.X1q,{color:"black"})),r.createElement(_o,null,r.createElement(Ho,null,r.createElement(Vo,null,"✔")," Teleport found this Desktop"),r.createElement(rl,null,e.computerName),r.createElement(o.kC,{justifyContent:"space-between"},r.createElement(il,null,r.createElement(nl,null,"Operating System"),r.createElement(al,null,e.os),r.createElement(ol,null,e.osVersion)),r.createElement(il,null,r.createElement(o.kC,{flexDirection:"column",alignItems:"flex-end"},r.createElement(nl,null,"Address"),r.createElement(ll,null,e.address))))),r.createElement(tl,null,r.createElement(qo,null,r.createElement(Jo,null,r.createElement(el,null)),r.createElement(Ko,null,r.createElement(Xo,null))),r.createElement("div",null,function(){const e=new Date;return`${e.getHours()}:${e.getMinutes().toString().padStart(2,"0")}`}())))}const cl=(0,a.F4)(["from{opacity:0;}to{opacity:1;}"]),ul=a.ZP.div(["margin-bottom:30px;"]),ml=a.ZP.div(["box-sizing:border-box;color:rgba(0,0,0,0.4);position:relative;animation:"," 0.9s ease-in 1s forwards;box-shadow:0 10px 20px 0 rgba(0,0,0,0.3);min-width:330px;max-width:500px;display:flex;flex-direction:column;justify-content:center;opacity:0;"],cl);function dl(e){const t=(0,r.useRef)(),[n,a]=(0,r.useState)(null);let o;return(0,r.useLayoutEffect)((()=>{e.desktopServiceElement&&t.current&&e.containerElement&&a(function(e,t,n){if(!t||!e||!n)return null;const r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),o=n.getBoundingClientRect(),l=a.left-r.right,i=new Ro,s=new Fo(i);s.lineStart();const c=a.top-o.top+a.height/2-1,u=r.top-o.top+r.height/2;return s.point(0,u-8),s.point(40,u-8),s.point(l-10,c+2),s.point(l,c+2),s.lineEnd(),{width:l,height:o.height,path:i.path}}(e.desktopServiceElement,t.current,e.containerElement))}),[e.desktopServiceElement&&t.current&&e.containerElement]),n&&(o=r.createElement(Lo,{width:n.width,height:n.height},r.createElement("path",{d:n.path}))),r.createElement(ul,{ref:t},o,r.createElement(ml,null,r.createElement(sl,{os:e.os,osVersion:e.osVersion,address:e.address,computerName:e.computerName})))}const pl=a.ZP.div(["width:80px;height:16px;padding:0 7px;box-sizing:border-box;background:#f5e6fe;margin-bottom:8px;border-radius:5px;display:flex;align-items:center;position:relative;z-index:5;"]),gl=a.ZP.div(["display:flex;align-items:center;"]),bl=(0,a.F4)(["46%{opacity:1;}50%{opacity:0;}54%{opacity:1;}"]),hl=(0,a.F4)(["27%{opacity:1;}30%{opacity:0;}33%{opacity:1;}"]),El=(0,a.F4)(["68%{opacity:1;}70%{opacity:0;}72%{opacity:1;}"]),fl=a.ZP.div(["width:6px;height:6px;border-radius:50%;margin-right:5px;"]),yl=(0,a.ZP)(fl)(["background:#31c842;"]),xl=(0,a.ZP)(yl)(["animation:"," 8s step-start 0s infinite;"],bl),Il=(0,a.ZP)(yl)(["animation:"," 10s step-start 0s infinite;"],hl),Al=(0,a.ZP)(yl)(["animation:"," 12s step-start 0s infinite;"],El),Cl=a.ZP.div(["display:flex;flex:1;align-items:flex-end;flex-direction:column;"]),vl=a.ZP.div(["height:3px;border-radius:5px;background:rgba(0,0,0,0.4);margin-left:5px;overflow:hidden;"]),Ml=a.ZP.div(["display:flex;justify-content:space-between;margin-bottom:2px;"]);function wl(e){return r.createElement(pl,null,r.createElement(gl,null,e.light),r.createElement(Cl,null,r.createElement(Ml,null,r.createElement(vl,{style:{width:5}}),r.createElement(vl,{style:{width:30}})),r.createElement(vl,{style:{width:20}})))}const Dl=(0,a.F4)(["0%{box-shadow:0 0 0 0 rgba(255,255,255,0),0 0 0 40px rgba(255,255,255,0.18);}100%{box-shadow:0 0 0 40px rgba(255,255,255,0.18),0 0 0 40px rgba(204,233,251,0);}"]),Sl=a.ZP.div(["display:flex;flex-direction:column;position:relative;padding-bottom:10px;justify-content:center;height:82px;"]),Nl=a.ZP.div(["animation:"," 1.5s linear infinite;border-radius:50%;width:100px;height:100px;position:absolute;z-index:-1;top:50%;left:50%;transform:translate(-50%,calc(-50% - 10px));&::after{z-index:0;border-radius:50%;position:absolute;content:'';display:block;width:100px;height:100px;background:rgba(34,44,89,1);transform:scale(1);}"],Dl);function jl(e){return r.createElement(Sl,{ref:e.desktopServiceRef},r.createElement(Nl,null),r.createElement(wl,{light:r.createElement(xl,null)}))}const kl=a.ZP.div(["display:flex;flex-direction:column;position:relative;padding-bottom:10px;"]);function Tl(){return r.createElement(kl,null,r.createElement(wl,{light:r.createElement(xl,null)}),r.createElement(wl,{light:r.createElement(Il,null)}),r.createElement(wl,{light:r.createElement(Al,null)}))}const Ol=a.ZP.div(["font-family:Menlo,DejaVu Sans Mono,Consolas,Lucida Console,monospace;font-size:12px;color:rgba(255,255,255,0.7);"]),Pl=a.ZP.div(["font-size:16px;"]),zl=a.ZP.div(["height:92px;margin-bottom:15px;"]),Zl=a.ZP.div(["display:inline-flex;position:relative;"]),Ll=a.ZP.div(["position:absolute;height:94px;width:257px;top:0;left:125px;right:121px;border-bottom-left-radius:5px;border-bottom-right-radius:5px;overflow:hidden;"]);function Ul(){return r.createElement(Ll,null,r.createElement(zo,{width:254,height:94,viewBox:"0 0 254 93.5"},r.createElement("path",{d:"M1.5,0V76.74c0,8.43,7.62,15.26,17.02,15.26H235.48c9.4,0,17.02-6.83,17.02-15.26V32.42"})),r.createElement(Zo,{width:254,height:94,viewBox:"0 0 254 93.5"},r.createElement("path",{d:"M1.5,0V76.74c0,8.43,7.62,15.26,17.02,15.26H235.48c9.4,0,17.02-6.83,17.02-15.26V32.42"})))}const Rl=a.ZP.div(["width:250px;display:flex;align-items:center;flex-direction:column;"]);function Ql(e){const t=function(){const{hostname:e,port:t}=window.location;return"443"!==t&&t?`${e}:${t}`:e}();return r.createElement("div",null,r.createElement(Zl,null,r.createElement(Ul,null),r.createElement(Rl,null,r.createElement(zl,null,r.createElement(Tl,null)),r.createElement(Pl,null,"Teleport Proxy"),r.createElement(Ol,null,t)),r.createElement(Rl,null,r.createElement(zl,null,r.createElement(jl,{desktopServiceRef:e.desktopServiceRef})),r.createElement(Pl,null,"Desktop Service"),r.createElement(Ol,null,e.result&&e.result.hostname))))}var Yl=n(6828),Gl=n(7885);const Bl=a.ZP.div(["margin-top:120px;margin-left:-40px;display:flex;"]),Wl=a.ZP.div(["margin-top:100px;"]),Fl=a.ZP.div(["position:relative;margin-left:125px;margin-top:-43px;"]),Hl=(0,a.F4)(["from{opacity:0;}to{opacity:1;}"]),Vl=a.ZP.div(["box-sizing:border-box;color:rgba(0,0,0,0.8);border-radius:10px;box-shadow:0 10px 15px rgba(0,0,0,0.5);background:white;position:relative;animation:"," 0.9s ease-in 1s forwards;display:flex;flex-direction:column;justify-content:center;padding:10px 10px 10px 15px;opacity:0;width:240px;"],Hl),Jl=(0,a.ZP)(Gl.OL)(["background:#0091ea;color:white;border-radius:5px;margin-top:10px;text-decoration:none;padding:3px 10px;text-align:center;cursor:pointer;&:hover{background:#4db2f0;}"]),Kl=a.ZP.div(["color:#f50057;font-weight:bold;font-size:16px;"]),Xl=[{title:"Install Active Directory",command:xa(d.Z.getInstallADDSPath())},{title:"Install AD Certificate Services",command:xa(d.Z.getInstallADCSPath())}];function ql(e){return r.createElement(ht,{timeout:3e5},r.createElement(Mt,{timeout:6e5,interval:3e3,resourceKind:Le.Desktop},e.children))}const $l={kind:Le.Desktop,icon:r.createElement(b.Hi7,null),wrapper:e=>r.createElement(ql,null,e),shouldPrompt:e=>0!==e&&e<3,views:[{title:"Select Resource"},{title:"Install Active Directory",component:function(e){return r.createElement(o.xu,null,r.createElement(Se,null,"Install Active Directory"),r.createElement(o.xv,{mb:4},"If you haven't already, install Active Directory and AD Certificate Services."),function(e){return e.map(((e,t)=>r.createElement(Qe,{key:t,stepNumber:t+1,title:e.title,text:e.command})))}(Xl),r.createElement(we,{onProceed:()=>e.nextStep()}))}},{title:"Connect Teleport",component:function(e){const[t,n]=(0,r.useState)(vo.RunConfigureScript),a=wo.find((e=>e.kind===t));let o;return null!==a.animation&&(o=r.createElement(ko,null,r.createElement(jo,null,r.createElement(la,{mode:"out-in"},r.createElement($r.ZP,{key:a.animation,timeout:250,mountOnEnter:!0,unmountOnExit:!0},(e=>r.createElement("div",{style:Ao(Ao({},Do),So[e])},a.animation===Mo.RunCommand&&r.createElement(r.Suspense,{fallback:r.createElement(ga,{title:"Terminal"})},r.createElement(Qa,{isCopying:a.kind===vo.CopyOutput})),a.animation===Mo.CreateConfig&&r.createElement(io,null),a.animation===Mo.StartTeleport&&r.createElement(po,null)))))))),r.createElement(ba,null,r.createElement(la,{mode:"out-in"},r.createElement($r.ZP,{key:t,timeout:250,mountOnEnter:!0,unmountOnExit:!0},(a=>r.createElement("div",{style:Ao(Ao({},Do),No[a])},t===vo.RunConfigureScript&&r.createElement(r.Suspense,{fallback:r.createElement(Aa,null)},r.createElement(Ia,{onNext:()=>n(vo.CopyOutput)})),t===vo.CopyOutput&&r.createElement(bo,{onNext:()=>n(vo.CreateConfig)}),t===vo.CreateConfig&&r.createElement(ho,{onNext:()=>n(vo.StartTeleport)}),t===vo.StartTeleport&&r.createElement(yo,{onNext:()=>e.nextStep()}))))),o)}},{title:"Discover Desktops",component:function(e){const t=(0,G.Z)(),{result:n}=wt(),[a,l]=(0,r.useState)(!0),{clusterId:i}=(0,Yl.Z)(),{timedOut:s,result:c}=At((e=>t.desktopService.fetchDesktops(i,{limit:14},e)),6e5,a,3e3),u=(0,r.useRef)(null);(0,r.useEffect)((()=>{a&&c&&14===c.agents.length&&l(!1)}),[a,c]);const m=(0,r.useRef)(),p=[];if(c&&c.agents){const e=c.agents.filter((e=>e.host_id===n.name));if(e.length)for(const t of e.values()){const e=t.labels.find((e=>"teleport.dev/os"===e.name)).value,n=t.labels.find((e=>"teleport.dev/os_version"===e.name)).value;p.push({os:e,osVersion:n,computerName:t.name,address:t.addr})}}let g;if(s)g=r.createElement(Vl,null,r.createElement(Kl,null,"Oh no!")," We could not find any Desktops. Connect Desktops to your Active Directory for Teleport to automatically discover them.");else{const e=p.slice(0,3).map(((e,t)=>r.createElement(dl,{key:t,index:t,os:e.os,osVersion:e.osVersion,computerName:e.computerName,address:e.address,desktopServiceElement:u.current,containerElement:m.current}))),t=p.length-3;let n;if(t>0){let e="1",a="Desktops";1===t?a="Desktop":e=t>11?"10+":`${t}`,n=r.createElement(Vl,{key:"view-more"},"We've found ",e," more ",a,"."," ",r.createElement(Jl,{to:d.Z.getDesktopsRoute(i)},"View them all here"))}g=r.createElement(r.Fragment,null,e,n)}return r.createElement(o.xu,null,r.createElement(Se,null,"Discover Desktops"),r.createElement(o.xv,null,"We're discovering Desktops that are already connected to your Active Directory."),r.createElement(Bl,{ref:m},r.createElement(Ql,{result:n,desktopServiceRef:u}),r.createElement(Fl,null,g)),r.createElement(Wl,null,r.createElement(o.DF,{width:"165px",mr:3,onClick:()=>e.nextStep()},"Finish")))}},{title:"Finished",component:Oe,hide:!0}]},_l=[kn,Sr,Vr,Jr,$l],ei=r.createContext(null);function ti(e){var t;const n=(0,pt.Z)({customBanners:e.customBanners,initialAlerts:e.initialAlerts}),a=(0,i.TH)(),[o,l]=(0,r.useState)(0),[s,c]=(0,r.useState)(function(e){switch(e){case"application":return Le.Application;case"database":return Le.Database;case"desktop":return Le.Desktop;case"kubernetes":return Le.Kubernetes;default:return Le.Server}}(null==a||null===(t=a.state)||void 0===t?void 0:t.entity)),[u,m]=(0,r.useState)(),[d,p]=(0,r.useState)(),g=_l.find((e=>e.kind===s)),b=(0,r.useMemo)((()=>"function"==typeof g.views?I(g.views(d)):I(g.views)),[g.views,d]),h={agentMeta:u,alerts:n.alerts,currentStep:o,customBanners:n.customBanners,dismissAlert:n.dismissAlert,initAttempt:{status:n.status,statusText:n.statusText},nextStep:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Number.isInteger(e)||(e=1);const t=A(b,o+e);t&&l(o+e)},prevStep:function(){A(b,o-1)&&l(o-1)},onSelectResource:function(e){c(e)},resourceState:d,selectedResource:g,selectedResourceKind:s,setResourceState:p,updateAgentMeta:function(e){m(e)},views:b};return r.createElement(ei.Provider,{value:h},e.children)}function ni(){return(0,r.useContext)(ei)}const ri=a.ZP.div(["color:white;border-radius:8px;font-size:12px;padding:4px 6px;line-height:1;"]),ai=(0,a.ZP)("div")(["background:",";border-radius:8px;padding:12px 12px;color:white;cursor:pointer;","{background:",";}"],(e=>e.selected?"#5130c9":"#1d2752"),ri,(e=>e.selected?"#4126a1":"#512fc9")),oi=a.ZP.h3(["margin:10px 0 0 0;font-size:14px;font-weight:700;"]);function li(e){let t;return e.database.popular&&(t=r.createElement(ri,null,"popular")),r.createElement(ai,{selected:e.selected,onClick:()=>e.onSelect()},r.createElement(o.kC,{justifyContent:"space-between",alignItems:"center"},function(e){switch(e.location){case pe.AWS:case pe.GCP:return r.createElement(b.ZJk,{fontSize:22});case pe.SelfHosted:default:return r.createElement(b.voY,{fontSize:22})}}(e.database),t),r.createElement(oi,null,e.database.name))}const ii=a.ZP.div(["display:grid;grid-template-columns:repeat(4,1fr);column-gap:10px;row-gap:15px;"]);var si;!function(e){e.All="All",e.AWS="AWS",e.GCP="GCP",e.SelfHosted="Self-Hosted"}(si||(si={}));const ci=[si.All,si.AWS,si.GCP,si.SelfHosted];function ui(){const{resourceState:e,setResourceState:t}=ni(),[n,a]=(0,r.useState)(si.All),l=[];for(const[a,o]of be.entries()){switch(n){case si.SelfHosted:if(o.location!==pe.SelfHosted)continue;break;case si.AWS:if(o.location!==pe.AWS)continue;break;case si.GCP:if(o.location!==pe.GCP)continue}l.push(r.createElement(li,{database:o,key:a,selected:o===e,onSelect:()=>t(o)}))}return r.createElement(o.xu,{mt:6},r.createElement(o.kC,{alignItems:"center",justifyContent:"space-between",mb:4},r.createElement(Se,null,"Select Deployment Type"),r.createElement(o.xu,{width:"470px"},r.createElement(Q,{appearance:"round",size:"medium",tabs:ci,onChange:e=>a(ci[e])}))),r.createElement(ii,null,l))}function mi(e){const{resourceState:t}=ni();let n=r.createElement(ui,null);return e.disabled&&(n=r.createElement(Ze,{action:"add new Databases",productName:"Database Access"})),r.createElement(r.Fragment,null,n,r.createElement(we,{onProceed:()=>e.onProceed(),disableProceed:!t||e.disabled}))}function di(e){let t=r.createElement(Be,null,r.createElement(o.xv,{typography:"h5",bold:!0,mb:"4px"},r.createElement(b.cEj,{mr:"8px",fontSize:"14px"}),"Note"),r.createElement(o.xv,null,"Teleport Desktop Access currently only supports Windows Desktops managed by Active Directory (AD)."),r.createElement(o.xv,null,"We are working on adding support for non-AD Windows Desktops."));return e.disabled&&(t=r.createElement(Ze,{action:"add new Desktops",productName:"Desktop Access"})),r.createElement(r.Fragment,null,t,r.createElement(we,{onProceed:()=>e.onProceed(),disableProceed:e.disabled}))}function pi(e){let t;return e.disabled&&(t=r.createElement(Ze,{action:"add new Kubernetes resources",productName:"Kubernetes Access"})),r.createElement(r.Fragment,null,t,r.createElement(we,{onProceed:()=>e.onProceed(),disableProceed:e.disabled}))}function gi(e){let t=r.createElement(bi,null);return e.disabled&&(t=r.createElement(Ze,{action:"add new Servers",productName:"Server Access"})),r.createElement(r.Fragment,null,t,r.createElement(we,{onProceed:()=>e.onProceed(),disableProceed:e.disabled}))}function bi(){return r.createElement(Be,null,r.createElement(o.xv,{typography:"h5"},"Teleport officially supports the following operating systems:"),r.createElement("ul",{style:{paddingLeft:28}},r.createElement("li",null,"Ubuntu 14.04+"),r.createElement("li",null,"Debian 8+"),r.createElement("li",null,"RHEL/CentOS 7+"),r.createElement("li",null,"Amazon Linux 2"),r.createElement("li",null,"macOS (Intel)")),r.createElement(o.xv,null,"For a more comprehensive list, visit"," ",r.createElement(o.rU,{href:"https://goteleport.com/download",target:"_blank"},"https://goteleport.com/download"),"."))}const hi="data:image/png;base64,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";function Ei(e){const t=(0,G.Z)(),n=t.storeUser.state,{acl:a}=n,[l,i]=(0,r.useState)(!1),[s,c]=(0,r.useState)(!1),u=[{name:"server",kind:Le.Server,component:r.createElement(fi,{iconSrc:hi,title:"Server"}),permissionsNeeded:[a.nodes.list]},{name:"database",kind:Le.Database,component:r.createElement(fi,{iconSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUVSURBVHgB7VdNbBtFFP5md+3EsR3nr6lJ89f0B4JEq7SoDQgqKK2oSqECoaoIVRwAwaUCqSeEhMSlcOSAxA0OnJAoolQNIgWFnxZKq6iEgpLWbVCTkp86dhxnvd6d2Z1h1nYaJ603ruHAoU9+mrW9+963877vzQxw1/5HRnBnRgquSleKvrsmpPMiFwUvK2i592nPdX/a9MjDew9cPRfYRoT/IZuSoEKUJuH+L0RcUZxJLWyNcDLft/7l/u/feO2lCfmcsxKYckCoAwMDbWP9vUdHfqp6yjJILc3KyI73Q9URx2jZnPoi+vSZdw/t3/9XAUxFIJSRkZEtwyc3fD3UrzS5yRecUZRl3Xvnxpp3nd5zcN++S8iX6dYkK8TwOfENxy6dUZoUyYJiJ2UWcrgv0u6b6fnSjVXqHi8QJBaL9abjSjtZSK4UAGj5sVzT41Ubj/Wd6kEFIKCbzN+xqZDYBSHfRdUWvdzZaN9qwGC0DiXK7wnCcigJ32NixwuLiRXpmntdALSS9RycA69NIZnJlLzHMwynVEmm59Gz14d1W1V897Gs8c/yd8lzzcmPnOfHYiPy1aL3UXRsM4BgBlPJlFeaFUAQLTd9FmOobmB49i0fdicUTIwQXL0AzFwD0kkBS+YKr3bgDziI3k/R+qAOS9Hxx7caEmMErd3ekvYEMT15fbattTUPSAhkLYq4lURgvYrNG1VZFgWMOaC2DebYyGQpdCOL62kLzHZgWvXySX/u+XQiaVQEoj4UUjWlQBuxOBgSjCPr4CZiLgA52q47XLotm+fSju3GaGtu4KXyeBIzGIlUqTSA9MzyrivyH+G9NBAiQHUVETQiEKwNoRIQpg0E5IxO/Kng9Gc8D2ZZ3qU4Fr8wQ8X07yE0NPjhr2OIZ9Il83iWw0cISc1nsGlXPeKjPnzzIUPGDKO+w0JtC4WvVgaogSwFgWkqmLkiZ23Ch8TlGhm4Cmu3MSi1WUzPznml8QbBGM31Rcps1LcTHHpPQ2rShyvnQxj9jWN2Wiojy0FNIXuGQLiZo7XdQe8+E/7oDVzsVzF1jaCtW1QOYiZxI93Z1ZW7doloS0LOiiSivRo6d/hzpeAiT9CsZcGkDPOGiVnDAJuW6qCL6tB1U1QEoqamhijKrbTJmBbSUoq3U4cjG8JywrrqiIa0ki3Tk5gN4VWaalbflpClTNy8MS9TqmsIWo2oCtWFUQkI07ZIuEnB+JCCwT4hG05RggWJlgCXV0cQq1ZrCEVtJHS9snIo3JFrh44te+oRO6fhq/cl20NBNHZZiKxh8EcEHBla8haUEqTjBKmxEKaGQuDz1Vi73UZojYUbqX+hjtxyCXftsNG5heDV7T7Mjldh+BeO2IBAJiWQ+DuvjqogUNfC0bzBxgOvUIQ6Exg6BVwbVtG+llcOwrHYzVfIqcOkyPjT6HiMYONuDarcaDBJRMbsHEF10xKGaZKUbiA5Zcu1w91C5Hc/QigVlUMcOXL40ufHT47K666FH22Z1J2Zucxt1w7iqoPzpW8uuBh788Xnf0AJBnkSc3Bw0Lx8OXbA4c744gLmLZOl6oDbSKZGY8PPyKuSW+OVNrr8yZ2PXjh7/vxOw8h+IsTC9mXlBYxLMQl/+qPhyR+3v3P49YsosdN27U4OP+qJEydaIqvbnggEA4/LQ886m/N7bS4aJV8EpSxJGRs3TeuCZZrnfj1z9vgHR9+O4z86/Cw3pciLj4GuVXQMvGsL9g91A5r2QZnbJgAAAABJRU5ErkJggg==",title:"Database"}),permissionsNeeded:[a.dbServers.read,a.dbServers.list]},{name:"kubernetes",kind:Le.Kubernetes,component:r.createElement(fi,{iconSrc:"data:image/png;base64,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",title:"Kubernetes"}),permissionsNeeded:[a.kubeServers.read,a.kubeServers.list]},{name:"application",kind:Le.Application,component:r.createElement(fi,{iconSrc:"data:image/png;base64,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",title:"Application"}),permissionsNeeded:[a.appServers.read,a.appServers.list]},{name:"desktop",kind:Le.Desktop,component:r.createElement(fi,{iconSrc:hi,title:"Desktop"}),permissionsNeeded:[a.desktops.read,a.desktops.list]}],m=u.findIndex((t=>t.kind===e.selectedResourceKind)),d=Math.max(0,m),p=function(e,t){return[e.tokens.create,...t.permissionsNeeded].some((e=>!e))}(a,u[d]);return r.createElement(o.xu,null,r.createElement(Se,null,"Select Resource Type"),r.createElement(Ne,null,"Users are able to add and access many different types of resources through Teleport. ",r.createElement("br",null),"Start by selecting the type of resource you want to add."),r.createElement(Q,{initialSelected:d,tabs:u,onChange:t=>e.onSelect(u[t].kind)}),e.selectedResourceKind===Le.Database&&r.createElement(mi,{disabled:p,onProceed:()=>{const t=e.resourceState;return t.location===pe.SelfHosted&&t.engine===ge.PostgreSQL&&e.onNext(),t.location===pe.AWS&&t.engine===ge.PostgreSQL&&e.onNext(),c(!0)}}),e.selectedResourceKind===Le.Application&&r.createElement(dt,{disabled:p,onProceed:()=>i(!0)}),e.selectedResourceKind===Le.Desktop&&r.createElement(di,{disabled:p,onProceed:()=>e.onNext()}),e.selectedResourceKind===Le.Kubernetes&&r.createElement(pi,{disabled:p,onProceed:()=>e.onNext()}),e.selectedResourceKind===Le.Server&&r.createElement(gi,{disabled:p,onProceed:()=>e.onNext()}),l&&r.createElement(de,{onClose:()=>i(!1)}),s&&r.createElement(Ce,{isEnterprise:t.isEnterprise,username:n.username,version:n.cluster.authVersion,authType:n.authType,onClose:()=>c(!1),selectedDb:e.resourceState}))}const fi=e=>{let{iconSrc:t,title:n}=e;return r.createElement(yi,null,r.createElement(o.Ee,{src:t,width:"32px",mr:2}),r.createElement(o.xv,{bold:!0,typography:"h5"},n))};var yi=(0,a.ZP)(o.kC)(["align-items:center;"]),xi=n(7424);function Ii(e){const t=(0,G.Z)();return r.createElement(xi.z,{navItems:t.storeNav.getTopMenuItems(),logout:e.logout,username:t.storeUser.getUsername()})}const Ai=["alerts","initAttempt","customBanners","dismissAlert","currentStep","selectedResource","onSelectResource","views"];function Ci(){const e=ni(),{alerts:t,initAttempt:n,customBanners:a,dismissAlert:b,currentStep:h,selectedResource:E,onSelectResource:f,views:y}=e,x=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Ai),I=(0,p.Z)();let C;if(h>0){const e=A(y,h).component;C=r.createElement(e,x),E.wrapper&&(C=E.wrapper(C))}else C=r.createElement(Ei,{selectedResourceKind:E.kind,onSelect:e=>f(e),onNext:()=>x.nextStep(),resourceState:x.resourceState});const v=t.map((e=>{return{message:e.spec.message,severity:(t=e.spec.severity,t<5?"info":t<10?"warning":"danger"),link:e.metadata.labels[g.F],id:e.metadata.name};var t}));return r.createElement(m.t,{banners:v,customBanners:a,onBannerDismiss:b},r.createElement(Mi,null,r.createElement(i.NL,{message:e=>e.pathname===d.Z.routes.discover||"Are you sure you want to exit the “Add New Resource” workflow? You’ll have to start from the beginning next time.",when:E.shouldPrompt(h)}),"processing"===n.status&&r.createElement(s.StyledIndicator,null,r.createElement(o.z$,null)),"failed"===n.status&&r.createElement(l.b0,null,n.statusText),"success"===n.status&&r.createElement(r.Fragment,null,r.createElement(O,{views:y,currentStep:h,selectedResource:E}),r.createElement(s.HorizontalSplit,null,r.createElement(s.ContentMinWidth,null,r.createElement(c.T,null,r.createElement(o.xv,{typography:"h5",bold:!0},"Manage Access"),r.createElement(Ii,{logout:I.logout})),r.createElement(u.Ob,{pt:4,maxWidth:"1450px"},C))))))}function vi(e){return r.createElement(ti,{customBanners:e.customBanners,initialAlerts:e.initialAlerts},r.createElement(Ci,null))}const Mi=(0,a.ZP)(s.MainContainer)(["--sidebar-width:280px;"])},7067:(e,t,n)=>{n.d(t,{Ob:()=>m,OX:()=>c,u4:()=>u,E2:()=>d});var r=n(917),a=n(1218),o=n(135);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=(0,r.ZP)(a.kC)(["flex-shrink:0;border-bottom:1px solid ",";height:56px;margin-left:-40px;margin-right:-40px;padding-left:40px;padding-right:40px;"],(e=>e.theme.colors.primary.main));c.defaultProps={alignItems:"center",mb:4};const u=(0,r.ZP)(a.xv)(["white-space:nowrap;"]);u.defaultProps=i(i({},a.xv.defaultProps),{},{typography:"h3"});const m=(0,r.ZP)(a.kC)(["width:100%;height:100%;flex-direction:column;::after{content:' ';padding-bottom:24px;}"]);m.defaultProps={theme:o.Z,px:6},r.ZP.div(["position:absolute;width:100%;height:100%;display:flex;"]),r.ZP.div(["display:flex;flex-direction:column;width:100%;"]);const d=r.ZP.button(["color:",";cursor:pointer;display:inline-flex;font-size:14px;padding:12px 40px;position:relative;text-decoration:none;font-weight:500;&:hover{background:",";}&.active{color:",";}&.active:after{background-color:",";content:'';position:absolute;bottom:0;left:0;width:100%;height:4px;}"],(e=>e.theme.colors.text.secondary),(e=>e.active?e.theme.colors.primary.light:"rgba(255, 255, 255, .06)"),(e=>e.theme.colors.light),(e=>e.theme.colors.accent))},1347:(e,t,n)=>{n.d(t,{r:()=>m,Z:()=>y});var r=n(2784),a=n(5070),o=n(3388),l=n(1218),i=n(917);const s=["text","fontFamily","allowMultiline","onCopy","bash"];function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}var u=n(3757);function m(e){var t,n;let{lines:i,bash:s=!0}=e;const c=(0,r.useRef)([]),m=null===(t=window.navigator)||void 0===t||null===(n=t.userAgent)||void 0===n?void 0:n.toLowerCase().includes("firefox");return r.createElement(h,{bg:"bgTerminal",pl:3,pt:2,pr:7,borderRadius:2,pb:m?3:2},r.createElement(b,{mr:1},i.map(((e,t)=>{const n=t===i.length-1;return r.createElement(l.xu,{pt:2,pb:n?0:2,key:t,ref:e=>c.current[t]=e},e.comment&&r.createElement(p,null,e.comment),r.createElement(l.kC,null,r.createElement(l.kC,null,s&&r.createElement(l.xu,{mr:"1"},"$"),r.createElement("div",{className:"text-to-copy"},r.createElement(E,null,e.text))),r.createElement(f,{pr:3},r.createElement(g,{onClick:()=>function(e){(0,a.Z)(i[e].text).then((()=>{const t=c.current[e].getElementsByClassName("icon-container")[0];t.classList.toggle("copied"),setTimeout((()=>{t.classList.toggle("copied")}),1e3)}));const t=c.current[e].getElementsByClassName("text-to-copy")[0];(0,o.Z)(t)}(t)},r.createElement(d,{className:"icon-container"},r.createElement(u.CKM,{"data-testid":"btn-copy"}),r.createElement(u.JrY,{"data-testid":"btn-check"}))))))}))))}const d=i.ZP.div([".icon-check{display:none;}.icon-copy{display:block;}&.copied{.icon-check{display:block;}.icon-copy{display:none;}}"]),p=i.ZP.div(["color:rgb(117 113 94 / 80%);"]),g=(0,i.ZP)(l.PL)(["height:28px;width:28px;border-radius:20px;min-height:auto;padding:0;margin-top:-4px;"]),b=(0,i.ZP)(l.xu)(["white-space:pre;word-break:break-all;font-size:12px;font-family:",";overflow:scroll;line-height:20px;"],(e=>{let{theme:t}=e;return t.fonts.mono}));var h=(0,i.ZP)(l.xu)({position:"relative"}),E=(0,i.ZP)("pre")({margin:0}),f=(0,i.ZP)(l.xu)(["position:absolute;right:0px;"]);const y=function(e){let{text:t,fontFamily:n,allowMultiline:u,onCopy:m,bash:d=!0}=e,p=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,s);const g=n||(0,i.Fg)().fonts.mono,b=r.useRef(),[h,E]=r.useState((()=>"Copy")),f=d&&!u?{overflow:"auto",whiteSpace:"pre",wordBreak:"break-all",fontSize:"12px",fontFamily:g}:{wordBreak:"break-all",fontSize:"12px",fontFamily:g};return r.createElement(l.kC,c({bg:"bgTerminal",p:"2",alignItems:"center",justifyContent:"space-between",borderRadius:2},p),r.createElement(l.kC,{mr:"2",style:f},d&&r.createElement(l.xu,{mr:"1",style:{userSelect:"none"}},"$"),r.createElement("div",{ref:b},t)),r.createElement(l.DF,{onClick:function(){(0,a.Z)(t).then((()=>E("Copied"))),(0,o.Z)(b.current),m&&m()},style:{maxWidth:"48px",width:"100%",padding:"4px 8px",minHeight:"10px",fontSize:"10px"}},h))}},3228:(e,t,n)=>{n.d(t,{ES:()=>l,Kp:()=>a,RB:()=>r,Sl:()=>o});const r=e=>{const t=document.createElement("a");t.setAttribute("href",`${e}`),t.setAttribute("target","_blank"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)};async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TextEncoder;const n=t.encode(e),r=await crypto.subtle.digest("SHA-256",n),a=Array.from(new Uint8Array(r)),o=a.map((e=>e.toString(16).padStart(2,"0"))).join("");return o}function o(e){let{authType:t,clusterId:n="",username:r,accessRequestId:a=""}=e;const{hostname:o,port:l}=window.location,i=`${o}:${l||"443"}`,s=a?` --request-id=${a}`:"";switch(t){case"sso":return`tsh login --proxy=${i} ${n}${s}`.trim();case"local":case"passwordless":return`tsh login --proxy=${i} --auth=${t} --user=${r} ${n}${s}`.trim();default:throw new Error(`auth type ${t} is not supported`)}}function l(e,t){return e&&t?e.filter((e=>!t.includes(e))):[]}},2010:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTMwcHgiIGhlaWdodD0iMTM3cHgiIHZpZXdCb3g9IjAgMCAxMzAgMTM3IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi41ICg2NzQ2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dGVsZXBvcnQgbWVkYWxsaW9uIDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iNTAlIiB5MT0iMCUiIHgyPSI1MCUiIHkyPSIxMDAlIiBpZD0ibGluZWFyR3JhZGllbnQtMSI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMxRTI3NTEiIG9mZnNldD0iMCUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzBDMTQzRCIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9IjAlIiB5MT0iMy4zNDk2MDkzNyUiIHgyPSIxMDAlIiB5Mj0iMTAwJSIgaWQ9ImxpbmVhckdyYWRpZW50LTIiPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMzg0OUI1IiBvZmZzZXQ9IjAlIj48L3N0b3A+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMxQTIzN0UiIG9mZnNldD0iMTAwJSI+PC9zdG9wPgogICAgICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICAgICAgPGNpcmNsZSBpZD0icGF0aC0zIiBjeD0iNTcuNSIgY3k9IjU3LjUiIHI9IjU3LjUiPjwvY2lyY2xlPgogICAgICAgIDxmaWx0ZXIgeD0iLTcuMCUiIHk9Ii03LjAlIiB3aWR0aD0iMTEzLjklIiBoZWlnaHQ9IjExNy40JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTQiPgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSI0IiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIyIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93Qmx1ck91dGVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29tcG9zaXRlPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC4yNCAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIwIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIyIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIyIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIyIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjIiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93Qmx1ck91dGVyMiIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIyIj48L2ZlQ29tcG9zaXRlPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC4xMiAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIyIiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMiI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgICAgICA8ZmVNZXJnZT4KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlTWVyZ2VOb2RlPgogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJzaGFkb3dNYXRyaXhPdXRlcjIiPjwvZmVNZXJnZU5vZGU+CiAgICAgICAgICAgIDwvZmVNZXJnZT4KICAgICAgICA8L2ZpbHRlcj4KICAgICAgICA8ZmlsdGVyIHg9Ii0xMDYuOSUiIHk9Ii0xMDEuMyUiIHdpZHRoPSIzMTMuOSUiIGhlaWdodD0iMzAyLjYlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJmaWx0ZXItNSI+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjgiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+CiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjE2IiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjI0IDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0JsdXJPdXRlcjEiIHJlc3VsdD0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgICAgIDxmZU1lcmdlPgogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVNZXJnZU5vZGU+CiAgICAgICAgICAgICAgICA8ZmVNZXJnZU5vZGUgaW49IlNvdXJjZUdyYXBoaWMiPjwvZmVNZXJnZU5vZGU+CiAgICAgICAgICAgIDwvZmVNZXJnZT4KICAgICAgICA8L2ZpbHRlcj4KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9Ijc5LjM5ODYwMDMlIiB5MT0iLTg1LjM5ODE3MTIlIiB4Mj0iMTMuNDYwMjg2NSUiIHkyPSIxOTEuOTY2NjY0JSIgaWQ9ImxpbmVhckdyYWRpZW50LTYiPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkZGRkZGIiBvZmZzZXQ9IjAlIj48L3N0b3A+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIG9mZnNldD0iMTguMjI2OTA5MSUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0U4RUFGNiIgc3RvcC1vcGFjaXR5PSIwLjI0IiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgICAgIDxmaWx0ZXIgeD0iLTEwNi45JSIgeT0iLTEwMS4zJSIgd2lkdGg9IjMxMy45JSIgaGVpZ2h0PSIzMDIuNiUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci03Ij4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iOCIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMTYiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgICAwIDAgMCAwIDAgICAwIDAgMCAwIDAgIDAgMCAwIDAuMjQgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSIgcmVzdWx0PSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4KICAgICAgICAgICAgPGZlTWVyZ2U+CiAgICAgICAgICAgICAgICA8ZmVNZXJnZU5vZGUgaW49InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZU1lcmdlTm9kZT4KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iU291cmNlR3JhcGhpYyI+PC9mZU1lcmdlTm9kZT4KICAgICAgICAgICAgPC9mZU1lcmdlPgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlRlbGVwb3J0IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iVGVsZXBvcnQtLS1Mb2dpbiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTY1Ni4wMDAwMDAsIC00My4wMDAwMDApIiBmaWxsLXJ1bGU9Im5vbnplcm8iPgogICAgICAgICAgICA8ZyBpZD0idGVsZXBvcnQtbWVkYWxsaW9uLSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjY0LjAwMDAwMCwgNDcuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iT3ZhbCI+CiAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTQpIiB4bGluazpocmVmPSIjcGF0aC0zIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlIHN0cm9rZT0idXJsKCNsaW5lYXJHcmFkaWVudC0yKSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWpvaW49InNxdWFyZSIgZmlsbD0idXJsKCNsaW5lYXJHcmFkaWVudC0xKSIgZmlsbC1ydWxlPSJldmVub2RkIiBjeD0iNTcuNSIgY3k9IjU3LjUiIHI9IjU2LjUiPjwvY2lyY2xlPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPGcgaWQ9ImdyYXZpdHkvbG9nby90ZWxlcG9ydCIgZmlsdGVyPSJ1cmwoI2ZpbHRlci01KSIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBvdmVybGF5OyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjEuMDAwMDAwLCAxOS4wMDAwMDApIiBmaWxsPSJ1cmwoI2xpbmVhckdyYWRpZW50LTYpIj4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iQ29tYmluZWQtU2hhcGUiPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNzEuMzUzNDcxMiw0OC43MzExNzMxIEM3MS44NzI1MDQzLDQ5LjEwMjE5NjEgNzIuMDU4NjQzOSw0OS44MDY5Nzc0IDcxLjc5OTY2NjksNTAuNDAwNTA1NyBDNzAuMzE2NDgzNSw1NC45NjQwMzI0IDY3Ljc1OTYyNDIsNTkuMzA1MDUzNSA2NC42MDg3MzYzLDYyLjkwMzQ4ODMgQzY0LjE2NDY5ODUsNjMuNDIzMDI4NyA2My41MzQ1MjA2LDYzLjYwNzczMDEgNjIuOTQxMDMxNiw2My4zNDg0OTk5IEw1My43ODYxOTE1LDYwLjE1NzgxMTYgQzUxLjUyNDk5NzcsNjIuMDEzNDY1OCA0OC45Njc1OTg1LDYzLjQ5NzAxNyA0Ni4yMjUxMzkyLDY0LjU3MjgyMTMgTDQ0LjQwOTA2MjMsNzQuMDcwODk3NCBDNDQuMjk3OTE3OSw3NC42NjQ0MjU3IDQzLjc3ODg4NDUsNzUuMjIxMjMwMSA0My4xNDgxNjc0LDc1LjI5NTIxODcgQzQwLjc3NjkwODYsNzUuNzQwNzY5OCAzOC40MDQwMzA3LDc2IDM1Ljk1ODMxNTksNzYgQzMzLjUxMTUyMiw3NiAzMS4xMzk3MjMzLDc1Ljc0MDIyOTYgMjguNzY3OTI0Nyw3NS4yOTUyMTg3IEMyOC4xMzcyMDc1LDc1LjIyMTIzMDEgMjcuNjE4NzEzOCw3NC42NjQ0MjU3IDI3LjUwNzU2OTUsNzQuMDcwODk3NCBMMjUuNjkxNDkyNiw2NC41NzI4MjEzIEMyMi45NDkwMzMxLDYzLjQ5NzAxNyAyMC4zMTcxNzgzLDYyLjAxMzQ2NTggMTguMTMwNDQwNCw2MC4xNTc4MTE2IEw4Ljk3NTYwMDEyLDYzLjM0ODQ5OTkgQzguMzgyNjUwNDcsNjMuNjA4MjY5NiA3Ljc1MjQ3Mjg2LDYzLjQyMzAyODcgNy4zMDczNTU5OSw2Mi45MDM0ODgzIEM0LjE1NzAwNzQ4LDU5LjMwNTA1MzUgMS41OTk2MDg2OCw1NC45NjQwMzI0IDAuMTE2OTY0ODAyLDUwLjQwMDUwNTcgQy0wLjE0MjU1MTgyOSw0OS44MDY5Nzc0IDAuMDQzMDQ4NDIzMSw0OS4xMDIxOTYxIDAuNTYxNTQyMTUzLDQ4LjczMTE3MzEgTDcuODI1MzEwMTgsNDIuNDI0ODY1MyBDNy41NjU3OTM1NSw0MS4wMTQyMjI3IDcuNDkxODc3MTcsMzkuNDkzNDA3MiA3LjQ5MTg3NzE3LDM4LjAwOTMxNTggQzcuNDkxODc3MTcsMzYuNTI1NzY0NiA3LjU2NjMzMzA3LDM1LjAwMzg2OSA3LjgyNTMxMDE4LDMzLjU5NDMwNjUgTDAuNTYxMDAyNjE0LDI3LjI4NjkxODcgQzAuMDQyNTA4ODg3MywyNi45MTU4OTU5IC0wLjE0MzA5MTM2NSwyNi4yMTE2NTQ2IDAuMTE2NDI1MjY3LDI1LjYxNzU4NjEgQzEuNTk5MDY5MTQsMjEuMDU0NTk5NiA0LjE1NjQ2Nzk2LDE2LjcxMzU3ODYgNy4zMDY4MTY0MywxMy4xMTUxNDM0IEM3Ljc1MTkzMzMzLDEyLjU5NTYwMzQgOC4zODIxMTA5NSwxMi40MTAzNjIgOC45NzUwNjA1NiwxMi42NzAxMzIgTDE4LjEyOTkwMDksMTUuODYwMjgwMSBDMjAuMzE2NjM4OCwxNC4wMDUxNjYxIDIyLjk0ODQ5MzYsMTIuNTIxNjE0OSAyNS42OTA5NTMxLDExLjQ0NTI3MDcgTDI3LjUwNzAzLDEuOTQ3NzM0NzUgQzI3LjYxODE3NDMsMS4zNTQyMDYyNiAyOC4xMzcyMDc1LDAuNzk3NDAyMDEzIDI4Ljc2NzM4NTEsMC43MjM0MTM0NzUgQzMzLjUxMTUyMiwtMC4yNDExMzc4MjUgMzguNDAzNDkxMiwtMC4yNDExMzc4MjUgNDMuMTQ3NjI3OCwwLjcyMzQxMzQ3NSBDNDMuNzc4MzQ1MiwwLjc5NzQwMjAxMyA0NC4yOTczNzgzLDEuMzU0MjA2MjYgNDQuNDA4NTIzMSwxLjk0NzczNDc1IEw0Ni4yMjQwNjAxLDExLjQ0NDczMDcgQzQ4Ljk2NjUxOTQsMTIuNTIxMDc0OCA1MS41MjQ0NTc4LDE0LjAwNDYyNiA1My43ODUxMTI0LDE1Ljg1OTc0MDEgTDYyLjkzOTk1MjUsMTIuNjY5NTkyIEM2My41MzM0NDE1LDEyLjQwOTI4MTkgNjQuMTYzNjE5NCwxMi41OTUwNjM0IDY0LjYwNzY1NzIsMTMuMTE0NjAzMyBDNjcuNzU4NTQ1MSwxNi43MTMwMzg2IDcwLjMxNTQwNDQsMjEuMDU0MDU5NSA3MS43OTg1ODc4LDI1LjYxNzA0NiBDNzIuMDU4NjQzOSwyNi4yMTExMTQ2IDcxLjg3MjUwNDMsMjYuOTE1MzU1OCA3MS4zNTM0NzEyLDI3LjI4NjM3ODYgTDY0LjA4OTE2MzQsMzMuNTkzNzY2NCBDNjQuMzQ4Njc5OSwzNS4wMDM4NjkgNjQuNDIyNTk2NywzNi41MjUyMjQ4IDY0LjQyMjU5NjcsMzguMDA4Nzc2IEM2NC40MjI1OTY3LDM5LjQ5Mjg2NzMgNjQuMzQ4Njc5OSw0MS4wMTQyMjI3IDY0LjA4OTE2MzQsNDIuNDI0MzI1NSBMNzEuMzUzNDcxMiw0OC43MzExNzMxIFogTTM2LDYyLjUwOTc0MiBDNDkuNTQxNjI4LDYyLjUwOTc0MiA2MC41MTkxMzU0LDUxLjUzNjI3MzQgNjAuNTE5MTM1NCwzOCBDNjAuNTE5MTM1NCwyNC40NjM3MjY2IDQ5LjU0MTYyOCwxMy40OTAyNTggMzYsMTMuNDkwMjU4IEMyMi40NTgzNzIsMTMuNDkwMjU4IDExLjQ4MDg2NDYsMjQuNDYzNzI2NiAxMS40ODA4NjQ2LDM4IEMxMS40ODA4NjQ2LDUxLjUzNjI3MzQgMjIuNDU4MzcyLDYyLjUwOTc0MiAzNiw2Mi41MDk3NDIgWiBNMzYsNTkuNDE3NDEwMyBDMjQuMTY3NDI2NSw1OS40MTc0MTAzIDE0LjU3NTA3OTUsNDkuODI4NTkyNCAxNC41NzUwNzk1LDM4IEMxNC41NzUwNzk1LDI2LjE3MTQwNzYgMjQuMTY3NDI2NSwxNi41ODI1ODk3IDM2LDE2LjU4MjU4OTcgQzQ3LjgzMjU3MzUsMTYuNTgyNTg5NyA1Ny40MjQ5MjA1LDI2LjE3MTQwNzYgNTcuNDI0OTIwNSwzOCBDNTcuNDI0OTIwNSw0OS44Mjg1OTI0IDQ3LjgzMjU3MzUsNTkuNDE3NDEwMyAzNiw1OS40MTc0MTAzIFogTTI0LjAwNTk1MDksMjggTDI0LjAwNTk1MDksMzQuMDAyMTUxNSBMMzMuMDAyOTc1NSwzNC4wMDIxNTE1IEwzMy4wMDI5NzU1LDQ5LjAwODE2MzUgTDQwLDQ5LjAwODE2MzUgTDQwLDM0LjAwMjE1MTUgTDQ5LjAwMzkwNjIsMzQuMDAyMTUxNSBMNDkuMDAzOTA2MiwyOCBMMjQuMDA1OTUwOSwyOCBaIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPGcgaWQ9ImdyYXZpdHkvbG9nby90ZWxlcG9ydCIgZmlsdGVyPSJ1cmwoI2ZpbHRlci03KSIgb3BhY2l0eT0iMC40NDA3Nzg0NiIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBvdmVybGF5OyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjEuMDAwMDAwLCAxOS4wMDAwMDApIiBmaWxsPSJ1cmwoI2xpbmVhckdyYWRpZW50LTYpIj4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iQ29tYmluZWQtU2hhcGUiPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNzEuMzUzNDcxMiw0OC43MzExNzMxIEM3MS44NzI1MDQzLDQ5LjEwMjE5NjEgNzIuMDU4NjQzOSw0OS44MDY5Nzc0IDcxLjc5OTY2NjksNTAuNDAwNTA1NyBDNzAuMzE2NDgzNSw1NC45NjQwMzI0IDY3Ljc1OTYyNDIsNTkuMzA1MDUzNSA2NC42MDg3MzYzLDYyLjkwMzQ4ODMgQzY0LjE2NDY5ODUsNjMuNDIzMDI4NyA2My41MzQ1MjA2LDYzLjYwNzczMDEgNjIuOTQxMDMxNiw2My4zNDg0OTk5IEw1My43ODYxOTE1LDYwLjE1NzgxMTYgQzUxLjUyNDk5NzcsNjIuMDEzNDY1OCA0OC45Njc1OTg1LDYzLjQ5NzAxNyA0Ni4yMjUxMzkyLDY0LjU3MjgyMTMgTDQ0LjQwOTA2MjMsNzQuMDcwODk3NCBDNDQuMjk3OTE3OSw3NC42NjQ0MjU3IDQzLjc3ODg4NDUsNzUuMjIxMjMwMSA0My4xNDgxNjc0LDc1LjI5NTIxODcgQzQwLjc3NjkwODYsNzUuNzQwNzY5OCAzOC40MDQwMzA3LDc2IDM1Ljk1ODMxNTksNzYgQzMzLjUxMTUyMiw3NiAzMS4xMzk3MjMzLDc1Ljc0MDIyOTYgMjguNzY3OTI0Nyw3NS4yOTUyMTg3IEMyOC4xMzcyMDc1LDc1LjIyMTIzMDEgMjcuNjE4NzEzOCw3NC42NjQ0MjU3IDI3LjUwNzU2OTUsNzQuMDcwODk3NCBMMjUuNjkxNDkyNiw2NC41NzI4MjEzIEMyMi45NDkwMzMxLDYzLjQ5NzAxNyAyMC4zMTcxNzgzLDYyLjAxMzQ2NTggMTguMTMwNDQwNCw2MC4xNTc4MTE2IEw4Ljk3NTYwMDEyLDYzLjM0ODQ5OTkgQzguMzgyNjUwNDcsNjMuNjA4MjY5NiA3Ljc1MjQ3Mjg2LDYzLjQyMzAyODcgNy4zMDczNTU5OSw2Mi45MDM0ODgzIEM0LjE1NzAwNzQ4LDU5LjMwNTA1MzUgMS41OTk2MDg2OCw1NC45NjQwMzI0IDAuMTE2OTY0ODAyLDUwLjQwMDUwNTcgQy0wLjE0MjU1MTgyOSw0OS44MDY5Nzc0IDAuMDQzMDQ4NDIzMSw0OS4xMDIxOTYxIDAuNTYxNTQyMTUzLDQ4LjczMTE3MzEgTDcuODI1MzEwMTgsNDIuNDI0ODY1MyBDNy41NjU3OTM1NSw0MS4wMTQyMjI3IDcuNDkxODc3MTcsMzkuNDkzNDA3MiA3LjQ5MTg3NzE3LDM4LjAwOTMxNTggQzcuNDkxODc3MTcsMzYuNTI1NzY0NiA3LjU2NjMzMzA3LDM1LjAwMzg2OSA3LjgyNTMxMDE4LDMzLjU5NDMwNjUgTDAuNTYxMDAyNjE0LDI3LjI4NjkxODcgQzAuMDQyNTA4ODg3MywyNi45MTU4OTU5IC0wLjE0MzA5MTM2NSwyNi4yMTE2NTQ2IDAuMTE2NDI1MjY3LDI1LjYxNzU4NjEgQzEuNTk5MDY5MTQsMjEuMDU0NTk5NiA0LjE1NjQ2Nzk2LDE2LjcxMzU3ODYgNy4zMDY4MTY0MywxMy4xMTUxNDM0IEM3Ljc1MTkzMzMzLDEyLjU5NTYwMzQgOC4zODIxMTA5NSwxMi40MTAzNjIgOC45NzUwNjA1NiwxMi42NzAxMzIgTDE4LjEyOTkwMDksMTUuODYwMjgwMSBDMjAuMzE2NjM4OCwxNC4wMDUxNjYxIDIyLjk0ODQ5MzYsMTIuNTIxNjE0OSAyNS42OTA5NTMxLDExLjQ0NTI3MDcgTDI3LjUwNzAzLDEuOTQ3NzM0NzUgQzI3LjYxODE3NDMsMS4zNTQyMDYyNiAyOC4xMzcyMDc1LDAuNzk3NDAyMDEzIDI4Ljc2NzM4NTEsMC43MjM0MTM0NzUgQzMzLjUxMTUyMiwtMC4yNDExMzc4MjUgMzguNDAzNDkxMiwtMC4yNDExMzc4MjUgNDMuMTQ3NjI3OCwwLjcyMzQxMzQ3NSBDNDMuNzc4MzQ1MiwwLjc5NzQwMjAxMyA0NC4yOTczNzgzLDEuMzU0MjA2MjYgNDQuNDA4NTIzMSwxLjk0NzczNDc1IEw0Ni4yMjQwNjAxLDExLjQ0NDczMDcgQzQ4Ljk2NjUxOTQsMTIuNTIxMDc0OCA1MS41MjQ0NTc4LDE0LjAwNDYyNiA1My43ODUxMTI0LDE1Ljg1OTc0MDEgTDYyLjkzOTk1MjUsMTIuNjY5NTkyIEM2My41MzM0NDE1LDEyLjQwOTI4MTkgNjQuMTYzNjE5NCwxMi41OTUwNjM0IDY0LjYwNzY1NzIsMTMuMTE0NjAzMyBDNjcuNzU4NTQ1MSwxNi43MTMwMzg2IDcwLjMxNTQwNDQsMjEuMDU0MDU5NSA3MS43OTg1ODc4LDI1LjYxNzA0NiBDNzIuMDU4NjQzOSwyNi4yMTExMTQ2IDcxLjg3MjUwNDMsMjYuOTE1MzU1OCA3MS4zNTM0NzEyLDI3LjI4NjM3ODYgTDY0LjA4OTE2MzQsMzMuNTkzNzY2NCBDNjQuMzQ4Njc5OSwzNS4wMDM4NjkgNjQuNDIyNTk2NywzNi41MjUyMjQ4IDY0LjQyMjU5NjcsMzguMDA4Nzc2IEM2NC40MjI1OTY3LDM5LjQ5Mjg2NzMgNjQuMzQ4Njc5OSw0MS4wMTQyMjI3IDY0LjA4OTE2MzQsNDIuNDI0MzI1NSBMNzEuMzUzNDcxMiw0OC43MzExNzMxIFogTTM2LDYyLjUwOTc0MiBDNDkuNTQxNjI4LDYyLjUwOTc0MiA2MC41MTkxMzU0LDUxLjUzNjI3MzQgNjAuNTE5MTM1NCwzOCBDNjAuNTE5MTM1NCwyNC40NjM3MjY2IDQ5LjU0MTYyOCwxMy40OTAyNTggMzYsMTMuNDkwMjU4IEMyMi40NTgzNzIsMTMuNDkwMjU4IDExLjQ4MDg2NDYsMjQuNDYzNzI2NiAxMS40ODA4NjQ2LDM4IEMxMS40ODA4NjQ2LDUxLjUzNjI3MzQgMjIuNDU4MzcyLDYyLjUwOTc0MiAzNiw2Mi41MDk3NDIgWiBNMzYsNTkuNDE3NDEwMyBDMjQuMTY3NDI2NSw1OS40MTc0MTAzIDE0LjU3NTA3OTUsNDkuODI4NTkyNCAxNC41NzUwNzk1LDM4IEMxNC41NzUwNzk1LDI2LjE3MTQwNzYgMjQuMTY3NDI2NSwxNi41ODI1ODk3IDM2LDE2LjU4MjU4OTcgQzQ3LjgzMjU3MzUsMTYuNTgyNTg5NyA1Ny40MjQ5MjA1LDI2LjE3MTQwNzYgNTcuNDI0OTIwNSwzOCBDNTcuNDI0OTIwNSw0OS44Mjg1OTI0IDQ3LjgzMjU3MzUsNTkuNDE3NDEwMyAzNiw1OS40MTc0MTAzIFogTTI0LjAwNTk1MDksMjggTDI0LjAwNTk1MDksMzQuMDAyMTUxNSBMMzMuMDAyOTc1NSwzNC4wMDIxNTE1IEwzMy4wMDI5NzU1LDQ5LjAwODE2MzUgTDQwLDQ5LjAwODE2MzUgTDQwLDM0LjAwMjE1MTUgTDQ5LjAwMzkwNjIsMzQuMDAyMTUxNSBMNDkuMDAzOTA2MiwyOCBMMjQuMDA1OTUwOSwyOCBaIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="}}]);